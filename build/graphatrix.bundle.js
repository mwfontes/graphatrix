!function(e){function t(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){n(this,e)}return a(e,null,[{key:"multiplyMatrixes",value:function(e,t){var i=[[],[],[]],n=void 0,a=void 0,s=void 0,r=Math.min(e[0].length,t[0].length);if(!t)return e;for(n=0;n<e.length;n++)for(a=0;a<r;a++)for(i[n][a]=e[n][0]*t[0][a],s=1;s<t.length;s++)i[n][a]+=e[n][s]*t[s][a];return i}},{key:"vertexApplyTransformations",value:function(e,t){var i=void 0;for(i=0;i<e.length;i++){var n=[[e[i].x],[e[i].y],[1]],a=this.multiplyMatrixes(t,n);e[i].modifiedX=a[0][0],e[i].modifiedY=a[1][0],e[i].update()}}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){n(this,e)}return a(e,null,[{key:"validNumber",value:function(e){var t="1234567890.,-".split(""),i=e.split("")||[],n=0;return i.map(function(e,i){if(-1!=t.indexOf(e)){if(","==e&&(e="."),"."==e&&n++,"."==e&&0==i&&(e="0"+e),"."==e&&n>1)return;return e}}).join("")}},{key:"degToRad",value:function(e){return e/180*Math.PI}},{key:"radToDeg",value:function(e){return e/Math.PI*180}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(1),o=(n(r),i(0)),u=(n(o),function(){function e(t){a(this,e),this.parent=t,this.DOMElement=void 0,this.elementsToUpdate=[],this.matrixStructure=[[1,0,0],[0,1,0],[0,0,1]],this.erase=this.erase.bind(this),this.drag=this.drag.bind(this)}return s(e,[{key:"drag",value:function(e){e.preventDefault(),e.stopPropagation(),console.log(e),2==e.button&&e.currentTarget}},{key:"erase",value:function(){this.DOMElement.parentNode.removeChild(this.DOMElement);var e=this.parent.matrixes.indexOf(this);this.parent.matrixes.splice(e,1),this.parent.applyTransforms()}},{key:"createBasicDOMElement",value:function(){this.DOMElement=document.createElement("div"),this.DOMElement.className="matrix-input",this.DOMElement.addEventListener("contextmenu",this.drag,!0);var e=document.getElementById("matrixes-elements-holder");0==this.parent.matrixes.length?e.appendChild(this.DOMElement):e.insertBefore(this.DOMElement,this.parent.matrixes[0].DOMElement);var t=document.createElement("h5");this.DOMElement.appendChild(t);var i=document.createElement("div");i.className="values-input-container",this.DOMElement.appendChild(i);var n=document.createElement("div");return n.className="erase-matrix",n.addEventListener("click",this.erase.bind(this)),this.DOMElement.appendChild(n),{valuesContainer:i,title:t}}},{key:"updateMatrix",value:function(){}}]),e}());t.default=u},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i){n(this,e),this.parent=t,this.x=parseFloat(i.x),this.y=parseFloat(i.y),this.modifiedX=parseFloat(i.x),this.modifiedY=parseFloat(i.y),this.DOMElement=void 0,this.index=i.index,this.displayName=i.displayName,this.elementsToUpdate=[],-1==i.index||isNaN(i.index)||(this.DOMElement=this.createDOMElement()),this.update=this.update.bind(this)}return a(e,[{key:"createDOMElement",value:function(){var e=document.createElement("div");e.className="vertex",document.getElementById("vertices-container").appendChild(e);var t=document.createElement("div");t.className="index",t.innerHTML=""+this.index,this.elementsToUpdate.push({element:t,key:"index",preValueText:""}),e.appendChild(t);var i=document.createElement("div");i.className="value original",i.innerHTML="X: "+this.x,this.elementsToUpdate.push({element:i,key:"x",preValueText:"X: "}),e.appendChild(i);var n=document.createElement("div");n.className="value",n.innerHTML="X: "+this.modifiedX,this.elementsToUpdate.push({element:n,key:"modifiedX",preValueText:"X: "}),e.appendChild(n);var a=document.createElement("div");a.className="value original",a.innerHTML="Y: "+this.y,this.elementsToUpdate.push({element:a,key:"y",preValueText:"Y: "}),e.appendChild(a);var s=document.createElement("div");s.className="value",s.innerHTML="Y: "+this.modifiedY,this.elementsToUpdate.push({element:s,key:"modifiedY",preValueText:"Y: "}),e.appendChild(s);var r=document.createElement("div");return r.className="erase-points",r.addEventListener("click",this.erase.bind(this)),e.appendChild(r),e}},{key:"update",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,a=this.elementsToUpdate[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=n.value;"index"==s.key?s.element.innerHTML=s.preValueText+this[s.key]:s.element.innerHTML=s.preValueText+this[s.key].toFixed(2)}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}var r=this.parent.inputController.pivotsList.selectedOptions[0];r&&this.DOMElement&&(r.vertex===this?this.DOMElement.setAttribute("data-pivot",""):this.DOMElement.removeAttribute("data-pivot"))}},{key:"erase",value:function(){var e=this.parent.vertices.indexOf(this);this.DOMElement.parentNode.removeChild(this.DOMElement),this.parent.vertices.splice(e,1);var t=!0,i=!1,n=void 0;try{for(var a,s=this.parent.vertices[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var r=a.value;r.index=this.parent.vertices.indexOf(r)+1,r.update()}}catch(e){i=!0,n=e}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}this.parent.inputController.pivotsList.remove(e),this.parent.inputController.updatePivotsIndexes(),this.parent.canvas.draw()}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();i(5);var r=i(6),o=n(r),u=i(3),l=(n(u),i(7)),h=n(l),c=i(8),d=n(c),v=i(0),p=n(v),f=function(){function e(){a(this,e),this.canvas=void 0,this.inputController=void 0,this.vertices=[],this.matrixes=[],this.pivotVertex=void 0,this.massCenter=void 0,this.absoluteCenter=void 0}return s(e,[{key:"fakeStart",value:function(){function e(e,i){t.inputController.input.x.value=e,t.inputController.input.y.value=i,t.inputController.addVertex({type:"fake",keycode:-1}),t.inputController.input.x.value="",t.inputController.input.y.value=""}var t=this;e(1,1),e(3,1),e(3,3),e(3.5,3),e(2,5),e(.5,3),e(1,3)}},{key:"applyTransforms",value:function(){var e=void 0,t=[[1,0,0],[0,1,0],[0,0,1]];for(e=this.matrixes.length-1;e>=0;e--)t=p.default.multiplyMatrixes(this.matrixes[e].matrixStructure,t);this.matrixesController.transformationMatrix=t,p.default.vertexApplyTransformations(this.vertices,this.matrixesController.transformationMatrix),this.canvas.draw()}},{key:"start",value:function(){this.canvas=new o.default(this,document.getElementById("canvas")),this.inputController=new h.default(this),this.matrixesController=new d.default(this),this.fakeStart(),this.canvas.draw()}}]),e}(),m=new f;m.start(),console.log(m)},function(e,t){},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i){n(this,e),this.parent=t,this.canvasDOM=i,this.canvas=this.canvasDOM.getContext("2d"),this.size=[0,0],this.center=[0,0],this.dragDelta=[0,0],this.scale=20,this.margins=[180,130],this.draw=this.draw.bind(this),this.init()}return a(e,[{key:"cartesianPlane",value:function(){var e=void 0,t=void 0,i=Math.floor(this.scale);for(this.canvas.lineWidth=1,this.canvas.font="10px Raleway",this.canvas.textBaseline="middle",this.canvas.strokeStyle="#d17878",this.canvas.fillStyle="#d17878",this.canvas.beginPath(),this.canvas.moveTo(0,this.center[1]),this.canvas.lineTo(this.size[0],this.center[1]),this.canvas.closePath(),this.canvas.stroke(),t=-1,e=this.center[0]-i;e>0;e-=i)this.canvas.beginPath(),this.canvas.moveTo(e,this.center[1]-3),this.canvas.lineTo(e,this.center[1]+3),this.canvas.closePath(),this.canvas.stroke(),this.canvas.textAlign="center",this.parent.inputController.options.showNumbers.checked&&(this.canvas.fillText(t,e,this.center[1]+this.getModTextPosition(-10,8,t),100),t--);for(t=1,e=this.center[0]+i;e<this.size[0];e+=i)this.canvas.beginPath(),this.canvas.moveTo(e,this.center[1]-3),this.canvas.lineTo(e,this.center[1]+3),this.canvas.closePath(),this.canvas.stroke(),this.canvas.textAlign="center",this.parent.inputController.options.showNumbers.checked&&(this.canvas.fillText(t,e,this.center[1]+this.getModTextPosition(-10,8,t),100),t++);for(this.canvas.strokeStyle="#81bf68",this.canvas.fillStyle="#81bf68",this.canvas.beginPath(),this.canvas.moveTo(this.center[0],0),this.canvas.lineTo(this.center[0],this.size[1]),this.canvas.closePath(),this.canvas.stroke(),t=1,e=this.center[1]-i;e>0;e-=i)this.canvas.beginPath(),this.canvas.moveTo(this.center[0]-2,e),this.canvas.lineTo(this.center[0]+3,e),this.canvas.closePath(),this.canvas.stroke(),this.parent.inputController.options.showNumbers.checked&&(this.canvas.textAlign=this.getModTextPosition(-12,6,t)<0?"right":"left",this.canvas.fillText(t,this.center[0]+this.getModTextPosition(-6,6,t),e,100),t++);for(t=-1,e=this.center[1]+i;e<this.size[1];e+=i)this.canvas.beginPath(),this.canvas.moveTo(this.center[0]-2,e),this.canvas.lineTo(this.center[0]+3,e),this.canvas.closePath(),this.canvas.stroke(),this.parent.inputController.options.showNumbers.checked&&(this.canvas.textAlign=this.getModTextPosition(-12,6,t)<0?"right":"left",this.canvas.fillText(t,this.center[0]+this.getModTextPosition(-6,6,t),e,100),t--)}},{key:"draw",value:function(){this.canvas.clearRect(0,0,this.size[0],this.size[1]),this.parent.inputController.options.showGrid.checked&&this.grid(),this.cartesianPlane(),this.pivot();var e=void 0;if(this.parent.vertices.length>1){for(this.canvas.beginPath(),this.canvas.lineJoin="bevel",this.canvas.strokeStyle="#c2bac7",this.canvas.lineWidth=1,this.canvas.moveTo(this.center[0]+Math.round(this.parent.vertices[0].x*this.scale),this.center[1]+Math.round(this.parent.vertices[0].y*-this.scale)),e=1;e<this.parent.vertices.length;e++)this.canvas.lineTo(this.center[0]+Math.round(this.parent.vertices[e].x*this.scale),this.center[1]+Math.round(this.parent.vertices[e].y*-this.scale));for(this.parent.inputController.options.closePath.checked&&this.canvas.closePath(),this.canvas.stroke(),e=0;e<this.parent.vertices.length;e++)this.canvas.beginPath(),this.canvas.arc(this.center[0]+Math.round(this.parent.vertices[e].x*this.scale),this.center[1]+Math.round(this.parent.vertices[e].y*-this.scale),2,0,2*Math.PI),this.canvas.fillStyle="#fff",this.canvas.lineWidth=1,this.canvas.fill(),this.canvas.stroke(),this.canvas.closePath()}if(this.parent.vertices.length>1){for(this.canvas.beginPath(),this.canvas.lineJoin="bevel",this.canvas.strokeStyle="#573f84",this.canvas.lineWidth=2,this.canvas.moveTo(this.center[0]+Math.round(this.parent.vertices[0].modifiedX*this.scale),this.center[1]+Math.round(this.parent.vertices[0].modifiedY*-this.scale)),e=1;e<this.parent.vertices.length;e++)this.canvas.lineTo(this.center[0]+Math.round(this.parent.vertices[e].modifiedX*this.scale),this.center[1]+Math.round(this.parent.vertices[e].modifiedY*-this.scale));for(this.parent.inputController.options.closePath.checked&&this.canvas.closePath(),this.canvas.stroke(),e=0;e<this.parent.vertices.length;e++)this.canvas.beginPath(),this.canvas.arc(this.center[0]+Math.round(this.parent.vertices[e].modifiedX*this.scale),this.center[1]+Math.round(this.parent.vertices[e].modifiedY*-this.scale),2,0,2*Math.PI),this.canvas.fillStyle="#fff",this.canvas.lineWidth=1,this.canvas.fill(),this.canvas.stroke(),this.canvas.closePath()}}},{key:"drag",value:function(e){function t(e){n.dragDelta=[a[0]-e.pageX,a[1]-e.pageY],a=[e.pageX,e.pageY],n.defCenter(),n.draw()}function i(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i)}var n=this,a=[e.pageX,e.pageY];window.addEventListener("mousemove",t),window.addEventListener("mouseup",i)}},{key:"defSize",value:function(){var e=window.innerWidth-this.margins[0],t=window.innerHeight-this.margins[1];this.canvasDOM.setAttribute("width",e),this.canvasDOM.setAttribute("height",t),this.size=[e,t]}},{key:"defCenter",value:function(){var e=[this.center[0],this.center[1]];this.center=[Math.floor(e[0]-this.dragDelta[0])+.5,Math.floor(e[1]-this.dragDelta[1])+.5]}},{key:"setScale",value:function(e){var t=Math.max(-1,Math.min(1,e.wheelDelta));this.scale=Math.max(8,Math.min(100,this.scale+5*t)),this.draw()}},{key:"grid",value:function(){this.canvas.strokeStyle="#f0f0f0",this.canvas.lineWidth=1;var e=void 0,t=Math.floor(this.scale);for(e=this.center[0]-t;e>0;e-=t)this.canvas.beginPath(),this.canvas.moveTo(e,0),this.canvas.lineTo(e,this.size[1]),this.canvas.closePath(),this.canvas.stroke();for(e=this.center[0]+t;e<this.size[0];e+=t)this.canvas.beginPath(),this.canvas.moveTo(e,0),this.canvas.lineTo(e,this.size[1]),this.canvas.closePath(),this.canvas.stroke();for(e=this.center[1]-t;e>0;e-=t)this.canvas.beginPath(),this.canvas.moveTo(0,e),this.canvas.lineTo(this.size[0],e),this.canvas.closePath(),this.canvas.stroke();for(e=this.center[1]+t;e<this.size[1];e+=t)this.canvas.beginPath(),this.canvas.moveTo(0,e),this.canvas.lineTo(this.size[0],e),this.canvas.closePath(),this.canvas.stroke()}},{key:"getModTextPosition",value:function(e,t,i){return this.scale<20&&i%2==0?e:t}},{key:"pivot",value:function(){var e=[this.center[0]+Math.round(this.parent.pivotVertex.x*this.scale),this.center[1]-Math.round(this.parent.pivotVertex.y*this.scale)];this.canvas.beginPath(),this.canvas.arc(e[0],e[1],4,0,2*Math.PI),this.canvas.moveTo(e[0]-6,e[1]),this.canvas.lineTo(e[0]+6,e[1]),this.canvas.moveTo(e[0],e[1]-6),this.canvas.lineTo(e[0],e[1]+6),this.canvas.strokeStyle="#573f84",this.canvas.lineWidth=1,this.canvas.stroke(),this.canvas.closePath()}},{key:"resetCenter",value:function(){this.center=[Math.floor(this.size[0]/2-this.dragDelta[0])+.5,Math.floor(this.size[1]/2-this.dragDelta[1])+.5]}},{key:"resize",value:function(){var e=this.size[0],t=this.size[1],i=[this.center[0],this.center[1]];this.defSize();var n=this.size[0]/e,a=this.size[1]/t;this.dragDelta=[i[0]-i[0]*n,i[1]-i[1]*a],this.defCenter(),this.draw()}},{key:"init",value:function(){this.defSize(),this.resetCenter(),window.addEventListener("resize",this.resize.bind(this)),this.canvasDOM.addEventListener("mousedown",this.drag.bind(this)),window.addEventListener("mousewheel",this.setScale.bind(this),!1),window.addEventListener("DOMMouseScroll",this.setScale.bind(this),!1)}}]),e}();t.default=s},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(3),o=n(r),u=i(0),l=(n(u),i(1)),h=n(l),c=function(){function e(t){a(this,e),this.parent=t,this.input={x:document.getElementById("input-x"),y:document.getElementById("input-y"),button:document.getElementById("input-button")},this.pivotsList=document.getElementById("pivot-select"),this.options={closePath:document.getElementById("open-close-path"),showGrid:document.getElementById("show-grid"),showNumbers:document.getElementById("show-numbers")},this.originCoords={x:document.getElementById("origin-x"),y:document.getElementById("origin-y")},this.addVertex=this.addVertex.bind(this),this.switchPivot=this.switchPivot.bind(this),this.addListeners(),this.init()}return s(e,[{key:"addPivot",value:function(e){var t=document.createElement("option");t.value=e.index,t.innerHTML=e.displayName,t.vertex=e,this.pivotsList.appendChild(t)}},{key:"updatePivotsIndexes",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,a=this.pivotsList.options[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var s=n.value;s.innerHTML=s.vertex.index}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}}},{key:"setPivot",value:function(e){this.parent.pivotVertex=e,this.originCoords.x.value=this.parent.pivotVertex.x.toFixed(2),this.originCoords.y.value=this.parent.pivotVertex.y.toFixed(2)}},{key:"defPivotPosition",value:function(){if(""!=this.pivotsList.value&&("absolute"==this.pivotsList.value||"mass"==this.pivotsList.value)){var e=void 0;if("absolute"==this.pivotsList.value){this.parent.absoluteCenter.x=0,this.parent.absoluteCenter.y=0;var t=this.parent.vertices[0].x,i=this.parent.vertices[0].x,n=this.parent.vertices[0].y,a=this.parent.vertices[0].y;for(e=0;e<this.parent.vertices.length;e++)this.parent.vertices[e].x<t?t=this.parent.vertices[e].x:this.parent.vertices[e].x>i&&(i=this.parent.vertices[e].x),this.parent.vertices[e].y<n?n=this.parent.vertices[e].y:this.parent.vertices[e].y>a&&(a=this.parent.vertices[e].y);this.parent.absoluteCenter.x=(i+t)/2,this.parent.absoluteCenter.y=(a+n)/2,this.setPivot(this.parent.absoluteCenter)}else if("mass"==this.pivotsList.value){for(this.parent.massCenter.x=0,this.parent.massCenter.y=0,e=0;e<this.parent.vertices.length;e++)this.parent.massCenter.x+=this.parent.vertices[e].x/this.parent.vertices.length,this.parent.massCenter.y+=this.parent.vertices[e].y/this.parent.vertices.length;this.setPivot(this.parent.massCenter)}}}},{key:"addVertex",value:function(e){if(this.input.x.value=h.default.validNumber(this.input.x.value),this.input.y.value=h.default.validNumber(this.input.y.value),!("keyup"==e.type&&13!=e.keyCode||""==this.input.x.value||""==this.input.y.value||isNaN(this.input.x.value)||isNaN(this.input.y.value))){"keyup"==e.type&&this.input.x.focus();var t=new o.default(this.parent,{index:this.parent.vertices.length+1,displayName:this.parent.vertices.length+1,x:this.input.x.value,y:this.input.y.value});this.parent.vertices.push(t),this.addPivot(t),this.input.x.value="",this.input.y.value="",t.update(),this.defPivotPosition(),this.parent.canvas.draw()}}},{key:"switchPivot",value:function(e){this.parent.pivotVertex=Object.create(e.target.selectedOptions[0].vertex),this.defPivotPosition(),this.parent.canvas.draw()}},{key:"addListeners",value:function(){this.input.button.addEventListener("click",this.addVertex),this.input.x.addEventListener("keyup",this.addVertex),this.input.y.addEventListener("keyup",this.addVertex),this.options.closePath.addEventListener("click",this.parent.canvas.draw),this.options.showGrid.addEventListener("click",this.parent.canvas.draw),this.options.showNumbers.addEventListener("click",this.parent.canvas.draw),this.pivotsList.addEventListener("change",this.switchPivot)}},{key:"init",value:function(){this.parent.massCenter=new o.default(this.parent,{index:"mass",displayName:"",x:0,y:0}),this.parent.massCenter.displayName="Mass center",this.addPivot(this.parent.massCenter),this.setPivot(this.parent.massCenter),this.parent.absoluteCenter=new o.default(this.parent,{index:"absolute",displayName:"",x:0,y:0}),this.parent.absoluteCenter.displayName="Absolute center",this.addPivot(this.parent.absoluteCenter)}}]),e}();t.default=c},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=i(9),o=n(r),u=i(10),l=n(u),h=i(11),c=n(h),d=i(12),v=n(d),p=i(13),f=n(p),m=i(0),y=(n(m),i(1)),x=(n(y),function(){function e(t){a(this,e),this.parent=t,this.buttons={translate:document.getElementById("do-translate"),rotate:document.getElementById("do-rotate"),scale:document.getElementById("do-scale"),reflect:document.getElementById("do-reflect"),shear:document.getElementById("do-shear")},this.transformationMatrix=[[1,0,0],[0,1,0],[0,0,1]],this.addMatrix=this.addMatrix.bind(this),this.addListeners()}return s(e,[{key:"addMatrix",value:function(e){switch(e.target.getAttribute("id")){case"do-translate":this.parent.matrixes.unshift(new o.default(this.parent));break;case"do-rotate":this.parent.matrixes.unshift(new l.default(this.parent));break;case"do-scale":this.parent.matrixes.unshift(new c.default(this.parent));break;case"do-reflect":this.parent.matrixes.unshift(new f.default(this.parent));break;case"do-shear":this.parent.matrixes.unshift(new v.default(this.parent))}}},{key:"addListeners",value:function(){this.buttons.translate.addEventListener("click",this.addMatrix),this.buttons.rotate.addEventListener("click",this.addMatrix),this.buttons.scale.addEventListener("click",this.addMatrix),this.buttons.reflect.addEventListener("click",this.addMatrix),this.buttons.shear.addEventListener("click",this.addMatrix)}}]),e}());t.default=x},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(2),l=n(u),h=i(1),c=n(h),d=i(0),v=(n(d),function(e){function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.x=void 0,i.y=void 0,i.updateMatrix=i.updateMatrix.bind(i),i.createDOMElement(),i}return r(t,e),o(t,[{key:"createDOMElement",value:function(){var e=this.createBasicDOMElement();e.title.innerHTML="Translate";var t=document.createElement("div");e.valuesContainer.appendChild(t);var i=document.createTextNode("X ");t.appendChild(i),this.x=document.createElement("input"),this.x.setAttribute("type","text"),this.x.value=0,t.appendChild(this.x),this.x.addEventListener("keyup",this.updateMatrix);var n=document.createElement("div");e.valuesContainer.appendChild(n);var a=document.createTextNode("Y ");n.appendChild(a),this.y=document.createElement("input"),this.y.setAttribute("type","text"),this.y.value=0,n.appendChild(this.y),this.y.addEventListener("keyup",this.updateMatrix)}},{key:"updateMatrix",value:function(){this.x.value=c.default.validNumber(this.x.value),this.y.value=c.default.validNumber(this.y.value),this.matrixStructure[0][2]=parseFloat(this.x.value||0),this.matrixStructure[1][2]=parseFloat(this.y.value||0),this.parent.applyTransforms()}}]),t}(l.default));t.default=v},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(2),l=n(u),h=i(1),c=n(h),d=i(0),v=(n(d),function(e){function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.degrees=void 0,i.updateMatrix=i.updateMatrix.bind(i),i.createDOMElement(),i}return r(t,e),o(t,[{key:"createDOMElement",value:function(){var e=this.createBasicDOMElement();e.title.innerHTML="Rotate";var t=document.createElement("div");e.valuesContainer.appendChild(t);var i=document.createTextNode("deg ");t.appendChild(i),this.degrees=document.createElement("input"),this.degrees.setAttribute("type","text"),this.degrees.value=0,t.appendChild(this.degrees),this.degrees.addEventListener("keyup",this.updateMatrix)}},{key:"updateMatrix",value:function(){this.degrees.value=c.default.validNumber(this.degrees.value);var e=parseFloat(this.degrees.value)||0;this.matrixStructure[0][0]=Math.cos(c.default.degToRad(e)),this.matrixStructure[0][1]=-Math.sin(c.default.degToRad(e)),this.matrixStructure[1][0]=Math.sin(c.default.degToRad(e)),this.matrixStructure[1][1]=Math.cos(c.default.degToRad(e)),this.parent.applyTransforms()}}]),t}(l.default));t.default=v},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(2),l=n(u),h=i(1),c=n(h),d=i(0),v=(n(d),function(e){function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.x=void 0,i.y=void 0,i.updateMatrix=i.updateMatrix.bind(i),i.createDOMElement(),i}return r(t,e),o(t,[{key:"createDOMElement",value:function(){var e=this.createBasicDOMElement();e.title.innerHTML="Scale";var t=document.createElement("div");e.valuesContainer.appendChild(t);var i=document.createTextNode("X ");t.appendChild(i),this.x=document.createElement("input"),this.x.setAttribute("type","text"),this.x.value=1,t.appendChild(this.x),this.x.addEventListener("keyup",this.updateMatrix);var n=document.createElement("div");e.valuesContainer.appendChild(n);var a=document.createTextNode("Y ");n.appendChild(a),this.y=document.createElement("input"),this.y.setAttribute("type","text"),this.y.value=1,n.appendChild(this.y),this.y.addEventListener("keyup",this.updateMatrix)}},{key:"updateMatrix",value:function(){this.x.value=c.default.validNumber(this.x.value),this.y.value=c.default.validNumber(this.y.value),this.matrixStructure[0][0]=parseFloat(this.x.value||0),this.matrixStructure[1][1]=parseFloat(this.y.value||0),this.parent.applyTransforms()}}]),t}(l.default));t.default=v},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(2),l=n(u),h=i(1),c=n(h),d=i(0),v=(n(d),function(e){function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.x=void 0,i.y=void 0,i.updateMatrix=i.updateMatrix.bind(i),i.createDOMElement(),i}return r(t,e),o(t,[{key:"createDOMElement",value:function(){var e=this.createBasicDOMElement();e.title.innerHTML="Shear";var t=document.createElement("div");e.valuesContainer.appendChild(t);var i=document.createTextNode("X ");t.appendChild(i),this.x=document.createElement("input"),this.x.setAttribute("type","text"),this.x.value=0,t.appendChild(this.x),this.x.addEventListener("keyup",this.updateMatrix);var n=document.createElement("div");e.valuesContainer.appendChild(n);var a=document.createTextNode("Y ");n.appendChild(a),this.y=document.createElement("input"),this.y.setAttribute("type","text"),this.y.value=0,n.appendChild(this.y),this.y.addEventListener("keyup",this.updateMatrix)}},{key:"updateMatrix",value:function(){this.x.value=c.default.validNumber(this.x.value),this.y.value=c.default.validNumber(this.y.value),this.matrixStructure[0][1]=parseFloat(this.x.value||0),this.matrixStructure[1][0]=parseFloat(this.y.value||0),this.parent.applyTransforms()}}]),t}(l.default));t.default=v},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(2),l=n(u),h=i(1),c=n(h),d=i(0),v=(n(d),function(e){function t(e){a(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.degrees=void 0,i.updateMatrix=i.updateMatrix.bind(i),i.createDOMElement(),i}return r(t,e),o(t,[{key:"createDOMElement",value:function(){var e=this.createBasicDOMElement();e.title.innerHTML="Reflect";var t=document.createElement("div");e.valuesContainer.appendChild(t);var i=document.createTextNode("deg ");t.appendChild(i),this.degrees=document.createElement("input"),this.degrees.setAttribute("type","text"),this.degrees.value=0,t.appendChild(this.degrees),this.degrees.addEventListener("keyup",this.updateMatrix)}},{key:"updateMatrix",value:function(){this.degrees.value=c.default.validNumber(this.degrees.value);var e=parseFloat(this.degrees.value)||0;this.matrixStructure[0][0]=Math.cos(2*c.default.degToRad(e)),this.matrixStructure[0][1]=Math.sin(2*c.default.degToRad(e)),this.matrixStructure[1][0]=Math.sin(2*c.default.degToRad(e)),this.matrixStructure[1][1]=-Math.cos(2*c.default.degToRad(e)),this.parent.applyTransforms()}}]),t}(l.default));t.default=v}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZ3JhcGhhdHJpeC5idW5kbGUuanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGFjNjIyMjY3MzNmNjU4MGM3NTZhIiwid2VicGFjazovLy8uL3NyYy9qcy9tYXRyaXhlcy9tYXRyaXgtb3BlcmF0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWF0cml4ZXMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21hdHJpeGVzL2Jhc2ljLW1hdHJpeC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvdmVydGV4LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL2NhbnZhcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvaW5wdXQtY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWF0cml4ZXMtY29udHJvbGxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWF0cml4ZXMvdHJhbnNsYXRlLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9tYXRyaXhlcy9yb3RhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21hdHJpeGVzL3NjYWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9tYXRyaXhlcy9zaGVhci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvanMvbWF0cml4ZXMvcmVmbGVjdC5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm4iLCJfX2VzTW9kdWxlIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsInZhbHVlIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwibGVuZ3RoIiwiZGVzY3JpcHRvciIsIndyaXRhYmxlIiwia2V5IiwicHJvdG9Qcm9wcyIsInN0YXRpY1Byb3BzIiwiTWF0cml4T3BlcmF0aW9ucyIsInRoaXMiLCJfbTEiLCJfbTIiLCJyZXN1bHRNYXRyaXgiLCJqIiwiayIsImNvbHVtbnMiLCJNYXRoIiwibWluIiwiX2xpc3QiLCJfdHJhbnNmb3JtYXRpb25NYXRyaXgiLCJ2ZXJ0ZXhNYXRyaXgiLCJ4IiwieSIsInJlc3VsdCIsIm11bHRpcGx5TWF0cml4ZXMiLCJtb2RpZmllZFgiLCJtb2RpZmllZFkiLCJ1cGRhdGUiLCJkZWZhdWx0IiwiVXRpbHMiLCJfdmFsdWUiLCJ2YWxpZENoYXJzIiwic3BsaXQiLCJlbnRlcmVkQ2hhcnMiLCJkb3RzIiwibWFwIiwiX2NoYXIiLCJpbmRleE9mIiwiam9pbiIsIl92YWwiLCJQSSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfdXRpbHMiLCJfbWF0cml4T3BlcmF0aW9ucyIsIkJhc2ljTWF0cml4IiwiX3BhcmVudCIsInBhcmVudCIsIkRPTUVsZW1lbnQiLCJ1bmRlZmluZWQiLCJlbGVtZW50c1RvVXBkYXRlIiwibWF0cml4U3RydWN0dXJlIiwiZXJhc2UiLCJiaW5kIiwiZHJhZyIsImV2dCIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY29uc29sZSIsImxvZyIsImJ1dHRvbiIsImN1cnJlbnRUYXJnZXQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpZHgiLCJtYXRyaXhlcyIsInNwbGljZSIsImFwcGx5VHJhbnNmb3JtcyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJob2xkZXIiLCJnZXRFbGVtZW50QnlJZCIsImFwcGVuZENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwidGl0bGUiLCJ2YWx1ZXNDb250YWluZXIiLCJWZXJ0ZXgiLCJfcGFyYW1zIiwicGFyc2VGbG9hdCIsImluZGV4IiwiZGlzcGxheU5hbWUiLCJpc05hTiIsImNyZWF0ZURPTUVsZW1lbnQiLCJjb250YWluZXIiLCJpbm5lckhUTUwiLCJwdXNoIiwiZWxlbWVudCIsInByZVZhbHVlVGV4dCIsInBvaW50WCIsIk1vZGlmaWVkUG9pbnRYIiwicG9pbnRZIiwibW9kaWZpZWRQb2ludFkiLCJfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uIiwiX2RpZEl0ZXJhdG9yRXJyb3IiLCJfaXRlcmF0b3JFcnJvciIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiU3ltYm9sIiwiaXRlcmF0b3IiLCJuZXh0IiwiZG9uZSIsIml0ZW0iLCJ0b0ZpeGVkIiwiZXJyIiwicmV0dXJuIiwiY3VycmVudFBpdm90IiwiaW5wdXRDb250cm9sbGVyIiwicGl2b3RzTGlzdCIsInNlbGVjdGVkT3B0aW9ucyIsInZlcnRleCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInZlcnRpY2VzIiwiX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIiLCJfZGlkSXRlcmF0b3JFcnJvcjIiLCJfaXRlcmF0b3JFcnJvcjIiLCJfc3RlcDIiLCJfaXRlcmF0b3IyIiwiZWwiLCJyZW1vdmUiLCJ1cGRhdGVQaXZvdHNJbmRleGVzIiwiY2FudmFzIiwiZHJhdyIsIl9jYW52YXMiLCJfY2FudmFzMiIsIl92ZXJ0ZXgiLCJfaW5wdXRDb250cm9sbGVyIiwiX2lucHV0Q29udHJvbGxlcjIiLCJfbWF0cml4ZXNDb250cm9sbGVyIiwiX21hdHJpeGVzQ29udHJvbGxlcjIiLCJfbWF0cml4T3BlcmF0aW9uczIiLCJHcmFwaGF0cml4IiwicGl2b3RWZXJ0ZXgiLCJtYXNzQ2VudGVyIiwiYWJzb2x1dGVDZW50ZXIiLCJhZGRGYWtlIiwiX3giLCJfeSIsIl90aGlzIiwiaW5wdXQiLCJhZGRWZXJ0ZXgiLCJ0eXBlIiwia2V5Y29kZSIsIm1hdHJpeGVzQ29udHJvbGxlciIsInRyYW5zZm9ybWF0aW9uTWF0cml4IiwidmVydGV4QXBwbHlUcmFuc2Zvcm1hdGlvbnMiLCJmYWtlU3RhcnQiLCJncmFwaGF0cml4Iiwic3RhcnQiLCJDYW52YXMiLCJfY2FudmFzRWxlbWVudCIsImNhbnZhc0RPTSIsImdldENvbnRleHQiLCJzaXplIiwiY2VudGVyIiwiZHJhZ0RlbHRhIiwic2NhbGUiLCJtYXJnaW5zIiwiaW5pdCIsImNvdW50Iiwic2NsIiwiZmxvb3IiLCJsaW5lV2lkdGgiLCJmb250IiwidGV4dEJhc2VsaW5lIiwic3Ryb2tlU3R5bGUiLCJmaWxsU3R5bGUiLCJiZWdpblBhdGgiLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJzdHJva2UiLCJ0ZXh0QWxpZ24iLCJvcHRpb25zIiwic2hvd051bWJlcnMiLCJjaGVja2VkIiwiZmlsbFRleHQiLCJnZXRNb2RUZXh0UG9zaXRpb24iLCJjbGVhclJlY3QiLCJzaG93R3JpZCIsImdyaWQiLCJjYXJ0ZXNpYW5QbGFuZSIsInBpdm90IiwibGluZUpvaW4iLCJyb3VuZCIsImFyYyIsImZpbGwiLCJkcmFnTW92ZSIsImxhc3RQb2ludGVyUG9zaXRpb24iLCJwYWdlWCIsInBhZ2VZIiwiZGVmQ2VudGVyIiwic3RvcERyYWciLCJ3aW5kb3ciLCJyZW1vdmVFdmVudExpc3RlbmVyIiwid2lkdGgiLCJpbm5lcldpZHRoIiwiaGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJjdXJyZW50Q2VudGVyIiwiZGVsdGEiLCJtYXgiLCJ3aGVlbERlbHRhIiwiX21pbiIsIl9tYXgiLCJfaW5kZXgiLCJkcmF3aW5nQ2VudGVyIiwicHJldlNpemVYIiwicHJldlNpemVZIiwiZGVmU2l6ZSIsInJlc2l6ZVBlcmNlbnRhZ2VYIiwicmVzaXplUGVyY2VudGFnZVkiLCJyZXNldENlbnRlciIsInJlc2l6ZSIsInNldFNjYWxlIiwiX3ZlcnRleDIiLCJfdXRpbHMyIiwiSW5wdXRDb250cm9sbGVyIiwib3JpZ2luQ29vcmRzIiwic3dpdGNoUGl2b3QiLCJhZGRMaXN0ZW5lcnMiLCJfdnR4Iiwib3B0aW9uIiwibWluWCIsIm1heFgiLCJtaW5ZIiwibWF4WSIsInNldFBpdm90IiwidmFsaWROdW1iZXIiLCJrZXlDb2RlIiwiZm9jdXMiLCJ2dHgiLCJhZGRQaXZvdCIsImRlZlBpdm90UG9zaXRpb24iLCJjcmVhdGUiLCJfdHJhbnNsYXRlIiwiX3RyYW5zbGF0ZTIiLCJfcm90YXRlIiwiX3JvdGF0ZTIiLCJfc2NhbGUiLCJfc2NhbGUyIiwiX3NoZWFyIiwiX3NoZWFyMiIsIl9yZWZsZWN0IiwiX3JlZmxlY3QyIiwiTWF0cml4ZXNDb250cm9sbGVyIiwiYnV0dG9ucyIsInRyYW5zbGF0ZSIsInJvdGF0ZSIsInJlZmxlY3QiLCJzaGVhciIsImFkZE1hdHJpeCIsImdldEF0dHJpYnV0ZSIsInVuc2hpZnQiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsInNlbGYiLCJSZWZlcmVuY2VFcnJvciIsIl9pbmhlcml0cyIsInN1YkNsYXNzIiwic3VwZXJDbGFzcyIsImNvbnN0cnVjdG9yIiwic2V0UHJvdG90eXBlT2YiLCJfX3Byb3RvX18iLCJfYmFzaWNNYXRyaXgiLCJfYmFzaWNNYXRyaXgyIiwiVHJhbnNsYXRlTWF0cml4IiwiX0Jhc2ljTWF0cml4IiwiZ2V0UHJvdG90eXBlT2YiLCJ1cGRhdGVNYXRyaXgiLCJjcmVhdGVCYXNpY0RPTUVsZW1lbnQiLCJ4Q29udGFpbmVyIiwieFRleHQiLCJjcmVhdGVUZXh0Tm9kZSIsInlDb250YWluZXIiLCJ5VGV4dCIsIlJvdGF0ZU1hdHJpeCIsImRlZ3JlZXMiLCJkZWdDb250YWluZXIiLCJkZWdUZXh0IiwidmFsIiwiY29zIiwiZGVnVG9SYWQiLCJzaW4iLCJTY2FsZU1hdHJpeCIsIlNoZWFyTWF0cml4Il0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FB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WTVFLEtBQUtzUSx1QkFFckIxTCxHQUFVVCxNQUFNVSxVQUFZLFNBRzVCLElBQUlpTSxHQUFlbk4sU0FBU0MsY0FBYyxNQUMxQ2dCLEdBQVVSLGdCQUFnQkgsWUFBWTZNLEVBRXRDLElBQUlDLEdBQVVwTixTQUFTOE0sZUFBZSxPQUN0Q0ssR0FBYTdNLFlBQVk4TSxHQUV6Qi9RLEtBQUs2USxRQUFVbE4sU0FBU0MsY0FBYyxTQUN0QzVELEtBQUs2USxRQUFRdEssYUFBYSxPQUFRLFFBQ2xDdkcsS0FBSzZRLFFBQVF6UixNQUFRLEVBQ3JCMFIsRUFBYTdNLFlBQVlqRSxLQUFLNlEsU0FDOUI3USxLQUFLNlEsUUFBUS9NLGlCQUFpQixRQUFTOUQsS0FBS3FRLGlCZHEzRHBDelEsSUFBSyxlQUNMUixNQUFPLFdjaDNEZlksS0FBSzZRLFFBQVF6UixNQUFRNk4sRUFBQTlMLFFBQU0wTSxZQUFZN04sS0FBSzZRLFFBQVF6UixNQUdwRCxJQUFJNFIsR0FBTXpNLFdBQVd2RSxLQUFLNlEsUUFBUXpSLFFBQVUsQ0FDNUNZLE1BQUswQyxnQkFBZ0IsR0FBRyxHQUFLbkMsS0FBSzBRLElBQTBCLEVBQXRCaEUsRUFBQTlMLFFBQU0rUCxTQUFTRixJQUNyRGhSLEtBQUswQyxnQkFBZ0IsR0FBRyxHQUFLbkMsS0FBSzRRLElBQTBCLEVBQXRCbEUsRUFBQTlMLFFBQU0rUCxTQUFTRixJQUNyRGhSLEtBQUswQyxnQkFBZ0IsR0FBRyxHQUFLbkMsS0FBSzRRLElBQTBCLEVBQXRCbEUsRUFBQTlMLFFBQU0rUCxTQUFTRixJQUNyRGhSLEtBQUswQyxnQkFBZ0IsR0FBRyxJQUFNbkMsS0FBSzBRLElBQTBCLEVBQXRCaEUsRUFBQTlMLFFBQU0rUCxTQUFTRixJQUV0RGhSLEtBQUtzQyxPQUFPb0Isc0JkdTNETGtOLEdBQ2JYLEVBQWM5TyxTQUVoQjNELEdBQVEyRCxRY3QzRE95UCIsImZpbGUiOiJncmFwaGF0cml4LmJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA0KTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgTWF0cml4T3BlcmF0aW9ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNYXRyaXhPcGVyYXRpb25zKCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWF0cml4T3BlcmF0aW9ucyk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKE1hdHJpeE9wZXJhdGlvbnMsIG51bGwsIFt7XG4gICAgICAgIGtleTogXCJtdWx0aXBseU1hdHJpeGVzXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBtdWx0aXBseU1hdHJpeGVzKF9tMSwgX20yKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0TWF0cml4ID0gW1tdLCBbXSwgW11dO1xuICAgICAgICAgICAgdmFyIHN0cmluZ1Byb29mID0gW1tdLCBbXSwgW11dO1xuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDAsXG4gICAgICAgICAgICAgICAgaiA9IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBrID0gdm9pZCAwO1xuICAgICAgICAgICAgdmFyIGNvbHVtbnMgPSBNYXRoLm1pbihfbTFbMF0ubGVuZ3RoLCBfbTJbMF0ubGVuZ3RoKTtcblxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgb25seSBvbmUgbWF0cml4LCB0aGVuIHJldHVybiB0aGUgb25seSBvbmUgYW5kIGFib3J0XG4gICAgICAgICAgICBpZiAoIV9tMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBfbTE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBfbTEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAvLyBsaW5lXG4gICAgICAgICAgICAgICAgZm9yIChqID0gMDsgaiA8IGNvbHVtbnM7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBjb2x1bW4gX20xXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdE1hdHJpeFtpXVtqXSA9IF9tMVtpXVswXSAqIF9tMlswXVtqXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChrID0gMTsgayA8IF9tMi5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29sdW1uIF9tMlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0TWF0cml4W2ldW2pdICs9IF9tMVtpXVtrXSAqIF9tMltrXVtqXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdE1hdHJpeDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInZlcnRleEFwcGx5VHJhbnNmb3JtYXRpb25zXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2ZXJ0ZXhBcHBseVRyYW5zZm9ybWF0aW9ucyhfbGlzdCwgX3RyYW5zZm9ybWF0aW9uTWF0cml4KSB7XG5cbiAgICAgICAgICAgIHZhciBpID0gdm9pZCAwO1xuXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgX2xpc3QubGVuZ3RoOyBpKyspIHtcblxuICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXhNYXRyaXggPSBbW19saXN0W2ldLnhdLCBbX2xpc3RbaV0ueV0sIFsxXV07XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5tdWx0aXBseU1hdHJpeGVzKF90cmFuc2Zvcm1hdGlvbk1hdHJpeCwgdmVydGV4TWF0cml4KTtcblxuICAgICAgICAgICAgICAgIF9saXN0W2ldLm1vZGlmaWVkWCA9IHJlc3VsdFswXVswXTtcbiAgICAgICAgICAgICAgICBfbGlzdFtpXS5tb2RpZmllZFkgPSByZXN1bHRbMV1bMF07XG5cbiAgICAgICAgICAgICAgICBfbGlzdFtpXS51cGRhdGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBNYXRyaXhPcGVyYXRpb25zO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBNYXRyaXhPcGVyYXRpb25zO1xuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgVXRpbHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVXRpbHMoKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBVdGlscyk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFV0aWxzLCBudWxsLCBbe1xuICAgICAgICBrZXk6IFwidmFsaWROdW1iZXJcIixcblxuXG4gICAgICAgIC8vIFJldHVybnMgb25seSB2YWxpZCBudW1iZXIgcmVsYXRlZCBjaGFyYWN0ZXJzXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZE51bWJlcihfdmFsdWUpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB2YXIgdmFsaWRDaGFycyA9IFwiMTIzNDU2Nzg5MC4sLVwiLnNwbGl0KFwiXCIpO1xuICAgICAgICAgICAgdmFyIGVudGVyZWRDaGFycyA9IF92YWx1ZS5zcGxpdChcIlwiKSB8fCBbXTtcbiAgICAgICAgICAgIHZhciBkb3RzID0gMDtcblxuICAgICAgICAgICAgLy8gVmVyaWZpZXMgaWYgdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSBkb3QgaW4gdGhlIGFycmF5XG5cbiAgICAgICAgICAgIHJldHVybiBlbnRlcmVkQ2hhcnMubWFwKGZ1bmN0aW9uIChfY2hhciwgaSkge1xuICAgICAgICAgICAgICAgIGlmICh2YWxpZENoYXJzLmluZGV4T2YoX2NoYXIpICE9IC0xKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY29udmVydHMgY29tbWEgaW50cm8gZG90XG4gICAgICAgICAgICAgICAgICAgIGlmIChfY2hhciA9PSBcIixcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYXIgPSBcIi5cIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIGl0J3MgYSBkb3QsIGluY3JlYXNlcyB0aGUgbnVtYmVyIG9mIGRvdHMgcHJlc2VudCwgdG8gYXNzdXJlIHRoYXQgdGhlcmUgd2lsbCBiZSBvbmx5IG9uZSBwcmVzZW50XG4gICAgICAgICAgICAgICAgICAgIGlmIChfY2hhciA9PSBcIi5cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZG90cysrO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIGZpcnN0IGRpZ2l0ZWQgY2hhcmFjdGVyIGlzIGEgZG90LCBhcHBlbmRzIGEgbnVtYmVyIDAgZmlyc3RcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9jaGFyID09IFwiLlwiICYmIGkgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2NoYXIgPSBcIjBcIiArIF9jaGFyO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhlIG51bWJlciBvZiBkb3RzIGlzIGdyZWF0ZXIgdGhhbiBvbmUsIHNraXBzIHRvIHRoZSBuZXh0IGNoYXJhY3RlclxuICAgICAgICAgICAgICAgICAgICBpZiAoX2NoYXIgPT0gXCIuXCIgJiYgZG90cyA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfY2hhcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS5qb2luKFwiXCIpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZGVnVG9SYWRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlZ1RvUmFkKF92YWwpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICByZXR1cm4gX3ZhbCAvIDE4MCAqIE1hdGguUEk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJyYWRUb0RlZ1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmFkVG9EZWcoX3ZhbCkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIHJldHVybiBfdmFsIC8gTWF0aC5QSSAqIDE4MDtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBVdGlscztcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gVXRpbHM7XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3V0aWxzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3V0aWxzKTtcblxudmFyIF9tYXRyaXhPcGVyYXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9tYXRyaXhPcGVyYXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21hdHJpeE9wZXJhdGlvbnMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgQmFzaWNNYXRyaXggPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQmFzaWNNYXRyaXgoX3BhcmVudCkge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQmFzaWNNYXRyaXgpO1xuXG4gICAgICAgIHRoaXMucGFyZW50ID0gX3BhcmVudDtcbiAgICAgICAgdGhpcy5ET01FbGVtZW50ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmVsZW1lbnRzVG9VcGRhdGUgPSBbXTtcblxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZSA9IFtbMSwgMCwgMF0sIFswLCAxLCAwXSwgWzAsIDAsIDFdXTtcblxuICAgICAgICAvL0JJTkRTXG4gICAgICAgIHRoaXMuZXJhc2UgPSB0aGlzLmVyYXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZHJhZyA9IHRoaXMuZHJhZy5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhCYXNpY01hdHJpeCwgW3tcbiAgICAgICAga2V5OiAnZHJhZycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmFnKGV2dCkge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhldnQpO1xuICAgICAgICAgICAgaWYgKGV2dC5idXR0b24gPT0gMikge1xuICAgICAgICAgICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdlcmFzZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBlcmFzZSgpIHtcblxuICAgICAgICAgICAgLy8gcmVtb3ZlIG1hdHJpeCBmcm9tIHRoZSBET01cbiAgICAgICAgICAgIHRoaXMuRE9NRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuRE9NRWxlbWVudCk7XG5cbiAgICAgICAgICAgIC8vIHJlbW92ZSB0aGUgbWF0cml4IGZyb20gdGhlIGFwcCdzIG1hdHJpeGVzIGxpc3RcbiAgICAgICAgICAgIHZhciBpZHggPSB0aGlzLnBhcmVudC5tYXRyaXhlcy5pbmRleE9mKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQubWF0cml4ZXMuc3BsaWNlKGlkeCwgMSk7XG5cbiAgICAgICAgICAgIC8vIEFwcGx5IHRyYW5zZm9ybXMgLSBVcGRhdGUgdHJhbnNmb3JtYXRpb24gbWF0cml4XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5hcHBseVRyYW5zZm9ybXMoKTtcblxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5wYXJlbnQuY2FudmFzLmRyYXcpO1xuICAgICAgICAgICAgLy8gdGhpcy5wYXJlbnQuY2FudmFzLmRyYXcoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnY3JlYXRlQmFzaWNET01FbGVtZW50JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZUJhc2ljRE9NRWxlbWVudCgpIHtcbiAgICAgICAgICAgIHRoaXMuRE9NRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB0aGlzLkRPTUVsZW1lbnQuY2xhc3NOYW1lID0gXCJtYXRyaXgtaW5wdXRcIjtcbiAgICAgICAgICAgIHRoaXMuRE9NRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY29udGV4dG1lbnVcIiwgdGhpcy5kcmFnLCB0cnVlKTtcblxuICAgICAgICAgICAgLy8gaW5zZXJ0IGluIHRoZSBET00uIElmIG5vIG1hdHJpeGVzIGFyZSBwcmVzZW50LCBqdXN0IGFwcGVuZC5cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGFyZSBtYXRyaXhlcyBwcmVzZW50LCB1c2UgaW5zZXJ0QmVmb3JlIG9mIDAgKHNob3VsZCBjb21lIGJlZm9yZSB0aGUgZmlyc3Qgb25lKVxuICAgICAgICAgICAgdmFyIGhvbGRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibWF0cml4ZXMtZWxlbWVudHMtaG9sZGVyXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50Lm1hdHJpeGVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgaG9sZGVyLmFwcGVuZENoaWxkKHRoaXMuRE9NRWxlbWVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGhvbGRlci5pbnNlcnRCZWZvcmUodGhpcy5ET01FbGVtZW50LCB0aGlzLnBhcmVudC5tYXRyaXhlc1swXS5ET01FbGVtZW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImg1XCIpO1xuICAgICAgICAgICAgdGhpcy5ET01FbGVtZW50LmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgICAgICAgICAgdmFyIHZhbHVlc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICB2YWx1ZXNDb250YWluZXIuY2xhc3NOYW1lID0gXCJ2YWx1ZXMtaW5wdXQtY29udGFpbmVyXCI7XG4gICAgICAgICAgICB0aGlzLkRPTUVsZW1lbnQuYXBwZW5kQ2hpbGQodmFsdWVzQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgdmFyIGVyYXNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIGVyYXNlLmNsYXNzTmFtZSA9IFwiZXJhc2UtbWF0cml4XCI7XG4gICAgICAgICAgICBlcmFzZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5lcmFzZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuRE9NRWxlbWVudC5hcHBlbmRDaGlsZChlcmFzZSk7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZXNDb250YWluZXJcIjogdmFsdWVzQ29udGFpbmVyLFxuICAgICAgICAgICAgICAgIFwidGl0bGVcIjogdGl0bGVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3VwZGF0ZU1hdHJpeCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVNYXRyaXgoKSB7fVxuICAgIH1dKTtcblxuICAgIHJldHVybiBCYXNpY01hdHJpeDtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gQmFzaWNNYXRyaXg7XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IFZlcnRleCBhbmQgYXV0b21hdGljYWxseSBpbnN0ZXJzIGl0IGludG8gdGhlIERPTVxyXG4gKiBAcGFyYW0ge09iamVjdH0gX3BhcmVudCAtIFRoZSBjYWxsZXIgb2JqZWN0XHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBfcGFyYW1zIC0gdGhlIHByb3BlcnRpZXMgb2YgdGhlIHZlcnRleFxyXG4gKiBAcGFyYW0ge251bWJlcn0gX3BhcmFtcy5pbmRleCAtIFRoZSBpbmRleCBvZiB0aGUgdmVydGV4IGluIHRoZSBnbG9iYWwgdmVydGljZXMgbGlzdFxyXG4gKiBAcGFyYW0ge251bWJlcn0gX3BhcmFtcy54IC0gVGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgdmVydGV4XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBfcGFyYW1zLnkgLSBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSB2ZXJ0ZXhcclxuICovXG5cbnZhciBWZXJ0ZXggPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gVmVydGV4KF9wYXJlbnQsIF9wYXJhbXMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZlcnRleCk7XG5cbiAgICAgICAgdGhpcy5wYXJlbnQgPSBfcGFyZW50O1xuXG4gICAgICAgIHRoaXMueCA9IHBhcnNlRmxvYXQoX3BhcmFtcy54KTtcbiAgICAgICAgdGhpcy55ID0gcGFyc2VGbG9hdChfcGFyYW1zLnkpO1xuICAgICAgICB0aGlzLm1vZGlmaWVkWCA9IHBhcnNlRmxvYXQoX3BhcmFtcy54KTtcbiAgICAgICAgdGhpcy5tb2RpZmllZFkgPSBwYXJzZUZsb2F0KF9wYXJhbXMueSk7XG4gICAgICAgIHRoaXMuRE9NRWxlbWVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5pbmRleCA9IF9wYXJhbXMuaW5kZXg7XG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSBfcGFyYW1zLmRpc3BsYXlOYW1lO1xuICAgICAgICB0aGlzLmVsZW1lbnRzVG9VcGRhdGUgPSBbXTtcblxuICAgICAgICBpZiAoX3BhcmFtcy5pbmRleCAhPSAtMSAmJiAhaXNOYU4oX3BhcmFtcy5pbmRleCkpIHtcbiAgICAgICAgICAgIHRoaXMuRE9NRWxlbWVudCA9IHRoaXMuY3JlYXRlRE9NRWxlbWVudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQklORFNcbiAgICAgICAgdGhpcy51cGRhdGUgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhWZXJ0ZXgsIFt7XG4gICAgICAgIGtleTogXCJjcmVhdGVET01FbGVtZW50XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVET01FbGVtZW50KCkge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJ2ZXJ0ZXhcIjtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmVydGljZXMtY29udGFpbmVyXCIpLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIHZhciBpbmRleCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBpbmRleC5jbGFzc05hbWUgPSBcImluZGV4XCI7XG4gICAgICAgICAgICBpbmRleC5pbm5lckhUTUwgPSBcIlwiICsgdGhpcy5pbmRleDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNUb1VwZGF0ZS5wdXNoKHsgZWxlbWVudDogaW5kZXgsIGtleTogXCJpbmRleFwiLCBwcmVWYWx1ZVRleHQ6IFwiXCIgfSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5kZXgpO1xuXG4gICAgICAgICAgICB2YXIgcG9pbnRYID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHBvaW50WC5jbGFzc05hbWUgPSBcInZhbHVlIG9yaWdpbmFsXCI7XG4gICAgICAgICAgICBwb2ludFguaW5uZXJIVE1MID0gXCJYOiBcIiArIHRoaXMueDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNUb1VwZGF0ZS5wdXNoKHsgZWxlbWVudDogcG9pbnRYLCBrZXk6IFwieFwiLCBwcmVWYWx1ZVRleHQ6IFwiWDogXCIgfSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9pbnRYKTtcblxuICAgICAgICAgICAgdmFyIE1vZGlmaWVkUG9pbnRYID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIE1vZGlmaWVkUG9pbnRYLmNsYXNzTmFtZSA9IFwidmFsdWVcIjtcbiAgICAgICAgICAgIE1vZGlmaWVkUG9pbnRYLmlubmVySFRNTCA9IFwiWDogXCIgKyB0aGlzLm1vZGlmaWVkWDtcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudHNUb1VwZGF0ZS5wdXNoKHsgZWxlbWVudDogTW9kaWZpZWRQb2ludFgsIGtleTogXCJtb2RpZmllZFhcIiwgcHJlVmFsdWVUZXh0OiBcIlg6IFwiIH0pO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKE1vZGlmaWVkUG9pbnRYKTtcblxuICAgICAgICAgICAgdmFyIHBvaW50WSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBwb2ludFkuY2xhc3NOYW1lID0gXCJ2YWx1ZSBvcmlnaW5hbFwiO1xuICAgICAgICAgICAgcG9pbnRZLmlubmVySFRNTCA9IFwiWTogXCIgKyB0aGlzLnk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzVG9VcGRhdGUucHVzaCh7IGVsZW1lbnQ6IHBvaW50WSwga2V5OiBcInlcIiwgcHJlVmFsdWVUZXh0OiBcIlk6IFwiIH0pO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBvaW50WSk7XG5cbiAgICAgICAgICAgIHZhciBtb2RpZmllZFBvaW50WSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBtb2RpZmllZFBvaW50WS5jbGFzc05hbWUgPSBcInZhbHVlXCI7XG4gICAgICAgICAgICBtb2RpZmllZFBvaW50WS5pbm5lckhUTUwgPSBcIlk6IFwiICsgdGhpcy5tb2RpZmllZFk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzVG9VcGRhdGUucHVzaCh7IGVsZW1lbnQ6IG1vZGlmaWVkUG9pbnRZLCBrZXk6IFwibW9kaWZpZWRZXCIsIHByZVZhbHVlVGV4dDogXCJZOiBcIiB9KTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtb2RpZmllZFBvaW50WSk7XG5cbiAgICAgICAgICAgIHZhciBlcmFzZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBlcmFzZS5jbGFzc05hbWUgPSBcImVyYXNlLXBvaW50c1wiO1xuICAgICAgICAgICAgZXJhc2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuZXJhc2UuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZXJhc2UpO1xuXG4gICAgICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdXBkYXRlcyB2aXNpYmxlIHZhbHVlcyAoRE9NIEVsZW1lbnQpXG5cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJ1cGRhdGVcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHtcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7XG4gICAgICAgICAgICB2YXIgX2RpZEl0ZXJhdG9yRXJyb3IgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLmVsZW1lbnRzVG9VcGRhdGVbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDsgIShfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gKF9zdGVwID0gX2l0ZXJhdG9yLm5leHQoKSkuZG9uZSk7IF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0ua2V5ID09IFwiaW5kZXhcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5lbGVtZW50LmlubmVySFRNTCA9IGl0ZW0ucHJlVmFsdWVUZXh0ICsgdGhpc1tpdGVtLmtleV07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmVsZW1lbnQuaW5uZXJIVE1MID0gaXRlbS5wcmVWYWx1ZVRleHQgKyB0aGlzW2l0ZW0ua2V5XS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gUGl2b3QgYXNzaWdubWVudCoqKlxuICAgICAgICAgICAgICAgIC8vIGdldCB0aGUgc2VsZWN0ZWQgb3B0aW9uXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgX2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG4gICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2RpZEl0ZXJhdG9yRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgY3VycmVudFBpdm90ID0gdGhpcy5wYXJlbnQuaW5wdXRDb250cm9sbGVyLnBpdm90c0xpc3Quc2VsZWN0ZWRPcHRpb25zWzBdO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRQaXZvdCAmJiB0aGlzLkRPTUVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFBpdm90LnZlcnRleCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1waXZvdFwiLCBcIlwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkRPTUVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS1waXZvdFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJlcmFzZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZXJhc2UoKSB7XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gR2V0cyB0aGUgb2JqZWN0IGluZGV4IGluIHRoZSBnbG9iYWwgbGlzdFxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5wYXJlbnQudmVydGljZXMuaW5kZXhPZih0aGlzKTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlcyBpdCBmcm9tIHRoZSBET01cbiAgICAgICAgICAgIHRoaXMuRE9NRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuRE9NRWxlbWVudCk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZXMgaXQgZnJvbSB0aGUgZ2xvYmFsIHZlcnRpY2VzIGxpc3RcbiAgICAgICAgICAgIHRoaXMucGFyZW50LnZlcnRpY2VzLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZXMgYWxsIHRoZSB2ZXJ0aWNlcyBmcm9tIHRoZSBsaXN0XG4gICAgICAgICAgICAvLyB0byByZWZyZXNoIHRoZSBpbmRleGVzXG4gICAgICAgICAgICB2YXIgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSB0cnVlO1xuICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yMiA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIF9pdGVyYXRvckVycm9yMiA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfaXRlcmF0b3IyID0gdGhpcy5wYXJlbnQudmVydGljZXNbU3ltYm9sLml0ZXJhdG9yXSgpLCBfc3RlcDI7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbjIgPSAoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiA9IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsID0gX3N0ZXAyLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIGVsLmluZGV4ID0gdGhpcy5wYXJlbnQudmVydGljZXMuaW5kZXhPZihlbCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICBlbC51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyByZW1vdmUgZnJvbSB0aGUgc2VsZWN0IHBpdm90XG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvcjIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIF9pdGVyYXRvckVycm9yMiA9IGVycjtcbiAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uMiAmJiBfaXRlcmF0b3IyLnJldHVybikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yMi5yZXR1cm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcjIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaW5wdXRDb250cm9sbGVyLnBpdm90c0xpc3QucmVtb3ZlKGluZGV4KTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBwaXZvdHMgSW5kZXhlc1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuaW5wdXRDb250cm9sbGVyLnVwZGF0ZVBpdm90c0luZGV4ZXMoKTtcblxuICAgICAgICAgICAgdGhpcy5wYXJlbnQuY2FudmFzLmRyYXcoKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBWZXJ0ZXg7XG59KCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFZlcnRleDtcblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbl9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciBfY2FudmFzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIF9jYW52YXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfY2FudmFzKTtcblxudmFyIF92ZXJ0ZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXG52YXIgX3ZlcnRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF92ZXJ0ZXgpO1xuXG52YXIgX2lucHV0Q29udHJvbGxlciA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cbnZhciBfaW5wdXRDb250cm9sbGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2lucHV0Q29udHJvbGxlcik7XG5cbnZhciBfbWF0cml4ZXNDb250cm9sbGVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblxudmFyIF9tYXRyaXhlc0NvbnRyb2xsZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWF0cml4ZXNDb250cm9sbGVyKTtcblxudmFyIF9tYXRyaXhPcGVyYXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9tYXRyaXhPcGVyYXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21hdHJpeE9wZXJhdGlvbnMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgR3JhcGhhdHJpeCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gR3JhcGhhdHJpeCgpIHtcbiAgICAgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR3JhcGhhdHJpeCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcyA9IHVuZGVmaW5lZDsgLy8gdGhlIGRyYXdpbmcvcGxvdHRpbmcgY2FudmFzXG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dENvbnRyb2xsZXIgPSB1bmRlZmluZWQ7IC8vIENvbnRyb2xzIHRoZSB1c2VyIGludGVyYWN0aW9uIGluIHRoZSBpbnB1dCB0YWJcbiAgICAgICAgICAgICAgICB0aGlzLnZlcnRpY2VzID0gW107IC8vIExpc3Qgb2YgY3JlYXRlZCB2ZXJ0aWNlcyBieSB0aGUgdXNlclxuICAgICAgICAgICAgICAgIHRoaXMubWF0cml4ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICB0aGlzLnBpdm90VmVydGV4ID0gdW5kZWZpbmVkOyAvLyBQb2ludHMgdG8gdGhlIGN1cnJlbnQgdmVydGV4IG1hcmtlZCBhcyBwaXZvdFxuICAgICAgICAgICAgICAgIHRoaXMubWFzc0NlbnRlciA9IHVuZGVmaW5lZDsgLy8gQSB2ZXJ0ZXggdGhhdCBpcyB0aGUgcG9seWdvbiBtYXNzIGNlbnRlclxuICAgICAgICAgICAgICAgIHRoaXMuYWJzb2x1dGVDZW50ZXIgPSB1bmRlZmluZWQ7IC8vIEEgdmVydGV4IHRoYXQgaXMgdGhlIHBvbHlnb24gYWJzb2x1dGUgY2VudGVyXG4gICAgICAgIH1cblxuICAgICAgICBfY3JlYXRlQ2xhc3MoR3JhcGhhdHJpeCwgW3tcbiAgICAgICAgICAgICAgICBrZXk6ICdmYWtlU3RhcnQnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBmYWtlU3RhcnQoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEZha2UoX3gsIF95KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlucHV0Q29udHJvbGxlci5pbnB1dC54LnZhbHVlID0gX3g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlucHV0Q29udHJvbGxlci5pbnB1dC55LnZhbHVlID0gX3k7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlucHV0Q29udHJvbGxlci5hZGRWZXJ0ZXgoeyB0eXBlOiBcImZha2VcIiwga2V5Y29kZTogLTEgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlucHV0Q29udHJvbGxlci5pbnB1dC54LnZhbHVlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaW5wdXRDb250cm9sbGVyLmlucHV0LnkudmFsdWUgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGYWtlKDEsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkRmFrZSgzLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZEZha2UoMywgMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGYWtlKDMuNSwgMyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRGYWtlKDIsIDUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkRmFrZSgwLjUsIDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkRmFrZSgxLCAzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBrZXk6ICdhcHBseVRyYW5zZm9ybXMnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBhcHBseVRyYW5zZm9ybXMoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNldHMgdGhlIGZpcnN0IG1hdHJpeCB0byBtdWx0aXBseSBhcyB0aGUgbGFzdCBvbmUgaW4gdGhlIG1hdHJpeGVzIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0TWF0cml4ID0gW1sxLCAwLCAwXSwgWzAsIDEsIDBdLCBbMCwgMCwgMV1dO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAodGhpcy5tYXRyaXhlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmVzdWx0TWF0cml4ID0gdGhpcy5tYXRyaXhlc1t0aGlzLm1hdHJpeGVzLmxlbmd0aCAtIDFdLm1hdHJpeFN0cnVjdHVyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gdGhpcy5tYXRyaXhlcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRNYXRyaXggPSBfbWF0cml4T3BlcmF0aW9uczIuZGVmYXVsdC5tdWx0aXBseU1hdHJpeGVzKHRoaXMubWF0cml4ZXNbaV0ubWF0cml4U3RydWN0dXJlLCByZXN1bHRNYXRyaXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeGVzQ29udHJvbGxlci50cmFuc2Zvcm1hdGlvbk1hdHJpeCA9IHJlc3VsdE1hdHJpeDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0TWF0cml4KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXV0b21hdGljYWxseSBhcHBseSB0cmFuc2Zvcm1hdGlvbnMgdG8gdmVydGljZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIF9tYXRyaXhPcGVyYXRpb25zMi5kZWZhdWx0LnZlcnRleEFwcGx5VHJhbnNmb3JtYXRpb25zKHRoaXMudmVydGljZXMsIHRoaXMubWF0cml4ZXNDb250cm9sbGVyLnRyYW5zZm9ybWF0aW9uTWF0cml4KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVkcmF3XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5kcmF3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAga2V5OiAnc3RhcnQnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMgPSBuZXcgX2NhbnZhczIuZGVmYXVsdCh0aGlzLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FudmFzJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dENvbnRyb2xsZXIgPSBuZXcgX2lucHV0Q29udHJvbGxlcjIuZGVmYXVsdCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0cml4ZXNDb250cm9sbGVyID0gbmV3IF9tYXRyaXhlc0NvbnRyb2xsZXIyLmRlZmF1bHQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZmFrZVN0YXJ0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2UgdGhlIGZpc3J0IGRyYXcuICEhISoqKlNob3VsZCBiZSB0aGUgbGFzdCBjb21tYW5kKioqISEhXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5kcmF3KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XSk7XG5cbiAgICAgICAgcmV0dXJuIEdyYXBoYXRyaXg7XG59KCk7XG5cbnZhciBncmFwaGF0cml4ID0gbmV3IEdyYXBoYXRyaXgoKTtcbmdyYXBoYXRyaXguc3RhcnQoKTtcbmNvbnNvbGUubG9nKGdyYXBoYXRyaXgpO1xuXG4vKioqLyB9KSxcbi8qIDUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuLy8gcmVtb3ZlZCBieSBleHRyYWN0LXRleHQtd2VicGFjay1wbHVnaW5cblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIENhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDYW52YXMoX3BhcmVudCwgX2NhbnZhc0VsZW1lbnQpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhbnZhcyk7XG5cbiAgICAgICAgdGhpcy5wYXJlbnQgPSBfcGFyZW50O1xuICAgICAgICB0aGlzLmNhbnZhc0RPTSA9IF9jYW52YXNFbGVtZW50OyAvLyBjYW52YXMgRE9NIGVsZW1lbnRcbiAgICAgICAgdGhpcy5jYW52YXMgPSB0aGlzLmNhbnZhc0RPTS5nZXRDb250ZXh0KCcyZCcpOyAvLyBkcmF3aW5nIGNhbnZhc1xuICAgICAgICB0aGlzLnNpemUgPSBbMCwgMF07IC8vIGNhbnZhcycgc2l6ZVxuICAgICAgICB0aGlzLmNlbnRlciA9IFswLCAwXTsgLy8gcmVsYXRpdmUgY2VudGVyXG4gICAgICAgIHRoaXMuZHJhZ0RlbHRhID0gWzAsIDBdOyAvLyBob3cgbXVjaCBoYXMgYmVlbiBkcmFnZ2VkIGluIFggYW5kIFlcbiAgICAgICAgdGhpcy5zY2FsZSA9IDIwOyAvLyBEcmF3aW5nIHNjYWxlXG4gICAgICAgIHRoaXMubWFyZ2lucyA9IFsxODAsIDEzMF07XG5cbiAgICAgICAgLy8gYmluZHNcbiAgICAgICAgdGhpcy5kcmF3ID0gdGhpcy5kcmF3LmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENhbnZhcywgW3tcbiAgICAgICAga2V5OiBcImNhcnRlc2lhblBsYW5lXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjYXJ0ZXNpYW5QbGFuZSgpIHtcblxuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDAsXG4gICAgICAgICAgICAgICAgY291bnQgPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgc2NsID0gTWF0aC5mbG9vcih0aGlzLnNjYWxlKTtcblxuICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVdpZHRoID0gMTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmZvbnQgPSBcIjEwcHggUmFsZXdheVwiO1xuICAgICAgICAgICAgdGhpcy5jYW52YXMudGV4dEJhc2VsaW5lID0gXCJtaWRkbGVcIjtcblxuICAgICAgICAgICAgLy8gTElOSEEgWFxuICAgICAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlU3R5bGUgPSBcIiNkMTc4NzhcIjtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmZpbGxTdHlsZSA9IFwiI2QxNzg3OFwiO1xuICAgICAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8oMCwgdGhpcy5jZW50ZXJbMV0pO1xuICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVRvKHRoaXMuc2l6ZVswXSwgdGhpcy5jZW50ZXJbMV0pO1xuICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2UoKTtcblxuICAgICAgICAgICAgLy8gLVhcbiAgICAgICAgICAgIGNvdW50ID0gLTE7XG4gICAgICAgICAgICBmb3IgKGkgPSB0aGlzLmNlbnRlclswXSAtIHNjbDsgaSA+IDA7IGkgLT0gc2NsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKGksIHRoaXMuY2VudGVyWzFdIC0gMyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVRvKGksIHRoaXMuY2VudGVyWzFdICsgMyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pbnB1dENvbnRyb2xsZXIub3B0aW9ucy5zaG93TnVtYmVycy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmZpbGxUZXh0KGNvdW50LCBpLCB0aGlzLmNlbnRlclsxXSArIHRoaXMuZ2V0TW9kVGV4dFBvc2l0aW9uKC0xMCwgOCwgY291bnQpLCAxMDApO1xuICAgICAgICAgICAgICAgICAgICBjb3VudC0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gK1hcbiAgICAgICAgICAgIGNvdW50ID0gMTtcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuY2VudGVyWzBdICsgc2NsOyBpIDwgdGhpcy5zaXplWzBdOyBpICs9IHNjbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbyhpLCB0aGlzLmNlbnRlclsxXSAtIDMpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyhpLCB0aGlzLmNlbnRlclsxXSArIDMpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlucHV0Q29udHJvbGxlci5vcHRpb25zLnNob3dOdW1iZXJzLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuZmlsbFRleHQoY291bnQsIGksIHRoaXMuY2VudGVyWzFdICsgdGhpcy5nZXRNb2RUZXh0UG9zaXRpb24oLTEwLCA4LCBjb3VudCksIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBMSU5IQSBZXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2VTdHlsZSA9IFwiIzgxYmY2OFwiO1xuICAgICAgICAgICAgdGhpcy5jYW52YXMuZmlsbFN0eWxlID0gXCIjODFiZjY4XCI7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbyh0aGlzLmNlbnRlclswXSwgMCk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8odGhpcy5jZW50ZXJbMF0sIHRoaXMuc2l6ZVsxXSk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xuXG4gICAgICAgICAgICAvLyArWVxuICAgICAgICAgICAgY291bnQgPSAxO1xuICAgICAgICAgICAgZm9yIChpID0gdGhpcy5jZW50ZXJbMV0gLSBzY2w7IGkgPiAwOyBpIC09IHNjbCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbyh0aGlzLmNlbnRlclswXSAtIDIsIGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyh0aGlzLmNlbnRlclswXSArIDMsIGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pbnB1dENvbnRyb2xsZXIub3B0aW9ucy5zaG93TnVtYmVycy5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnRleHRBbGlnbiA9IHRoaXMuZ2V0TW9kVGV4dFBvc2l0aW9uKC0xMiwgNiwgY291bnQpIDwgMCA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5maWxsVGV4dChjb3VudCwgdGhpcy5jZW50ZXJbMF0gKyB0aGlzLmdldE1vZFRleHRQb3NpdGlvbigtNiwgNiwgY291bnQpLCBpLCAxMDApO1xuICAgICAgICAgICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gLVlcbiAgICAgICAgICAgIGNvdW50ID0gLTE7XG4gICAgICAgICAgICBmb3IgKGkgPSB0aGlzLmNlbnRlclsxXSArIHNjbDsgaSA8IHRoaXMuc2l6ZVsxXTsgaSArPSBzY2wpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8odGhpcy5jZW50ZXJbMF0gLSAyLCBpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8odGhpcy5jZW50ZXJbMF0gKyAzLCBpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaW5wdXRDb250cm9sbGVyLm9wdGlvbnMuc2hvd051bWJlcnMuY2hlY2tlZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy50ZXh0QWxpZ24gPSB0aGlzLmdldE1vZFRleHRQb3NpdGlvbigtMTIsIDYsIGNvdW50KSA8IDAgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuZmlsbFRleHQoY291bnQsIHRoaXMuY2VudGVyWzBdICsgdGhpcy5nZXRNb2RUZXh0UG9zaXRpb24oLTYsIDYsIGNvdW50KSwgaSwgMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgY291bnQtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogXCJkcmF3XCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KCkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIENsZWFycyB0aGUgY2FudmFzXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5jbGVhclJlY3QoMCwgMCwgdGhpcy5zaXplWzBdLCB0aGlzLnNpemVbMV0pO1xuXG4gICAgICAgICAgICAvLyBDb21wbGltZW50YXJ5IGZ1bmN0aW9uc1xuICAgICAgICAgICAgLy8gRHJhd3MgdGhlIGdyaWQgaWYgY2hlY2tib3ggaXMgY2hlY2tlZFxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlucHV0Q29udHJvbGxlci5vcHRpb25zLnNob3dHcmlkLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jYXJ0ZXNpYW5QbGFuZSgpO1xuICAgICAgICAgICAgdGhpcy5waXZvdCgpO1xuXG4gICAgICAgICAgICB2YXIgaSA9IHZvaWQgMDtcblxuICAgICAgICAgICAgLy8gREVTRU5IQSBGT1JNQSBCQVNFIC0gKioqKiogTkFPIE1PRElGSUNBREEgKioqKipcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGggPiAxKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lSm9pbiA9IFwiYmV2ZWxcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2VTdHlsZSA9IFwiI2MyYmFjN1wiO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVXaWR0aCA9IDE7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8odGhpcy5jZW50ZXJbMF0gKyBNYXRoLnJvdW5kKHRoaXMucGFyZW50LnZlcnRpY2VzWzBdLnggKiB0aGlzLnNjYWxlKSwgdGhpcy5jZW50ZXJbMV0gKyBNYXRoLnJvdW5kKHRoaXMucGFyZW50LnZlcnRpY2VzWzBdLnkgKiAtdGhpcy5zY2FsZSkpO1xuXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMTsgaSA8IHRoaXMucGFyZW50LnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyh0aGlzLmNlbnRlclswXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQudmVydGljZXNbaV0ueCAqIHRoaXMuc2NhbGUpLCB0aGlzLmNlbnRlclsxXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQudmVydGljZXNbaV0ueSAqIC10aGlzLnNjYWxlKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlucHV0Q29udHJvbGxlci5vcHRpb25zLmNsb3NlUGF0aC5jaGVja2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xuXG4gICAgICAgICAgICAgICAgLy8gRHJhdyB0aGUgdW5tb2RpZmllZCB2ZXJ0aWNlc1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuYXJjKHRoaXMuY2VudGVyWzBdICsgTWF0aC5yb3VuZCh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS54ICogdGhpcy5zY2FsZSksIHRoaXMuY2VudGVyWzFdICsgTWF0aC5yb3VuZCh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS55ICogLXRoaXMuc2NhbGUpLCAyLCAwLCAyICogTWF0aC5QSSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmZpbGxTdHlsZSA9IFwiI2ZmZlwiO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lV2lkdGggPSAxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5maWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIC8vIERFU0VOSEEgRk9STUEgKioqKiogTU9ESUZJQ0FEQSAqKioqKlxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LnZlcnRpY2VzLmxlbmd0aCA+IDEpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVKb2luID0gXCJiZXZlbFwiO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZVN0eWxlID0gXCIjNTczZjg0XCI7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVdpZHRoID0gMjtcblxuICAgICAgICAgICAgICAgIC8vIEJlZ2luIHRoZSBsaW5lXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKHRoaXMuY2VudGVyWzBdICsgTWF0aC5yb3VuZCh0aGlzLnBhcmVudC52ZXJ0aWNlc1swXS5tb2RpZmllZFggKiB0aGlzLnNjYWxlKSwgdGhpcy5jZW50ZXJbMV0gKyBNYXRoLnJvdW5kKHRoaXMucGFyZW50LnZlcnRpY2VzWzBdLm1vZGlmaWVkWSAqIC10aGlzLnNjYWxlKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBEcmF3IHRoZSBvdGhlciBsaW5lc1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCB0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8odGhpcy5jZW50ZXJbMF0gKyBNYXRoLnJvdW5kKHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLm1vZGlmaWVkWCAqIHRoaXMuc2NhbGUpLCB0aGlzLmNlbnRlclsxXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQudmVydGljZXNbaV0ubW9kaWZpZWRZICogLXRoaXMuc2NhbGUpKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaW5wdXRDb250cm9sbGVyLm9wdGlvbnMuY2xvc2VQYXRoLmNoZWNrZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XG5cbiAgICAgICAgICAgICAgICAvLyBEcmF3IHRoZSBtb2RpZmllZCB2ZXJ0aWNlc1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuYXJjKHRoaXMuY2VudGVyWzBdICsgTWF0aC5yb3VuZCh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS5tb2RpZmllZFggKiB0aGlzLnNjYWxlKSwgdGhpcy5jZW50ZXJbMV0gKyBNYXRoLnJvdW5kKHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLm1vZGlmaWVkWSAqIC10aGlzLnNjYWxlKSwgMiwgMCwgMiAqIE1hdGguUEkpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5maWxsU3R5bGUgPSBcIiNmZmZcIjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVdpZHRoID0gMTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuZmlsbCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZHJhZ1wiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhZyhldnQpIHtcblxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIGxhc3RQb2ludGVyUG9zaXRpb24gPSBbZXZ0LnBhZ2VYLCBldnQucGFnZVldO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBkcmFnTW92ZShldnQpIHtcblxuICAgICAgICAgICAgICAgIF90aGlzLmRyYWdEZWx0YSA9IFtsYXN0UG9pbnRlclBvc2l0aW9uWzBdIC0gZXZ0LnBhZ2VYLCBsYXN0UG9pbnRlclBvc2l0aW9uWzFdIC0gZXZ0LnBhZ2VZXTtcblxuICAgICAgICAgICAgICAgIGxhc3RQb2ludGVyUG9zaXRpb24gPSBbZXZ0LnBhZ2VYLCBldnQucGFnZVldO1xuXG4gICAgICAgICAgICAgICAgX3RoaXMuZGVmQ2VudGVyKCk7XG5cbiAgICAgICAgICAgICAgICBfdGhpcy5kcmF3KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN0b3BEcmFnKCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIGRyYWdNb3ZlKTtcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgc3RvcERyYWcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCBkcmFnTW92ZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgc3RvcERyYWcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2V0cyB0aGUgQ2FudmFzIERPTSBlbGVtZW50IGN1cnJlbnQgc2l6ZSBmb3IgZHJhd2luZyBjYWxjc1xuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZGVmU2l6ZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVmU2l6ZSgpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gdGhpcy5tYXJnaW5zWzBdO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMubWFyZ2luc1sxXTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzRE9NLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIHdpZHRoKTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzRE9NLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBoZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5zaXplID0gW3dpZHRoLCBoZWlnaHRdO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZGVmQ2VudGVyXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWZDZW50ZXIoKSB7XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50Q2VudGVyID0gW3RoaXMuY2VudGVyWzBdLCB0aGlzLmNlbnRlclsxXV07XG5cbiAgICAgICAgICAgIHRoaXMuY2VudGVyID0gW01hdGguZmxvb3IoY3VycmVudENlbnRlclswXSAtIHRoaXMuZHJhZ0RlbHRhWzBdKSArIDAuNSwgTWF0aC5mbG9vcihjdXJyZW50Q2VudGVyWzFdIC0gdGhpcy5kcmFnRGVsdGFbMV0pICsgMC41XTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEluY3JlYXNlcy9EZWNyZWFzZXMgdGhlIHNjYWxpbmcgZmFjdG9yIHdoZW4gdGhlIHVzZXIgc2Nyb2xscyBvdmVyIHRoZSBjYW52YXNcblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInNldFNjYWxlXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRTY2FsZShldnQpIHtcbiAgICAgICAgICAgIHZhciBkZWx0YSA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbigxLCBldnQud2hlZWxEZWx0YSkpO1xuICAgICAgICAgICAgdGhpcy5zY2FsZSA9IE1hdGgubWF4KDgsIE1hdGgubWluKDEwMCwgdGhpcy5zY2FsZSArIGRlbHRhICogNSkpO1xuXG4gICAgICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImdyaWRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdyaWQoKSB7XG4gICAgICAgICAgICAvLyBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93LWdyaWRcIikuY2hlY2tlZCkge1xuXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2VTdHlsZSA9IFwiI2YwZjBmMFwiO1xuICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVdpZHRoID0gMTtcblxuICAgICAgICAgICAgdmFyIGkgPSB2b2lkIDA7XG4gICAgICAgICAgICB2YXIgc2NsID0gTWF0aC5mbG9vcih0aGlzLnNjYWxlKTtcblxuICAgICAgICAgICAgLy8gLVhcbiAgICAgICAgICAgIGZvciAoaSA9IHRoaXMuY2VudGVyWzBdIC0gc2NsOyBpID4gMDsgaSAtPSBzY2wpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8oaSwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVRvKGksIHRoaXMuc2l6ZVsxXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICtYXG4gICAgICAgICAgICBmb3IgKGkgPSB0aGlzLmNlbnRlclswXSArIHNjbDsgaSA8IHRoaXMuc2l6ZVswXTsgaSArPSBzY2wpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8oaSwgMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVRvKGksIHRoaXMuc2l6ZVsxXSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vICtZXG4gICAgICAgICAgICBmb3IgKGkgPSB0aGlzLmNlbnRlclsxXSAtIHNjbDsgaSA+IDA7IGkgLT0gc2NsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKDAsIGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyh0aGlzLnNpemVbMF0sIGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAtWVxuICAgICAgICAgICAgZm9yIChpID0gdGhpcy5jZW50ZXJbMV0gKyBzY2w7IGkgPCB0aGlzLnNpemVbMV07IGkgKz0gc2NsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKDAsIGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyh0aGlzLnNpemVbMF0sIGkpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmV0dXJucyB0aGUgcmlnaHQgdGV4dCBwb3NpdGlvblxuXG4gICAgfSwge1xuICAgICAgICBrZXk6IFwiZ2V0TW9kVGV4dFBvc2l0aW9uXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNb2RUZXh0UG9zaXRpb24oX21pbiwgX21heCwgX2luZGV4KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zY2FsZSA8IDIwICYmIF9pbmRleCAlIDIgPT0gMCkge1xuICAgICAgICAgICAgICAgIC8vIGlmIGxlc3MgdGhhbiAyMHB4IGFuZCBOT1QgT0REXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9taW47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBfbWF4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6IFwicGl2b3RcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBpdm90KCkge1xuXG4gICAgICAgICAgICB2YXIgZHJhd2luZ0NlbnRlciA9IFt0aGlzLmNlbnRlclswXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXgueCAqIHRoaXMuc2NhbGUpLCB0aGlzLmNlbnRlclsxXSAtIE1hdGgucm91bmQodGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXgueSAqIHRoaXMuc2NhbGUpXTtcblxuICAgICAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5hcmMoZHJhd2luZ0NlbnRlclswXSwgZHJhd2luZ0NlbnRlclsxXSwgNCwgMCwgMiAqIE1hdGguUEkpO1xuXG4gICAgICAgICAgICAvLyBob3Jpem9udGFsIGxpbmVcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbyhkcmF3aW5nQ2VudGVyWzBdIC0gNiwgZHJhd2luZ0NlbnRlclsxXSk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8oZHJhd2luZ0NlbnRlclswXSArIDYsIGRyYXdpbmdDZW50ZXJbMV0pO1xuXG4gICAgICAgICAgICAvLyB2ZXJ0aWNhbCBsaW5lXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8oZHJhd2luZ0NlbnRlclswXSwgZHJhd2luZ0NlbnRlclsxXSAtIDYpO1xuICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVRvKGRyYXdpbmdDZW50ZXJbMF0sIGRyYXdpbmdDZW50ZXJbMV0gKyA2KTtcblxuICAgICAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlU3R5bGUgPSBcIiM1NzNmODRcIjtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVXaWR0aCA9IDE7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2UoKTtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gc2V0cyB0aGUgcmVsYXRpdmUgY2VudGVyIGZyb20gd2hlcmUgdG8gZHJhd1xuICAgICAgICAvLyA6OiB0aGUgcGxhbmUncyAwLDBcblxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInJlc2V0Q2VudGVyXCIsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZXNldENlbnRlcigpIHtcbiAgICAgICAgICAgIHRoaXMuY2VudGVyID0gW01hdGguZmxvb3IodGhpcy5zaXplWzBdIC8gMiAtIHRoaXMuZHJhZ0RlbHRhWzBdKSArIDAuNSwgTWF0aC5mbG9vcih0aGlzLnNpemVbMV0gLyAyIC0gdGhpcy5kcmFnRGVsdGFbMV0pICsgMC41XTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcInJlc2l6ZVwiLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzaXplKCkge1xuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vIE5vdGVzIHRoZSBwcmV2aW91cyBzaXplIGJlZm9yZSByZXNpemluZy4gZG91YmxlIHZhcnMgdG8gcHJldmVudCBwb2ludGluZ1xuICAgICAgICAgICAgdmFyIHByZXZTaXplWCA9IHRoaXMuc2l6ZVswXTtcbiAgICAgICAgICAgIHZhciBwcmV2U2l6ZVkgPSB0aGlzLnNpemVbMV07XG5cbiAgICAgICAgICAgIC8vIGdldHMgdGhlIGN1cnJlbnQgY2VudGVyXG4gICAgICAgICAgICB2YXIgY3VycmVudENlbnRlciA9IFt0aGlzLmNlbnRlclswXSwgdGhpcy5jZW50ZXJbMV1dO1xuXG4gICAgICAgICAgICAvLyByZWRlZmluZXMgY2FudmFzIHNpemVcbiAgICAgICAgICAgIHRoaXMuZGVmU2l6ZSgpO1xuXG4gICAgICAgICAgICAvLyBjYWxjdWxhdGVzIHRoZSBzaXplIG1vZGlmaWNhdGlvbiBvZiB0aGUgd2luZG93XG4gICAgICAgICAgICB2YXIgcmVzaXplUGVyY2VudGFnZVggPSB0aGlzLnNpemVbMF0gLyBwcmV2U2l6ZVg7XG4gICAgICAgICAgICB2YXIgcmVzaXplUGVyY2VudGFnZVkgPSB0aGlzLnNpemVbMV0gLyBwcmV2U2l6ZVk7XG5cbiAgICAgICAgICAgIC8vIHJlc2V0IHRoZSBjZW50ZXIgYWNjb3JkaW5nIHRvIHRoZSBwZXJjZW50YWdlIG9mIHRoZSB3aW5kb3cgcmVzaXplXG4gICAgICAgICAgICB0aGlzLmRyYWdEZWx0YSA9IFtjdXJyZW50Q2VudGVyWzBdIC0gY3VycmVudENlbnRlclswXSAqIHJlc2l6ZVBlcmNlbnRhZ2VYLCBjdXJyZW50Q2VudGVyWzFdIC0gY3VycmVudENlbnRlclsxXSAqIHJlc2l6ZVBlcmNlbnRhZ2VZXTtcbiAgICAgICAgICAgIHRoaXMuZGVmQ2VudGVyKCk7XG4gICAgICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiBcImluaXRcIixcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICB0aGlzLmRlZlNpemUoKTtcbiAgICAgICAgICAgIHRoaXMucmVzZXRDZW50ZXIoKTtcblxuICAgICAgICAgICAgLy8gQ0FOVkFTIExJU1RFTkVSU1xuXG4gICAgICAgICAgICAvLyBPVEhFUiBMSVNURU5FUlNcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplLmJpbmQodGhpcykpO1xuXG4gICAgICAgICAgICAvLyBob2xkIGFuZCBkcmFnXG4gICAgICAgICAgICB0aGlzLmNhbnZhc0RPTS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuZHJhZy5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgLy8gem9vbSBpbi9vdXRcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V3aGVlbFwiLCB0aGlzLnNldFNjYWxlLmJpbmQodGhpcyksIGZhbHNlKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwiRE9NTW91c2VTY3JvbGxcIiwgdGhpcy5zZXRTY2FsZS5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ2FudmFzO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBDYW52YXM7XG5cbi8qKiovIH0pLFxuLyogNyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0dmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX3ZlcnRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cbnZhciBfdmVydGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ZlcnRleCk7XG5cbnZhciBfbWF0cml4T3BlcmF0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfbWF0cml4T3BlcmF0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYXRyaXhPcGVyYXRpb25zKTtcblxudmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfdXRpbHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbHMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG52YXIgSW5wdXRDb250cm9sbGVyID0gZnVuY3Rpb24gKCkge1xuXHRmdW5jdGlvbiBJbnB1dENvbnRyb2xsZXIoX3BhcmVudCkge1xuXHRcdF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbnB1dENvbnRyb2xsZXIpO1xuXG5cdFx0dGhpcy5wYXJlbnQgPSBfcGFyZW50O1xuXG5cdFx0Ly8gSW5wdXQgZWxlbWVudHMgKHdoZXJlIHRoZSB1c2VyIGVudGVycyB0aGUgZGVzaXJlZCB2ZXJ0aWNlcylcblx0XHR0aGlzLmlucHV0ID0ge1xuXHRcdFx0eDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dC14XCIpLFxuXHRcdFx0eTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dC15XCIpLFxuXHRcdFx0YnV0dG9uOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0LWJ1dHRvblwiKVxuXHRcdH07XG5cblx0XHR0aGlzLnBpdm90c0xpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBpdm90LXNlbGVjdFwiKTtcblxuXHRcdHRoaXMub3B0aW9ucyA9IHtcblx0XHRcdGNsb3NlUGF0aDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvcGVuLWNsb3NlLXBhdGhcIiksXG5cdFx0XHRzaG93R3JpZDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93LWdyaWRcIiksXG5cdFx0XHRzaG93TnVtYmVyczogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93LW51bWJlcnNcIilcblx0XHR9O1xuXG5cdFx0dGhpcy5vcmlnaW5Db29yZHMgPSB7XG5cdFx0XHR4OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9yaWdpbi14XCIpLFxuXHRcdFx0eTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvcmlnaW4teVwiKVxuXG5cdFx0XHQvLyBGdW5jdGlvbnMgQmluZHNcblx0XHR9O3RoaXMuYWRkVmVydGV4ID0gdGhpcy5hZGRWZXJ0ZXguYmluZCh0aGlzKTtcblx0XHR0aGlzLnN3aXRjaFBpdm90ID0gdGhpcy5zd2l0Y2hQaXZvdC5iaW5kKHRoaXMpO1xuXG5cdFx0dGhpcy5hZGRMaXN0ZW5lcnMoKTtcblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdF9jcmVhdGVDbGFzcyhJbnB1dENvbnRyb2xsZXIsIFt7XG5cdFx0a2V5OiAnYWRkUGl2b3QnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBhZGRQaXZvdChfdnR4KSB7XG5cdFx0XHQvL1xuXHRcdFx0dmFyIG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG5cdFx0XHRvcHRpb24udmFsdWUgPSBfdnR4LmluZGV4O1xuXHRcdFx0b3B0aW9uLmlubmVySFRNTCA9IF92dHguZGlzcGxheU5hbWU7XG5cdFx0XHRvcHRpb24udmVydGV4ID0gX3Z0eDtcblx0XHRcdHRoaXMucGl2b3RzTGlzdC5hcHBlbmRDaGlsZChvcHRpb24pO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ3VwZGF0ZVBpdm90c0luZGV4ZXMnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVQaXZvdHNJbmRleGVzKCkge1xuXHRcdFx0Ly9cblx0XHRcdHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcblx0XHRcdHZhciBfZGlkSXRlcmF0b3JFcnJvciA9IGZhbHNlO1xuXHRcdFx0dmFyIF9pdGVyYXRvckVycm9yID0gdW5kZWZpbmVkO1xuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRmb3IgKHZhciBfaXRlcmF0b3IgPSB0aGlzLnBpdm90c0xpc3Qub3B0aW9uc1tTeW1ib2wuaXRlcmF0b3JdKCksIF9zdGVwOyAhKF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24gPSAoX3N0ZXAgPSBfaXRlcmF0b3IubmV4dCgpKS5kb25lKTsgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWUpIHtcblx0XHRcdFx0XHR2YXIgcGl2b3QgPSBfc3RlcC52YWx1ZTtcblxuXHRcdFx0XHRcdHBpdm90LmlubmVySFRNTCA9IHBpdm90LnZlcnRleC5pbmRleDtcblx0XHRcdFx0fVxuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcblx0XHRcdFx0X2l0ZXJhdG9yRXJyb3IgPSBlcnI7XG5cdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuKSB7XG5cdFx0XHRcdFx0XHRfaXRlcmF0b3IucmV0dXJuKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuXHRcdFx0XHRcdFx0dGhyb3cgX2l0ZXJhdG9yRXJyb3I7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiAnc2V0UGl2b3QnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBzZXRQaXZvdChfdnR4KSB7XG5cdFx0XHQvL1xuXHRcdFx0dGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXggPSBfdnR4O1xuXG5cdFx0XHQvL3VwZGF0ZXMgdGhlIE9yaWdpbiBjb29yZGluYXRlc1xuXHRcdFx0dGhpcy5vcmlnaW5Db29yZHMueC52YWx1ZSA9IHRoaXMucGFyZW50LnBpdm90VmVydGV4LngudG9GaXhlZCgyKTtcblx0XHRcdHRoaXMub3JpZ2luQ29vcmRzLnkudmFsdWUgPSB0aGlzLnBhcmVudC5waXZvdFZlcnRleC55LnRvRml4ZWQoMik7XG5cdFx0fVxuXHR9LCB7XG5cdFx0a2V5OiAnZGVmUGl2b3RQb3NpdGlvbicsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIGRlZlBpdm90UG9zaXRpb24oKSB7XG5cdFx0XHQvL1xuXHRcdFx0Ly8gYWJvcnQgaWYgdGhlIHNlbGVjdGVkIHZhbHVlIGlzIGVtcHR5IChpdCBtZWFucyB0aGUgbGlzdCBpcyBlbXB0eSlcblx0XHRcdGlmICh0aGlzLnBpdm90c0xpc3QudmFsdWUgPT0gXCJcIiB8fCB0aGlzLnBpdm90c0xpc3QudmFsdWUgIT0gXCJhYnNvbHV0ZVwiICYmIHRoaXMucGl2b3RzTGlzdC52YWx1ZSAhPSBcIm1hc3NcIikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cdFx0XHR2YXIgaSA9IHZvaWQgMDtcblxuXHRcdFx0aWYgKHRoaXMucGl2b3RzTGlzdC52YWx1ZSA9PSBcImFic29sdXRlXCIpIHtcblx0XHRcdFx0Ly9cblx0XHRcdFx0Ly8gUmVzZXRcblx0XHRcdFx0dGhpcy5wYXJlbnQuYWJzb2x1dGVDZW50ZXIueCA9IDA7XG5cdFx0XHRcdHRoaXMucGFyZW50LmFic29sdXRlQ2VudGVyLnkgPSAwO1xuXG5cdFx0XHRcdHZhciBtaW5YID0gdGhpcy5wYXJlbnQudmVydGljZXNbMF0ueDtcblx0XHRcdFx0dmFyIG1heFggPSB0aGlzLnBhcmVudC52ZXJ0aWNlc1swXS54O1xuXHRcdFx0XHR2YXIgbWluWSA9IHRoaXMucGFyZW50LnZlcnRpY2VzWzBdLnk7XG5cdFx0XHRcdHZhciBtYXhZID0gdGhpcy5wYXJlbnQudmVydGljZXNbMF0ueTtcblxuXHRcdFx0XHRmb3IgKGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQudmVydGljZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRpZiAodGhpcy5wYXJlbnQudmVydGljZXNbaV0ueCA8IG1pblgpIHtcblx0XHRcdFx0XHRcdG1pblggPSB0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS54O1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5wYXJlbnQudmVydGljZXNbaV0ueCA+IG1heFgpIHtcblx0XHRcdFx0XHRcdG1heFggPSB0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS54O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmICh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS55IDwgbWluWSkge1xuXHRcdFx0XHRcdFx0bWluWSA9IHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS55ID4gbWF4WSkge1xuXHRcdFx0XHRcdFx0bWF4WSA9IHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dGhpcy5wYXJlbnQuYWJzb2x1dGVDZW50ZXIueCA9IChtYXhYICsgbWluWCkgLyAyO1xuXHRcdFx0XHR0aGlzLnBhcmVudC5hYnNvbHV0ZUNlbnRlci55ID0gKG1heFkgKyBtaW5ZKSAvIDI7XG5cblx0XHRcdFx0dGhpcy5zZXRQaXZvdCh0aGlzLnBhcmVudC5hYnNvbHV0ZUNlbnRlcik7XG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMucGl2b3RzTGlzdC52YWx1ZSA9PSBcIm1hc3NcIikge1xuXHRcdFx0XHQvL1xuXHRcdFx0XHQvLyBSZXNldFxuXHRcdFx0XHR0aGlzLnBhcmVudC5tYXNzQ2VudGVyLnggPSAwO1xuXHRcdFx0XHR0aGlzLnBhcmVudC5tYXNzQ2VudGVyLnkgPSAwO1xuXHRcdFx0XHQvLyBzdW1zIGl0IGFsbCBhbmQgZGl2aWRlIGJ5IHRoZSBudW1iZXIgb2YgdmVydGljZXNcblx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IHRoaXMucGFyZW50LnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0dGhpcy5wYXJlbnQubWFzc0NlbnRlci54ICs9IHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnggLyB0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGg7XG5cdFx0XHRcdFx0dGhpcy5wYXJlbnQubWFzc0NlbnRlci55ICs9IHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnkgLyB0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGg7XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0dGhpcy5zZXRQaXZvdCh0aGlzLnBhcmVudC5tYXNzQ2VudGVyKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6ICdhZGRWZXJ0ZXgnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBhZGRWZXJ0ZXgoZXZ0KSB7XG5cdFx0XHQvL1xuXHRcdFx0Ly8gVmFsaWRhdGVzIG51bWJlcnNcblx0XHRcdHRoaXMuaW5wdXQueC52YWx1ZSA9IF91dGlsczIuZGVmYXVsdC52YWxpZE51bWJlcih0aGlzLmlucHV0LngudmFsdWUpO1xuXHRcdFx0dGhpcy5pbnB1dC55LnZhbHVlID0gX3V0aWxzMi5kZWZhdWx0LnZhbGlkTnVtYmVyKHRoaXMuaW5wdXQueS52YWx1ZSk7XG5cblx0XHRcdC8vIElmIGtleWRvd24gYW5kIG5vdCBFTlRFUiBrZXksIHRoZW4gYWJvcnRcblx0XHRcdGlmIChldnQudHlwZSA9PSBcImtleXVwXCIgJiYgZXZ0LmtleUNvZGUgIT0gMTMpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBvbmUgb3IgYm90aCBpbnB1dHMgYXJlIGVtcHR5LCBhYm9ydFxuXHRcdFx0aWYgKHRoaXMuaW5wdXQueC52YWx1ZSA9PSBcIlwiIHx8IHRoaXMuaW5wdXQueS52YWx1ZSA9PSBcIlwiKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYW55IG9mIHRoZSBpbnB1dHMgYXJlIE5hTiwgdGhlbiBhYm9ydFxuXHRcdFx0aWYgKGlzTmFOKHRoaXMuaW5wdXQueC52YWx1ZSkgfHwgaXNOYU4odGhpcy5pbnB1dC55LnZhbHVlKSkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIGlmIEVOVEVSIHdhcyBwcmVzc2VkIGFuZCBldmVyeXRoaW5nIGlzIE9LLCB0aGUgc2V0IGZvY3VzIHRvIHRoZSBYIGlucHV0IGFnYWluXG5cdFx0XHRpZiAoZXZ0LnR5cGUgPT0gXCJrZXl1cFwiKSB7XG5cdFx0XHRcdHRoaXMuaW5wdXQueC5mb2N1cygpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgbmV3IHZlcnRleCB0byB0aGUgR3JhcGhhdHJpeCBnbG9iYWwgdmVydGljZXNcblx0XHRcdHZhciB2dHggPSBuZXcgX3ZlcnRleDIuZGVmYXVsdCh0aGlzLnBhcmVudCwge1xuXHRcdFx0XHRpbmRleDogdGhpcy5wYXJlbnQudmVydGljZXMubGVuZ3RoICsgMSxcblx0XHRcdFx0ZGlzcGxheU5hbWU6IHRoaXMucGFyZW50LnZlcnRpY2VzLmxlbmd0aCArIDEsXG5cdFx0XHRcdHg6IHRoaXMuaW5wdXQueC52YWx1ZSxcblx0XHRcdFx0eTogdGhpcy5pbnB1dC55LnZhbHVlXG5cdFx0XHR9KTtcblxuXHRcdFx0dGhpcy5wYXJlbnQudmVydGljZXMucHVzaCh2dHgpO1xuXG5cdFx0XHQvLyBBZGQgdGhlIG5ldyB2ZXJ0ZXggaW5mb3JtYXRpb24gdG8gdGhlIHBpdm90cyBsaXN0XG5cdFx0XHR0aGlzLmFkZFBpdm90KHZ0eCk7XG5cblx0XHRcdC8vIGNsZWFyIHRoZSBpbnB1dHNcblx0XHRcdHRoaXMuaW5wdXQueC52YWx1ZSA9IFwiXCI7XG5cdFx0XHR0aGlzLmlucHV0LnkudmFsdWUgPSBcIlwiO1xuXG5cdFx0XHQvLyBBcHBseSBhbGwgdHJhbnNmb3JtYXRpb25zIHRvIHRoZSB2ZXJ0ZXhcblx0XHRcdHZ0eC51cGRhdGUoKTtcblxuXHRcdFx0Ly8gQXBwbHkgdGhlIGNlbnRlciBwaXZvdCBjYWxjdWxhdGlvbnNcblx0XHRcdHRoaXMuZGVmUGl2b3RQb3NpdGlvbigpO1xuXG5cdFx0XHQvLyBkcmF3XG5cdFx0XHR0aGlzLnBhcmVudC5jYW52YXMuZHJhdygpO1xuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ3N3aXRjaFBpdm90Jyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gc3dpdGNoUGl2b3QoZXZ0KSB7XG5cdFx0XHQvL1xuXHRcdFx0Ly8gZ2V0IHRoZSBwcmV2aW91cyBwaXZvdCB0byB1cGRhdGUgbGF0ZXJcblx0XHRcdC8vIGxldCBwcmV2aW91c1Bpdm90ID0gdGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXg7XG5cblx0XHRcdC8vIFN3aXRjaCB0byB0aGUgbmV3IHZlcnRleFxuXHRcdFx0dGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXggPSBPYmplY3QuY3JlYXRlKGV2dC50YXJnZXQuc2VsZWN0ZWRPcHRpb25zWzBdLnZlcnRleCk7XG5cblx0XHRcdHRoaXMuZGVmUGl2b3RQb3NpdGlvbigpO1xuXHRcdFx0dGhpcy5wYXJlbnQuY2FudmFzLmRyYXcoKTtcblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6ICdhZGRMaXN0ZW5lcnMnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBhZGRMaXN0ZW5lcnMoKSB7XG5cdFx0XHQvL1xuXHRcdFx0Ly8gSW5zZXJ0IFZlcnRleCBCdXR0b25cblx0XHRcdHRoaXMuaW5wdXQuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmFkZFZlcnRleCk7XG5cblx0XHRcdC8vIEluc2VyIEtleWJvYXJkIEVudGVyXG5cdFx0XHR0aGlzLmlucHV0LnguYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuYWRkVmVydGV4KTtcblx0XHRcdHRoaXMuaW5wdXQueS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5hZGRWZXJ0ZXgpO1xuXG5cdFx0XHQvLyBPUFRJT05TIChjbG9zZSBwYXRoICsgc2hvdyBncmlkKVxuXHRcdFx0dGhpcy5vcHRpb25zLmNsb3NlUGF0aC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5wYXJlbnQuY2FudmFzLmRyYXcpO1xuXHRcdFx0dGhpcy5vcHRpb25zLnNob3dHcmlkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnBhcmVudC5jYW52YXMuZHJhdyk7XG5cdFx0XHR0aGlzLm9wdGlvbnMuc2hvd051bWJlcnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMucGFyZW50LmNhbnZhcy5kcmF3KTtcblxuXHRcdFx0Ly8gUGl2b3Qgc2VsZWN0aW9uXG5cdFx0XHR0aGlzLnBpdm90c0xpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzLnN3aXRjaFBpdm90KTtcblx0XHR9XG5cdH0sIHtcblx0XHRrZXk6ICdpbml0Jyxcblx0XHR2YWx1ZTogZnVuY3Rpb24gaW5pdCgpIHtcblx0XHRcdC8vXG5cdFx0XHR0aGlzLnBhcmVudC5tYXNzQ2VudGVyID0gbmV3IF92ZXJ0ZXgyLmRlZmF1bHQodGhpcy5wYXJlbnQsIHtcblx0XHRcdFx0aW5kZXg6IFwibWFzc1wiLFxuXHRcdFx0XHRkaXNwbGF5TmFtZTogXCJcIixcblx0XHRcdFx0eDogMCxcblx0XHRcdFx0eTogMFxuXHRcdFx0fSk7XG5cdFx0XHR0aGlzLnBhcmVudC5tYXNzQ2VudGVyLmRpc3BsYXlOYW1lID0gXCJNYXNzIGNlbnRlclwiO1xuXHRcdFx0dGhpcy5hZGRQaXZvdCh0aGlzLnBhcmVudC5tYXNzQ2VudGVyKTtcblx0XHRcdHRoaXMuc2V0UGl2b3QodGhpcy5wYXJlbnQubWFzc0NlbnRlcik7XG5cblx0XHRcdHRoaXMucGFyZW50LmFic29sdXRlQ2VudGVyID0gbmV3IF92ZXJ0ZXgyLmRlZmF1bHQodGhpcy5wYXJlbnQsIHtcblx0XHRcdFx0aW5kZXg6IFwiYWJzb2x1dGVcIixcblx0XHRcdFx0ZGlzcGxheU5hbWU6IFwiXCIsXG5cdFx0XHRcdHg6IDAsXG5cdFx0XHRcdHk6IDBcblx0XHRcdH0pO1xuXHRcdFx0dGhpcy5wYXJlbnQuYWJzb2x1dGVDZW50ZXIuZGlzcGxheU5hbWUgPSBcIkFic29sdXRlIGNlbnRlclwiO1xuXHRcdFx0dGhpcy5hZGRQaXZvdCh0aGlzLnBhcmVudC5hYnNvbHV0ZUNlbnRlcik7XG5cdFx0fVxuXHR9XSk7XG5cblx0cmV0dXJuIElucHV0Q29udHJvbGxlcjtcbn0oKTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gSW5wdXRDb250cm9sbGVyO1xuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF90cmFuc2xhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpO1xuXG52YXIgX3RyYW5zbGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90cmFuc2xhdGUpO1xuXG52YXIgX3JvdGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXG52YXIgX3JvdGF0ZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9yb3RhdGUpO1xuXG52YXIgX3NjYWxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cbnZhciBfc2NhbGUyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2NhbGUpO1xuXG52YXIgX3NoZWFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMik7XG5cbnZhciBfc2hlYXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2hlYXIpO1xuXG52YXIgX3JlZmxlY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblxudmFyIF9yZWZsZWN0MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3JlZmxlY3QpO1xuXG52YXIgX21hdHJpeE9wZXJhdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX21hdHJpeE9wZXJhdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWF0cml4T3BlcmF0aW9ucyk7XG5cbnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3V0aWxzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3V0aWxzKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxudmFyIE1hdHJpeGVzQ29udHJvbGxlciA9IGZ1bmN0aW9uICgpIHtcblx0ZnVuY3Rpb24gTWF0cml4ZXNDb250cm9sbGVyKF9wYXJlbnQpIHtcblx0XHRfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWF0cml4ZXNDb250cm9sbGVyKTtcblxuXHRcdHRoaXMucGFyZW50ID0gX3BhcmVudDtcblxuXHRcdC8vIElucHV0IGVsZW1lbnRzICh3aGVyZSB0aGUgdXNlciBlbnRlcnMgdGhlIGRlc2lyZWQgdmVydGljZXMpXG5cdFx0dGhpcy5idXR0b25zID0ge1xuXHRcdFx0dHJhbnNsYXRlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRvLXRyYW5zbGF0ZVwiKSxcblx0XHRcdHJvdGF0ZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkby1yb3RhdGVcIiksXG5cdFx0XHRzY2FsZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkby1zY2FsZVwiKSxcblx0XHRcdHJlZmxlY3Q6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG8tcmVmbGVjdFwiKSxcblx0XHRcdHNoZWFyOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRvLXNoZWFyXCIpXG5cdFx0fTtcblxuXHRcdHRoaXMudHJhbnNmb3JtYXRpb25NYXRyaXggPSBbWzEsIDAsIDBdLCBbMCwgMSwgMF0sIFswLCAwLCAxXV07XG5cblx0XHQvLyBGdW5jdGlvbnMgQmluZHNcblx0XHR0aGlzLmFkZE1hdHJpeCA9IHRoaXMuYWRkTWF0cml4LmJpbmQodGhpcyk7XG5cblx0XHR0aGlzLmFkZExpc3RlbmVycygpO1xuXHR9XG5cblx0X2NyZWF0ZUNsYXNzKE1hdHJpeGVzQ29udHJvbGxlciwgW3tcblx0XHRrZXk6ICdhZGRNYXRyaXgnLFxuXHRcdHZhbHVlOiBmdW5jdGlvbiBhZGRNYXRyaXgoZXZ0KSB7XG5cdFx0XHQvL1xuXHRcdFx0dmFyIGFjdGlvbiA9IGV2dC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIik7XG5cblx0XHRcdHN3aXRjaCAoYWN0aW9uKSB7XG5cdFx0XHRcdGNhc2UgXCJkby10cmFuc2xhdGVcIjpcblx0XHRcdFx0XHR0aGlzLnBhcmVudC5tYXRyaXhlcy51bnNoaWZ0KG5ldyBfdHJhbnNsYXRlMi5kZWZhdWx0KHRoaXMucGFyZW50KSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJkby1yb3RhdGVcIjpcblx0XHRcdFx0XHR0aGlzLnBhcmVudC5tYXRyaXhlcy51bnNoaWZ0KG5ldyBfcm90YXRlMi5kZWZhdWx0KHRoaXMucGFyZW50KSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJkby1zY2FsZVwiOlxuXHRcdFx0XHRcdHRoaXMucGFyZW50Lm1hdHJpeGVzLnVuc2hpZnQobmV3IF9zY2FsZTIuZGVmYXVsdCh0aGlzLnBhcmVudCkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIFwiZG8tcmVmbGVjdFwiOlxuXHRcdFx0XHRcdHRoaXMucGFyZW50Lm1hdHJpeGVzLnVuc2hpZnQobmV3IF9yZWZsZWN0Mi5kZWZhdWx0KHRoaXMucGFyZW50KSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgXCJkby1zaGVhclwiOlxuXHRcdFx0XHRcdHRoaXMucGFyZW50Lm1hdHJpeGVzLnVuc2hpZnQobmV3IF9zaGVhcjIuZGVmYXVsdCh0aGlzLnBhcmVudCkpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fSwge1xuXHRcdGtleTogJ2FkZExpc3RlbmVycycsXG5cdFx0dmFsdWU6IGZ1bmN0aW9uIGFkZExpc3RlbmVycygpIHtcblx0XHRcdC8vXG5cdFx0XHQvLyBCdXR0b25zXG5cdFx0XHR0aGlzLmJ1dHRvbnMudHJhbnNsYXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmFkZE1hdHJpeCk7XG5cdFx0XHR0aGlzLmJ1dHRvbnMucm90YXRlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmFkZE1hdHJpeCk7XG5cdFx0XHR0aGlzLmJ1dHRvbnMuc2NhbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYWRkTWF0cml4KTtcblx0XHRcdHRoaXMuYnV0dG9ucy5yZWZsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmFkZE1hdHJpeCk7XG5cdFx0XHR0aGlzLmJ1dHRvbnMuc2hlYXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYWRkTWF0cml4KTtcblx0XHR9XG5cdH1dKTtcblxuXHRyZXR1cm4gTWF0cml4ZXNDb250cm9sbGVyO1xufSgpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBNYXRyaXhlc0NvbnRyb2xsZXI7XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgICAgICAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG52YXIgX2Jhc2ljTWF0cml4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxudmFyIF9iYXNpY01hdHJpeDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9iYXNpY01hdHJpeCk7XG5cbnZhciBfdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXG52YXIgX3V0aWxzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3V0aWxzKTtcblxudmFyIF9tYXRyaXhPcGVyYXRpb25zID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIF9tYXRyaXhPcGVyYXRpb25zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21hdHJpeE9wZXJhdGlvbnMpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbnZhciBUcmFuc2xhdGVNYXRyaXggPSBmdW5jdGlvbiAoX0Jhc2ljTWF0cml4KSB7XG4gICAgICAgIF9pbmhlcml0cyhUcmFuc2xhdGVNYXRyaXgsIF9CYXNpY01hdHJpeCk7XG5cbiAgICAgICAgZnVuY3Rpb24gVHJhbnNsYXRlTWF0cml4KF9wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVHJhbnNsYXRlTWF0cml4KTtcblxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUcmFuc2xhdGVNYXRyaXguX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUcmFuc2xhdGVNYXRyaXgpKS5jYWxsKHRoaXMsIF9wYXJlbnQpKTtcbiAgICAgICAgICAgICAgICAvL1xuXG5cbiAgICAgICAgICAgICAgICBfdGhpcy54ID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIF90aGlzLnkgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICAvLyBCaW5kc1xuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZU1hdHJpeCA9IF90aGlzLnVwZGF0ZU1hdHJpeC5iaW5kKF90aGlzKTtcblxuICAgICAgICAgICAgICAgIF90aGlzLmNyZWF0ZURPTUVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBfY3JlYXRlQ2xhc3MoVHJhbnNsYXRlTWF0cml4LCBbe1xuICAgICAgICAgICAgICAgIGtleTogJ2NyZWF0ZURPTUVsZW1lbnQnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVET01FbGVtZW50KCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGVzIGEgQmFzaWMgQ29udGFpbmVyIGFuZCByZXR1cm5zIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jcmVhdGVCYXNpY0RPTUVsZW1lbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnRpdGxlLmlubmVySFRNTCA9IFwiVHJhbnNsYXRlXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFggdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci52YWx1ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoeENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4VGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiWCBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB4Q29udGFpbmVyLmFwcGVuZENoaWxkKHhUZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54LnZhbHVlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHhDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy51cGRhdGVNYXRyaXgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBZIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIudmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHlDb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlkgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh5VGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueS52YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB5Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXBkYXRlTWF0cml4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBrZXk6ICd1cGRhdGVNYXRyaXgnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVNYXRyaXgoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0LCB2YWxpZGF0ZXMgaW5wdXQgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLngudmFsdWUgPSBfdXRpbHMyLmRlZmF1bHQudmFsaWROdW1iZXIodGhpcy54LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueS52YWx1ZSA9IF91dGlsczIuZGVmYXVsdC52YWxpZE51bWJlcih0aGlzLnkudmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0cml4U3RydWN0dXJlWzBdWzJdID0gcGFyc2VGbG9hdCh0aGlzLngudmFsdWUgfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVsxXVsyXSA9IHBhcnNlRmxvYXQodGhpcy55LnZhbHVlIHx8IDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5hcHBseVRyYW5zZm9ybXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1dKTtcblxuICAgICAgICByZXR1cm4gVHJhbnNsYXRlTWF0cml4O1xufShfYmFzaWNNYXRyaXgyLmRlZmF1bHQpO1xuXG5leHBvcnRzLmRlZmF1bHQgPSBUcmFuc2xhdGVNYXRyaXg7XG5cbi8qKiovIH0pLFxuLyogMTAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gICAgICAgIHZhbHVlOiB0cnVlXG59KTtcblxudmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblxudmFyIF9iYXNpY01hdHJpeCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cbnZhciBfYmFzaWNNYXRyaXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfYmFzaWNNYXRyaXgpO1xuXG52YXIgX3V0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxudmFyIF91dGlsczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF91dGlscyk7XG5cbnZhciBfbWF0cml4T3BlcmF0aW9ucyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cbnZhciBfbWF0cml4T3BlcmF0aW9uczIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9tYXRyaXhPcGVyYXRpb25zKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cbmZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXG52YXIgUm90YXRlTWF0cml4ID0gZnVuY3Rpb24gKF9CYXNpY01hdHJpeCkge1xuICAgICAgICBfaW5oZXJpdHMoUm90YXRlTWF0cml4LCBfQmFzaWNNYXRyaXgpO1xuXG4gICAgICAgIGZ1bmN0aW9uIFJvdGF0ZU1hdHJpeChfcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdGF0ZU1hdHJpeCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUm90YXRlTWF0cml4Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUm90YXRlTWF0cml4KSkuY2FsbCh0aGlzLCBfcGFyZW50KSk7XG4gICAgICAgICAgICAgICAgLy9cblxuXG4gICAgICAgICAgICAgICAgX3RoaXMuZGVncmVlcyA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgIC8vIEJpbmRzXG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlTWF0cml4ID0gX3RoaXMudXBkYXRlTWF0cml4LmJpbmQoX3RoaXMpO1xuXG4gICAgICAgICAgICAgICAgX3RoaXMuY3JlYXRlRE9NRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIF9jcmVhdGVDbGFzcyhSb3RhdGVNYXRyaXgsIFt7XG4gICAgICAgICAgICAgICAga2V5OiAnY3JlYXRlRE9NRWxlbWVudCcsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZURPTUVsZW1lbnQoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZXMgYSBCYXNpYyBDb250YWluZXIgYW5kIHJldHVybnMgaXRcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmNyZWF0ZUJhc2ljRE9NRWxlbWVudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIudGl0bGUuaW5uZXJIVE1MID0gXCJSb3RhdGVcIjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVncmVlcyB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZ0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIudmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlZ0NvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkZWdUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJkZWcgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVnQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlZ1RleHQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZ3JlZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZ3JlZXMuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZ3JlZXMudmFsdWUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVnQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZGVncmVlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZ3JlZXMuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXBkYXRlTWF0cml4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBrZXk6ICd1cGRhdGVNYXRyaXgnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVNYXRyaXgoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyc3QsIHZhbGlkYXRlcyBpbnB1dCB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVncmVlcy52YWx1ZSA9IF91dGlsczIuZGVmYXVsdC52YWxpZE51bWJlcih0aGlzLmRlZ3JlZXMudmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBwYXJzZUZsb2F0KHRoaXMuZGVncmVlcy52YWx1ZSkgfHwgMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0cml4U3RydWN0dXJlWzBdWzBdID0gTWF0aC5jb3MoX3V0aWxzMi5kZWZhdWx0LmRlZ1RvUmFkKHZhbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRyaXhTdHJ1Y3R1cmVbMF1bMV0gPSAtTWF0aC5zaW4oX3V0aWxzMi5kZWZhdWx0LmRlZ1RvUmFkKHZhbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRyaXhTdHJ1Y3R1cmVbMV1bMF0gPSBNYXRoLnNpbihfdXRpbHMyLmRlZmF1bHQuZGVnVG9SYWQodmFsKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVsxXVsxXSA9IE1hdGguY29zKF91dGlsczIuZGVmYXVsdC5kZWdUb1JhZCh2YWwpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXBwbHlUcmFuc2Zvcm1zKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XSk7XG5cbiAgICAgICAgcmV0dXJuIFJvdGF0ZU1hdHJpeDtcbn0oX2Jhc2ljTWF0cml4Mi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUm90YXRlTWF0cml4O1xuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfYmFzaWNNYXRyaXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2Jhc2ljTWF0cml4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jhc2ljTWF0cml4KTtcblxudmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfdXRpbHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbHMpO1xuXG52YXIgX21hdHJpeE9wZXJhdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX21hdHJpeE9wZXJhdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWF0cml4T3BlcmF0aW9ucyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFNjYWxlTWF0cml4ID0gZnVuY3Rpb24gKF9CYXNpY01hdHJpeCkge1xuICAgICAgICBfaW5oZXJpdHMoU2NhbGVNYXRyaXgsIF9CYXNpY01hdHJpeCk7XG5cbiAgICAgICAgZnVuY3Rpb24gU2NhbGVNYXRyaXgoX3BhcmVudCkge1xuICAgICAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTY2FsZU1hdHJpeCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU2NhbGVNYXRyaXguX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTY2FsZU1hdHJpeCkpLmNhbGwodGhpcywgX3BhcmVudCkpO1xuICAgICAgICAgICAgICAgIC8vXG5cblxuICAgICAgICAgICAgICAgIF90aGlzLnggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgX3RoaXMueSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgIC8vIEJpbmRzXG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlTWF0cml4ID0gX3RoaXMudXBkYXRlTWF0cml4LmJpbmQoX3RoaXMpO1xuXG4gICAgICAgICAgICAgICAgX3RoaXMuY3JlYXRlRE9NRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIF9jcmVhdGVDbGFzcyhTY2FsZU1hdHJpeCwgW3tcbiAgICAgICAgICAgICAgICBrZXk6ICdjcmVhdGVET01FbGVtZW50JyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRE9NRWxlbWVudCgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlcyBhIEJhc2ljIENvbnRhaW5lciBhbmQgcmV0dXJucyBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY3JlYXRlQmFzaWNET01FbGVtZW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci50aXRsZS5pbm5lckhUTUwgPSBcIlNjYWxlXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFggdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci52YWx1ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoeENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4VGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiWCBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB4Q29udGFpbmVyLmFwcGVuZENoaWxkKHhUZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54LnZhbHVlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHhDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy51cGRhdGVNYXRyaXgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBZIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIudmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHlDb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlkgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh5VGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueS52YWx1ZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICB5Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXBkYXRlTWF0cml4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBrZXk6ICd1cGRhdGVNYXRyaXgnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVNYXRyaXgoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0LCB2YWxpZGF0ZXMgaW5wdXQgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLngudmFsdWUgPSBfdXRpbHMyLmRlZmF1bHQudmFsaWROdW1iZXIodGhpcy54LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueS52YWx1ZSA9IF91dGlsczIuZGVmYXVsdC52YWxpZE51bWJlcih0aGlzLnkudmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0cml4U3RydWN0dXJlWzBdWzBdID0gcGFyc2VGbG9hdCh0aGlzLngudmFsdWUgfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVsxXVsxXSA9IHBhcnNlRmxvYXQodGhpcy55LnZhbHVlIHx8IDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5hcHBseVRyYW5zZm9ybXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1dKTtcblxuICAgICAgICByZXR1cm4gU2NhbGVNYXRyaXg7XG59KF9iYXNpY01hdHJpeDIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNjYWxlTWF0cml4O1xuXG4vKioqLyB9KSxcbi8qIDEyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfYmFzaWNNYXRyaXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2Jhc2ljTWF0cml4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jhc2ljTWF0cml4KTtcblxudmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfdXRpbHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbHMpO1xuXG52YXIgX21hdHJpeE9wZXJhdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX21hdHJpeE9wZXJhdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWF0cml4T3BlcmF0aW9ucyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFNoZWFyTWF0cml4ID0gZnVuY3Rpb24gKF9CYXNpY01hdHJpeCkge1xuICAgICAgICBfaW5oZXJpdHMoU2hlYXJNYXRyaXgsIF9CYXNpY01hdHJpeCk7XG5cbiAgICAgICAgZnVuY3Rpb24gU2hlYXJNYXRyaXgoX3BhcmVudCkge1xuICAgICAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTaGVhck1hdHJpeCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU2hlYXJNYXRyaXguX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTaGVhck1hdHJpeCkpLmNhbGwodGhpcywgX3BhcmVudCkpO1xuICAgICAgICAgICAgICAgIC8vXG5cblxuICAgICAgICAgICAgICAgIF90aGlzLnggPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgX3RoaXMueSA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICAgIC8vIEJpbmRzXG4gICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlTWF0cml4ID0gX3RoaXMudXBkYXRlTWF0cml4LmJpbmQoX3RoaXMpO1xuXG4gICAgICAgICAgICAgICAgX3RoaXMuY3JlYXRlRE9NRWxlbWVudCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIF9jcmVhdGVDbGFzcyhTaGVhck1hdHJpeCwgW3tcbiAgICAgICAgICAgICAgICBrZXk6ICdjcmVhdGVET01FbGVtZW50JyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY3JlYXRlRE9NRWxlbWVudCgpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY3JlYXRlcyBhIEJhc2ljIENvbnRhaW5lciBhbmQgcmV0dXJucyBpdFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRoaXMuY3JlYXRlQmFzaWNET01FbGVtZW50KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci50aXRsZS5pbm5lckhUTUwgPSBcIlNoZWFyXCI7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFggdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci52YWx1ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoeENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB4VGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiWCBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB4Q29udGFpbmVyLmFwcGVuZENoaWxkKHhUZXh0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy54LnZhbHVlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHhDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy54KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy51cGRhdGVNYXRyaXgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBZIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIudmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHlDb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgeVRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlkgXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh5VGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueS52YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB5Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMueSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnkuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXBkYXRlTWF0cml4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBrZXk6ICd1cGRhdGVNYXRyaXgnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVNYXRyaXgoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0LCB2YWxpZGF0ZXMgaW5wdXQgdmFsdWVzXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLngudmFsdWUgPSBfdXRpbHMyLmRlZmF1bHQudmFsaWROdW1iZXIodGhpcy54LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMueS52YWx1ZSA9IF91dGlsczIuZGVmYXVsdC52YWxpZE51bWJlcih0aGlzLnkudmFsdWUpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSB2YWx1ZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWF0cml4U3RydWN0dXJlWzBdWzFdID0gcGFyc2VGbG9hdCh0aGlzLngudmFsdWUgfHwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVsxXVswXSA9IHBhcnNlRmxvYXQodGhpcy55LnZhbHVlIHx8IDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5hcHBseVRyYW5zZm9ybXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1dKTtcblxuICAgICAgICByZXR1cm4gU2hlYXJNYXRyaXg7XG59KF9iYXNpY01hdHJpeDIuZGVmYXVsdCk7XG5cbmV4cG9ydHMuZGVmYXVsdCA9IFNoZWFyTWF0cml4O1xuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICAgICAgICB2YWx1ZTogdHJ1ZVxufSk7XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbnZhciBfYmFzaWNNYXRyaXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG52YXIgX2Jhc2ljTWF0cml4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Jhc2ljTWF0cml4KTtcblxudmFyIF91dGlscyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cbnZhciBfdXRpbHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdXRpbHMpO1xuXG52YXIgX21hdHJpeE9wZXJhdGlvbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG52YXIgX21hdHJpeE9wZXJhdGlvbnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbWF0cml4T3BlcmF0aW9ucyk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxudmFyIFJvdGF0ZU1hdHJpeCA9IGZ1bmN0aW9uIChfQmFzaWNNYXRyaXgpIHtcbiAgICAgICAgX2luaGVyaXRzKFJvdGF0ZU1hdHJpeCwgX0Jhc2ljTWF0cml4KTtcblxuICAgICAgICBmdW5jdGlvbiBSb3RhdGVNYXRyaXgoX3BhcmVudCkge1xuICAgICAgICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3RhdGVNYXRyaXgpO1xuXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFJvdGF0ZU1hdHJpeC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFJvdGF0ZU1hdHJpeCkpLmNhbGwodGhpcywgX3BhcmVudCkpO1xuICAgICAgICAgICAgICAgIC8vXG5cblxuICAgICAgICAgICAgICAgIF90aGlzLmRlZ3JlZXMgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgICAgICAvLyBCaW5kc1xuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZU1hdHJpeCA9IF90aGlzLnVwZGF0ZU1hdHJpeC5iaW5kKF90aGlzKTtcblxuICAgICAgICAgICAgICAgIF90aGlzLmNyZWF0ZURPTUVsZW1lbnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM7XG4gICAgICAgIH1cblxuICAgICAgICBfY3JlYXRlQ2xhc3MoUm90YXRlTWF0cml4LCBbe1xuICAgICAgICAgICAgICAgIGtleTogJ2NyZWF0ZURPTUVsZW1lbnQnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVET01FbGVtZW50KCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGVzIGEgQmFzaWMgQ29udGFpbmVyIGFuZCByZXR1cm5zIGl0XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jcmVhdGVCYXNpY0RPTUVsZW1lbnQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnRpdGxlLmlubmVySFRNTCA9IFwiUmVmbGVjdFwiO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWdyZWVzIHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGVnQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci52YWx1ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVnQ29udGFpbmVyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRlZ1RleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcImRlZyBcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWdDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVnVGV4dCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVncmVlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVncmVlcy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVncmVlcy52YWx1ZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWdDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5kZWdyZWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVncmVlcy5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy51cGRhdGVNYXRyaXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIGtleTogJ3VwZGF0ZU1hdHJpeCcsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZU1hdHJpeCgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJzdCwgdmFsaWRhdGVzIGlucHV0IHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWdyZWVzLnZhbHVlID0gX3V0aWxzMi5kZWZhdWx0LnZhbGlkTnVtYmVyKHRoaXMuZGVncmVlcy52YWx1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IHZhbHVlc1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IHBhcnNlRmxvYXQodGhpcy5kZWdyZWVzLnZhbHVlKSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRyaXhTdHJ1Y3R1cmVbMF1bMF0gPSBNYXRoLmNvcyhfdXRpbHMyLmRlZmF1bHQuZGVnVG9SYWQodmFsKSAqIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRyaXhTdHJ1Y3R1cmVbMF1bMV0gPSBNYXRoLnNpbihfdXRpbHMyLmRlZmF1bHQuZGVnVG9SYWQodmFsKSAqIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRyaXhTdHJ1Y3R1cmVbMV1bMF0gPSBNYXRoLnNpbihfdXRpbHMyLmRlZmF1bHQuZGVnVG9SYWQodmFsKSAqIDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRyaXhTdHJ1Y3R1cmVbMV1bMV0gPSAtTWF0aC5jb3MoX3V0aWxzMi5kZWZhdWx0LmRlZ1RvUmFkKHZhbCkgKiAyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuYXBwbHlUcmFuc2Zvcm1zKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9XSk7XG5cbiAgICAgICAgcmV0dXJuIFJvdGF0ZU1hdHJpeDtcbn0oX2Jhc2ljTWF0cml4Mi5kZWZhdWx0KTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gUm90YXRlTWF0cml4O1xuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGdyYXBoYXRyaXguYnVuZGxlLmpzIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7XG4gXHRcdFx0XHRjb25maWd1cmFibGU6IGZhbHNlLFxuIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbiBcdFx0XHRcdGdldDogZ2V0dGVyXG4gXHRcdFx0fSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNCk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gd2VicGFjay9ib290c3RyYXAgYWM2MjIyNjczM2Y2NTgwYzc1NmEiLCJjbGFzcyBNYXRyaXhPcGVyYXRpb25zIHtcclxuXHJcbiAgICBzdGF0aWMgbXVsdGlwbHlNYXRyaXhlcyhfbTEsIF9tMikge1xyXG4gICAgICAgIGxldCByZXN1bHRNYXRyaXggPSBbW10sW10sW11dO1xyXG4gICAgICAgIGxldCBzdHJpbmdQcm9vZiA9IFtbXSxbXSxbXV07XHJcbiAgICAgICAgbGV0IGksIGosIGs7XHJcbiAgICAgICAgbGV0IGNvbHVtbnMgPSBNYXRoLm1pbihfbTFbMF0ubGVuZ3RoLCBfbTJbMF0ubGVuZ3RoKTtcclxuXHJcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgb25seSBvbmUgbWF0cml4LCB0aGVuIHJldHVybiB0aGUgb25seSBvbmUgYW5kIGFib3J0XHJcbiAgICAgICAgaWYgKCFfbTIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9tMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBfbTEubGVuZ3RoOyBpKyspIHsgLy8gbGluZVxyXG4gICAgICAgICAgICBmb3IgKGogPSAwOyBqIDwgY29sdW1uczsgaisrKSB7IC8vIGNvbHVtbiBfbTFcclxuICAgICAgICAgICAgICAgIHJlc3VsdE1hdHJpeFtpXVtqXSA9IF9tMVtpXVswXSpfbTJbMF1bal07XHJcbiAgICAgICAgICAgICAgICBmb3IgKGsgPSAxOyBrIDwgX20yLmxlbmd0aDsgaysrKSB7IC8vIGNvbHVtbiBfbTJcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRNYXRyaXhbaV1bal0gKz0gX20xW2ldW2tdKl9tMltrXVtqXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdE1hdHJpeDtcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgdmVydGV4QXBwbHlUcmFuc2Zvcm1hdGlvbnMoX2xpc3QsIF90cmFuc2Zvcm1hdGlvbk1hdHJpeCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBfbGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgbGV0IHZlcnRleE1hdHJpeCA9IFtcclxuICAgICAgICAgICAgICAgIFtfbGlzdFtpXS54XSxcclxuICAgICAgICAgICAgICAgIFtfbGlzdFtpXS55XSxcclxuICAgICAgICAgICAgICAgIFsxXVxyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBsZXQgcmVzdWx0ID0gdGhpcy5tdWx0aXBseU1hdHJpeGVzKF90cmFuc2Zvcm1hdGlvbk1hdHJpeCwgdmVydGV4TWF0cml4KTtcclxuXHJcbiAgICAgICAgICAgIF9saXN0W2ldLm1vZGlmaWVkWCA9IHJlc3VsdFswXVswXTtcclxuICAgICAgICAgICAgX2xpc3RbaV0ubW9kaWZpZWRZID0gcmVzdWx0WzFdWzBdO1xyXG5cclxuICAgICAgICAgICAgX2xpc3RbaV0udXBkYXRlKCk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWF0cml4T3BlcmF0aW9ucztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvbWF0cml4ZXMvbWF0cml4LW9wZXJhdGlvbnMuanMiLCJjbGFzcyBVdGlscyB7XHJcbiAgICBcclxuICAgIC8vIFJldHVybnMgb25seSB2YWxpZCBudW1iZXIgcmVsYXRlZCBjaGFyYWN0ZXJzXHJcbiAgICBzdGF0aWMgdmFsaWROdW1iZXIoX3ZhbHVlKSB7XHJcbiAgICAgICAgLy9cclxuICAgICAgICBsZXQgdmFsaWRDaGFycyA9IChcIjEyMzQ1Njc4OTAuLC1cIikuc3BsaXQoXCJcIik7XHJcbiAgICAgICAgbGV0IGVudGVyZWRDaGFycyA9IF92YWx1ZS5zcGxpdChcIlwiKSB8fCBbXTtcclxuICAgICAgICBsZXQgZG90cyA9IDA7XHJcblxyXG4gICAgICAgIC8vIFZlcmlmaWVzIGlmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmUgZG90IGluIHRoZSBhcnJheVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiAoZW50ZXJlZENoYXJzLm1hcCgoX2NoYXIsIGkpID0+IHtcclxuICAgICAgICAgICAgaWYgKHZhbGlkQ2hhcnMuaW5kZXhPZihfY2hhcikgIT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gY29udmVydHMgY29tbWEgaW50cm8gZG90XHJcbiAgICAgICAgICAgICAgICBpZiAoX2NoYXIgPT0gXCIsXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBfY2hhciA9IFwiLlwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmIGl0J3MgYSBkb3QsIGluY3JlYXNlcyB0aGUgbnVtYmVyIG9mIGRvdHMgcHJlc2VudCwgdG8gYXNzdXJlIHRoYXQgdGhlcmUgd2lsbCBiZSBvbmx5IG9uZSBwcmVzZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoX2NoYXIgPT0gXCIuXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb3RzKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIGZpcnN0IGRpZ2l0ZWQgY2hhcmFjdGVyIGlzIGEgZG90LCBhcHBlbmRzIGEgbnVtYmVyIDAgZmlyc3RcclxuICAgICAgICAgICAgICAgIGlmIChfY2hhciA9PSBcIi5cIiAmJiBpID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBfY2hhciA9IFwiMFwiICsgX2NoYXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYgdGhlIG51bWJlciBvZiBkb3RzIGlzIGdyZWF0ZXIgdGhhbiBvbmUsIHNraXBzIHRvIHRoZSBuZXh0IGNoYXJhY3RlclxyXG4gICAgICAgICAgICAgICAgaWYgKF9jaGFyID09IFwiLlwiICYmIGRvdHMgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NoYXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSkuam9pbihcIlwiKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZGVnVG9SYWQoX3ZhbCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgcmV0dXJuIChfdmFsIC8gMTgwKSAqIE1hdGguUEk7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHJhZFRvRGVnKF92YWwpIHtcclxuICAgICAgICAvL1xyXG4gICAgICAgIHJldHVybiAoX3ZhbCAvIE1hdGguUEkpICogMTgwO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVdGlscztcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvbWF0cml4ZXMvdXRpbHMuanMiLCJpbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCBNYXRyaXhPcGVyYXRpb25zIGZyb20gJy4vbWF0cml4LW9wZXJhdGlvbnMnO1xyXG5cclxuY2xhc3MgQmFzaWNNYXRyaXgge1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihfcGFyZW50KSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBfcGFyZW50O1xyXG4gICAgICAgIHRoaXMuRE9NRWxlbWVudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzVG9VcGRhdGUgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZSA9IFtcclxuICAgICAgICAgICAgWzEsIDAsIDBdLFxyXG4gICAgICAgICAgICBbMCwgMSwgMF0sXHJcbiAgICAgICAgICAgIFswLCAwLCAxXVxyXG4gICAgICAgIF1cclxuXHJcbiAgICAgICAgLy9CSU5EU1xyXG4gICAgICAgIHRoaXMuZXJhc2UgPSB0aGlzLmVyYXNlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5kcmFnID0gdGhpcy5kcmFnLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgZHJhZyhldnQpIHtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXZ0KTtcclxuICAgICAgICBpZiAoZXZ0LmJ1dHRvbiA9PSAyKSB7XHJcbiAgICAgICAgICAgIGV2dC5jdXJyZW50VGFyZ2V0XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVyYXNlKCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIHJlbW92ZSBtYXRyaXggZnJvbSB0aGUgRE9NXHJcbiAgICAgICAgdGhpcy5ET01FbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5ET01FbGVtZW50KTtcclxuXHJcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBtYXRyaXggZnJvbSB0aGUgYXBwJ3MgbWF0cml4ZXMgbGlzdFxyXG4gICAgICAgIGxldCBpZHggPSB0aGlzLnBhcmVudC5tYXRyaXhlcy5pbmRleE9mKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucGFyZW50Lm1hdHJpeGVzLnNwbGljZShpZHgsIDEpO1xyXG5cclxuICAgICAgICAvLyBBcHBseSB0cmFuc2Zvcm1zIC0gVXBkYXRlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeFxyXG4gICAgICAgIHRoaXMucGFyZW50LmFwcGx5VHJhbnNmb3JtcygpO1xyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnBhcmVudC5jYW52YXMuZHJhdyk7XHJcbiAgICAgICAgLy8gdGhpcy5wYXJlbnQuY2FudmFzLmRyYXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVCYXNpY0RPTUVsZW1lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5ET01FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB0aGlzLkRPTUVsZW1lbnQuY2xhc3NOYW1lID0gXCJtYXRyaXgtaW5wdXRcIjtcclxuICAgICAgICB0aGlzLkRPTUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIHRoaXMuZHJhZywgdHJ1ZSlcclxuXHJcbiAgICAgICAgLy8gaW5zZXJ0IGluIHRoZSBET00uIElmIG5vIG1hdHJpeGVzIGFyZSBwcmVzZW50LCBqdXN0IGFwcGVuZC5cclxuICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbWF0cml4ZXMgcHJlc2VudCwgdXNlIGluc2VydEJlZm9yZSBvZiAwIChzaG91bGQgY29tZSBiZWZvcmUgdGhlIGZpcnN0IG9uZSlcclxuICAgICAgICBsZXQgaG9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtYXRyaXhlcy1lbGVtZW50cy1ob2xkZXJcIik7XHJcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Lm1hdHJpeGVzLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGhvbGRlci5hcHBlbmRDaGlsZCh0aGlzLkRPTUVsZW1lbnQpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGhvbGRlci5pbnNlcnRCZWZvcmUodGhpcy5ET01FbGVtZW50LCB0aGlzLnBhcmVudC5tYXRyaXhlc1swXS5ET01FbGVtZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJoNVwiKTtcclxuICAgICAgICB0aGlzLkRPTUVsZW1lbnQuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG5cclxuICAgICAgICBsZXQgdmFsdWVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICB2YWx1ZXNDb250YWluZXIuY2xhc3NOYW1lID0gXCJ2YWx1ZXMtaW5wdXQtY29udGFpbmVyXCI7XHJcbiAgICAgICAgdGhpcy5ET01FbGVtZW50LmFwcGVuZENoaWxkKHZhbHVlc0NvbnRhaW5lcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IGVyYXNlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBlcmFzZS5jbGFzc05hbWUgPSBcImVyYXNlLW1hdHJpeFwiO1xyXG4gICAgICAgIGVyYXNlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmVyYXNlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMuRE9NRWxlbWVudC5hcHBlbmRDaGlsZChlcmFzZSk7XHJcblxyXG4gICAgICAgIHJldHVybiAoe1xyXG4gICAgICAgICAgICBcInZhbHVlc0NvbnRhaW5lclwiOiB2YWx1ZXNDb250YWluZXIsXHJcbiAgICAgICAgICAgIFwidGl0bGVcIjogdGl0bGVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVNYXRyaXgoKSB7fVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBCYXNpY01hdHJpeDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvbWF0cml4ZXMvYmFzaWMtbWF0cml4LmpzIiwiLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgVmVydGV4IGFuZCBhdXRvbWF0aWNhbGx5IGluc3RlcnMgaXQgaW50byB0aGUgRE9NXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBfcGFyZW50IC0gVGhlIGNhbGxlciBvYmplY3RcclxuICogQHBhcmFtIHtPYmplY3R9IF9wYXJhbXMgLSB0aGUgcHJvcGVydGllcyBvZiB0aGUgdmVydGV4XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBfcGFyYW1zLmluZGV4IC0gVGhlIGluZGV4IG9mIHRoZSB2ZXJ0ZXggaW4gdGhlIGdsb2JhbCB2ZXJ0aWNlcyBsaXN0XHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBfcGFyYW1zLnggLSBUaGUgWCBjb29yZGluYXRlIG9mIHRoZSB2ZXJ0ZXhcclxuICogQHBhcmFtIHtudW1iZXJ9IF9wYXJhbXMueSAtIFRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHZlcnRleFxyXG4gKi9cclxuXHJcbmNsYXNzIFZlcnRleCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX3BhcmVudCwgX3BhcmFtcykge1xyXG5cclxuICAgICAgICB0aGlzLnBhcmVudCA9IF9wYXJlbnQ7XHJcblxyXG4gICAgICAgIHRoaXMueCA9IHBhcnNlRmxvYXQoX3BhcmFtcy54KTtcclxuICAgICAgICB0aGlzLnkgPSBwYXJzZUZsb2F0KF9wYXJhbXMueSk7XHJcbiAgICAgICAgdGhpcy5tb2RpZmllZFggPSBwYXJzZUZsb2F0KF9wYXJhbXMueCk7XHJcbiAgICAgICAgdGhpcy5tb2RpZmllZFkgPSBwYXJzZUZsb2F0KF9wYXJhbXMueSk7XHJcbiAgICAgICAgdGhpcy5ET01FbGVtZW50ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuaW5kZXggPSBfcGFyYW1zLmluZGV4O1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSBfcGFyYW1zLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHNUb1VwZGF0ZSA9IFtdO1xyXG5cclxuICAgICAgICBpZiAoX3BhcmFtcy5pbmRleCAhPSAtMSAmJiAhaXNOYU4oX3BhcmFtcy5pbmRleCkpIHtcclxuICAgICAgICAgICAgdGhpcy5ET01FbGVtZW50ID0gdGhpcy5jcmVhdGVET01FbGVtZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBCSU5EU1xyXG4gICAgICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVET01FbGVtZW50KCkge1xyXG4gICAgICAgIGxldCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcInZlcnRleFwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidmVydGljZXMtY29udGFpbmVyXCIpLmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIGxldCBpbmRleCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgaW5kZXguY2xhc3NOYW1lID0gXCJpbmRleFwiO1xyXG4gICAgICAgIGluZGV4LmlubmVySFRNTCA9IGAke3RoaXMuaW5kZXh9YDtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzVG9VcGRhdGUucHVzaCh7ZWxlbWVudDogaW5kZXgsIGtleTogXCJpbmRleFwiLCBwcmVWYWx1ZVRleHQ6IFwiXCJ9KTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5kZXgpO1xyXG5cclxuICAgICAgICBsZXQgcG9pbnRYID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwb2ludFguY2xhc3NOYW1lID0gXCJ2YWx1ZSBvcmlnaW5hbFwiO1xyXG4gICAgICAgIHBvaW50WC5pbm5lckhUTUwgPSBgWDogJHt0aGlzLnh9YDtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzVG9VcGRhdGUucHVzaCh7ZWxlbWVudDogcG9pbnRYLCBrZXk6IFwieFwiLCBwcmVWYWx1ZVRleHQ6IFwiWDogXCJ9KTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9pbnRYKTtcclxuXHJcbiAgICAgICAgbGV0IE1vZGlmaWVkUG9pbnRYID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBNb2RpZmllZFBvaW50WC5jbGFzc05hbWUgPSBcInZhbHVlXCI7XHJcbiAgICAgICAgTW9kaWZpZWRQb2ludFguaW5uZXJIVE1MID0gYFg6ICR7dGhpcy5tb2RpZmllZFh9YDtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzVG9VcGRhdGUucHVzaCh7ZWxlbWVudDogTW9kaWZpZWRQb2ludFgsIGtleTogXCJtb2RpZmllZFhcIiwgcHJlVmFsdWVUZXh0OiBcIlg6IFwifSk7XHJcbiAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKE1vZGlmaWVkUG9pbnRYKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgcG9pbnRZID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBwb2ludFkuY2xhc3NOYW1lID0gXCJ2YWx1ZSBvcmlnaW5hbFwiO1xyXG4gICAgICAgIHBvaW50WS5pbm5lckhUTUwgPSBgWTogJHt0aGlzLnl9YDtcclxuICAgICAgICB0aGlzLmVsZW1lbnRzVG9VcGRhdGUucHVzaCh7ZWxlbWVudDogcG9pbnRZLCBrZXk6IFwieVwiLCBwcmVWYWx1ZVRleHQ6IFwiWTogXCJ9KTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocG9pbnRZKTtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgbW9kaWZpZWRQb2ludFkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIG1vZGlmaWVkUG9pbnRZLmNsYXNzTmFtZSA9IFwidmFsdWVcIjtcclxuICAgICAgICBtb2RpZmllZFBvaW50WS5pbm5lckhUTUwgPSBgWTogJHt0aGlzLm1vZGlmaWVkWX1gO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudHNUb1VwZGF0ZS5wdXNoKHtlbGVtZW50OiBtb2RpZmllZFBvaW50WSwga2V5OiBcIm1vZGlmaWVkWVwiLCBwcmVWYWx1ZVRleHQ6IFwiWTogXCJ9KTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobW9kaWZpZWRQb2ludFkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCBlcmFzZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZXJhc2UuY2xhc3NOYW1lID0gXCJlcmFzZS1wb2ludHNcIjtcclxuICAgICAgICBlcmFzZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5lcmFzZS5iaW5kKHRoaXMpKTtcclxuICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZXJhc2UpO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHVwZGF0ZXMgdmlzaWJsZSB2YWx1ZXMgKERPTSBFbGVtZW50KVxyXG4gICAgdXBkYXRlKCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLmVsZW1lbnRzVG9VcGRhdGUpIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0ua2V5ID09IFwiaW5kZXhcIikge1xyXG4gICAgICAgICAgICAgICAgaXRlbS5lbGVtZW50LmlubmVySFRNTCA9IGl0ZW0ucHJlVmFsdWVUZXh0ICsgdGhpc1tpdGVtLmtleV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLmVsZW1lbnQuaW5uZXJIVE1MID0gaXRlbS5wcmVWYWx1ZVRleHQgKyB0aGlzW2l0ZW0ua2V5XS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQaXZvdCBhc3NpZ25tZW50KioqXHJcbiAgICAgICAgLy8gZ2V0IHRoZSBzZWxlY3RlZCBvcHRpb25cclxuICAgICAgICBsZXQgY3VycmVudFBpdm90ID0gdGhpcy5wYXJlbnQuaW5wdXRDb250cm9sbGVyLnBpdm90c0xpc3Quc2VsZWN0ZWRPcHRpb25zWzBdO1xyXG4gICAgICAgIGlmIChjdXJyZW50UGl2b3QgJiYgdGhpcy5ET01FbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50UGl2b3QudmVydGV4ID09PSB0aGlzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLkRPTUVsZW1lbnQuc2V0QXR0cmlidXRlKFwiZGF0YS1waXZvdFwiLCBcIlwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuRE9NRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXBpdm90XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGVyYXNlKCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gR2V0cyB0aGUgb2JqZWN0IGluZGV4IGluIHRoZSBnbG9iYWwgbGlzdFxyXG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMucGFyZW50LnZlcnRpY2VzLmluZGV4T2YodGhpcyk7XHJcblxyXG4gICAgICAgIC8vIFJlbW92ZXMgaXQgZnJvbSB0aGUgRE9NXHJcbiAgICAgICAgdGhpcy5ET01FbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5ET01FbGVtZW50KTtcclxuXHJcbiAgICAgICAgLy8gUmVtb3ZlcyBpdCBmcm9tIHRoZSBnbG9iYWwgdmVydGljZXMgbGlzdFxyXG4gICAgICAgIHRoaXMucGFyZW50LnZlcnRpY2VzLnNwbGljZShpbmRleCwgMSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZXMgYWxsIHRoZSB2ZXJ0aWNlcyBmcm9tIHRoZSBsaXN0XHJcbiAgICAgICAgLy8gdG8gcmVmcmVzaCB0aGUgaW5kZXhlc1xyXG4gICAgICAgIGZvciAobGV0IGVsIG9mIHRoaXMucGFyZW50LnZlcnRpY2VzKSB7XHJcbiAgICAgICAgICAgIGVsLmluZGV4ID0gdGhpcy5wYXJlbnQudmVydGljZXMuaW5kZXhPZihlbCkgKyAxO1xyXG4gICAgICAgICAgICBlbC51cGRhdGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHJlbW92ZSBmcm9tIHRoZSBzZWxlY3QgcGl2b3RcclxuICAgICAgICB0aGlzLnBhcmVudC5pbnB1dENvbnRyb2xsZXIucGl2b3RzTGlzdC5yZW1vdmUoaW5kZXgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgcGl2b3RzIEluZGV4ZXNcclxuICAgICAgICB0aGlzLnBhcmVudC5pbnB1dENvbnRyb2xsZXIudXBkYXRlUGl2b3RzSW5kZXhlcygpO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB0aGlzLnBhcmVudC5jYW52YXMuZHJhdygpO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVmVydGV4O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy92ZXJ0ZXguanMiLCJpbXBvcnQgJy4uL2Nzcy9nbG9iYWwuc2Nzcyc7XHJcblxyXG5pbXBvcnQgQ2FudmFzIGZyb20gJy4vY2FudmFzJztcclxuaW1wb3J0IFZlcnRleCBmcm9tICcuL3ZlcnRleCc7XHJcbmltcG9ydCBJbnB1dENvbnRyb2xsZXIgZnJvbSAnLi9pbnB1dC1jb250cm9sbGVyJztcclxuaW1wb3J0IE1hdHJpeGVzQ29udHJvbGxlciBmcm9tICcuL21hdHJpeGVzLWNvbnRyb2xsZXInO1xyXG5pbXBvcnQgTWF0cml4T3BlcmF0aW9ucyBmcm9tICcuL21hdHJpeGVzL21hdHJpeC1vcGVyYXRpb25zJztcclxuXHJcbmNsYXNzIEdyYXBoYXRyaXgge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yICgpIHtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSB1bmRlZmluZWQ7IC8vIHRoZSBkcmF3aW5nL3Bsb3R0aW5nIGNhbnZhc1xyXG4gICAgICAgIHRoaXMuaW5wdXRDb250cm9sbGVyID0gdW5kZWZpbmVkOyAvLyBDb250cm9scyB0aGUgdXNlciBpbnRlcmFjdGlvbiBpbiB0aGUgaW5wdXQgdGFiXHJcbiAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IFtdOyAvLyBMaXN0IG9mIGNyZWF0ZWQgdmVydGljZXMgYnkgdGhlIHVzZXJcclxuICAgICAgICB0aGlzLm1hdHJpeGVzID0gW107XHJcbiAgICAgICAgdGhpcy5waXZvdFZlcnRleCA9IHVuZGVmaW5lZDsgLy8gUG9pbnRzIHRvIHRoZSBjdXJyZW50IHZlcnRleCBtYXJrZWQgYXMgcGl2b3RcclxuICAgICAgICB0aGlzLm1hc3NDZW50ZXIgPSB1bmRlZmluZWQ7IC8vIEEgdmVydGV4IHRoYXQgaXMgdGhlIHBvbHlnb24gbWFzcyBjZW50ZXJcclxuICAgICAgICB0aGlzLmFic29sdXRlQ2VudGVyID0gdW5kZWZpbmVkOyAvLyBBIHZlcnRleCB0aGF0IGlzIHRoZSBwb2x5Z29uIGFic29sdXRlIGNlbnRlclxyXG4gICAgfVxyXG5cclxuICAgIGZha2VTdGFydCgpIHtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRGYWtlKF94LCBfeSkge1xyXG4gICAgICAgICAgICBfdGhpcy5pbnB1dENvbnRyb2xsZXIuaW5wdXQueC52YWx1ZSA9IF94O1xyXG4gICAgICAgICAgICBfdGhpcy5pbnB1dENvbnRyb2xsZXIuaW5wdXQueS52YWx1ZSA9IF95O1xyXG4gICAgICAgICAgICBfdGhpcy5pbnB1dENvbnRyb2xsZXIuYWRkVmVydGV4KHt0eXBlOiBcImZha2VcIiwga2V5Y29kZTogLTF9KTtcclxuICAgICAgICAgICAgX3RoaXMuaW5wdXRDb250cm9sbGVyLmlucHV0LngudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgICAgICBfdGhpcy5pbnB1dENvbnRyb2xsZXIuaW5wdXQueS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBhZGRGYWtlKDEsIDEpO1xyXG4gICAgICAgIGFkZEZha2UoMywgMSk7XHJcbiAgICAgICAgYWRkRmFrZSgzLCAzKTtcclxuICAgICAgICBhZGRGYWtlKDMuNSwgMyk7XHJcbiAgICAgICAgYWRkRmFrZSgyLCA1KTtcclxuICAgICAgICBhZGRGYWtlKDAuNSwgMyk7XHJcbiAgICAgICAgYWRkRmFrZSgxLCAzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgYXBwbHlUcmFuc2Zvcm1zKCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgbGV0IGk7XHJcblxyXG4gICAgICAgIC8vIHNldHMgdGhlIGZpcnN0IG1hdHJpeCB0byBtdWx0aXBseSBhcyB0aGUgbGFzdCBvbmUgaW4gdGhlIG1hdHJpeGVzIGFycmF5XHJcbiAgICAgICAgbGV0IHJlc3VsdE1hdHJpeCA9IFtcclxuICAgICAgICAgICAgWzEsIDAsIDBdLFxyXG4gICAgICAgICAgICBbMCwgMSwgMF0sXHJcbiAgICAgICAgICAgIFswLCAwLCAxXVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vIGlmICh0aGlzLm1hdHJpeGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAvLyAgICAgcmVzdWx0TWF0cml4ID0gdGhpcy5tYXRyaXhlc1t0aGlzLm1hdHJpeGVzLmxlbmd0aCAtIDFdLm1hdHJpeFN0cnVjdHVyZTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIGZvciAoaSA9IHRoaXMubWF0cml4ZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICAgICAgcmVzdWx0TWF0cml4ID0gTWF0cml4T3BlcmF0aW9ucy5tdWx0aXBseU1hdHJpeGVzKHRoaXMubWF0cml4ZXNbaV0ubWF0cml4U3RydWN0dXJlLCByZXN1bHRNYXRyaXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5tYXRyaXhlc0NvbnRyb2xsZXIudHJhbnNmb3JtYXRpb25NYXRyaXggPSByZXN1bHRNYXRyaXg7XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdE1hdHJpeCk7XHJcblxyXG4gICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgYXBwbHkgdHJhbnNmb3JtYXRpb25zIHRvIHZlcnRpY2VzXHJcbiAgICAgICAgTWF0cml4T3BlcmF0aW9ucy52ZXJ0ZXhBcHBseVRyYW5zZm9ybWF0aW9ucyh0aGlzLnZlcnRpY2VzLCB0aGlzLm1hdHJpeGVzQ29udHJvbGxlci50cmFuc2Zvcm1hdGlvbk1hdHJpeCk7XHJcblxyXG4gICAgICAgIC8vIFJlZHJhd1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmRyYXcoKTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IG5ldyBDYW52YXModGhpcywgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbnZhcycpKTtcclxuICAgICAgICB0aGlzLmlucHV0Q29udHJvbGxlciA9IG5ldyBJbnB1dENvbnRyb2xsZXIodGhpcyk7XHJcbiAgICAgICAgdGhpcy5tYXRyaXhlc0NvbnRyb2xsZXIgPSBuZXcgTWF0cml4ZXNDb250cm9sbGVyKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmZha2VTdGFydCgpO1xyXG5cclxuICAgICAgICAvLyBNYWtlIHRoZSBmaXNydCBkcmF3LiAhISEqKipTaG91bGQgYmUgdGhlIGxhc3QgY29tbWFuZCoqKiEhIVxyXG4gICAgICAgIHRoaXMuY2FudmFzLmRyYXcoKTtcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgZ3JhcGhhdHJpeCA9IG5ldyBHcmFwaGF0cml4KCk7XHJcbmdyYXBoYXRyaXguc3RhcnQoKTtcclxuY29uc29sZS5sb2coZ3JhcGhhdHJpeCk7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL2FwcC5qcyIsImNsYXNzIENhbnZhcyB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoX3BhcmVudCwgX2NhbnZhc0VsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBfcGFyZW50O1xyXG4gICAgICAgIHRoaXMuY2FudmFzRE9NID0gX2NhbnZhc0VsZW1lbnQ7IC8vIGNhbnZhcyBET00gZWxlbWVudFxyXG4gICAgICAgIHRoaXMuY2FudmFzID0gdGhpcy5jYW52YXNET00uZ2V0Q29udGV4dCgnMmQnKTsgLy8gZHJhd2luZyBjYW52YXNcclxuICAgICAgICB0aGlzLnNpemUgPSBbMCwgMF07IC8vIGNhbnZhcycgc2l6ZVxyXG4gICAgICAgIHRoaXMuY2VudGVyID0gWzAsIDBdOyAvLyByZWxhdGl2ZSBjZW50ZXJcclxuICAgICAgICB0aGlzLmRyYWdEZWx0YSA9IFswLCAwXTsgLy8gaG93IG11Y2ggaGFzIGJlZW4gZHJhZ2dlZCBpbiBYIGFuZCBZXHJcbiAgICAgICAgdGhpcy5zY2FsZSA9IDIwOyAvLyBEcmF3aW5nIHNjYWxlXHJcbiAgICAgICAgdGhpcy5tYXJnaW5zID0gWzE4MCwgMTMwXTtcclxuXHJcbiAgICAgICAgLy8gYmluZHNcclxuICAgICAgICB0aGlzLmRyYXcgPSB0aGlzLmRyYXcuYmluZCh0aGlzKVxyXG5cclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgY2FydGVzaWFuUGxhbmUoKSB7XHJcblxyXG4gICAgICAgIGxldCBpLCBjb3VudDtcclxuICAgICAgICBsZXQgc2NsID0gTWF0aC5mbG9vcih0aGlzLnNjYWxlKTtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMubGluZVdpZHRoID0gMTtcclxuICAgICAgICB0aGlzLmNhbnZhcy5mb250ID0gXCIxMHB4IFJhbGV3YXlcIjtcclxuICAgICAgICB0aGlzLmNhbnZhcy50ZXh0QmFzZWxpbmUgPSBcIm1pZGRsZVwiO1xyXG5cclxuICAgICAgICAvLyBMSU5IQSBYXHJcbiAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlU3R5bGUgPSBcIiNkMTc4NzhcIjtcclxuICAgICAgICB0aGlzLmNhbnZhcy5maWxsU3R5bGUgPSBcIiNkMTc4NzhcIjtcclxuICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8oMCwgdGhpcy5jZW50ZXJbMV0pO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyh0aGlzLnNpemVbMF0sIHRoaXMuY2VudGVyWzFdKTtcclxuICAgICAgICB0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTtcclxuICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2UoKTtcclxuXHJcbiAgICAgICAgLy8gLVhcclxuICAgICAgICBjb3VudCA9IC0xO1xyXG4gICAgICAgIGZvciAoaSA9IHRoaXMuY2VudGVyWzBdIC0gc2NsOyBpID4gMDsgaSAtPSBzY2wpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbyhpLCB0aGlzLmNlbnRlclsxXSAtIDMpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8oaSwgdGhpcy5jZW50ZXJbMV0gKyAzKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlucHV0Q29udHJvbGxlci5vcHRpb25zLnNob3dOdW1iZXJzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmZpbGxUZXh0KGNvdW50LCBpLCB0aGlzLmNlbnRlclsxXSArIHRoaXMuZ2V0TW9kVGV4dFBvc2l0aW9uKC0xMCwgOCwgY291bnQpLCAxMDApO1xyXG4gICAgICAgICAgICAgICAgY291bnQtLTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gK1hcclxuICAgICAgICBjb3VudCA9IDE7XHJcbiAgICAgICAgZm9yIChpID0gdGhpcy5jZW50ZXJbMF0gKyBzY2w7IGkgPCB0aGlzLnNpemVbMF07IGkgKz0gc2NsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8oaSwgdGhpcy5jZW50ZXJbMV0gLSAzKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVRvKGksIHRoaXMuY2VudGVyWzFdICsgMyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2UoKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlucHV0Q29udHJvbGxlci5vcHRpb25zLnNob3dOdW1iZXJzLmNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmZpbGxUZXh0KGNvdW50LCBpLCB0aGlzLmNlbnRlclsxXSArIHRoaXMuZ2V0TW9kVGV4dFBvc2l0aW9uKC0xMCwgOCwgY291bnQpLCAxMDApO1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gTElOSEEgWVxyXG4gICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZVN0eWxlID0gXCIjODFiZjY4XCI7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuZmlsbFN0eWxlID0gXCIjODFiZjY4XCI7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKHRoaXMuY2VudGVyWzBdLCAwKTtcclxuICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8odGhpcy5jZW50ZXJbMF0sIHRoaXMuc2l6ZVsxXSk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgIC8vICtZXHJcbiAgICAgICAgY291bnQgPSAxO1xyXG4gICAgICAgIGZvciAoaSA9IHRoaXMuY2VudGVyWzFdIC0gc2NsOyBpID4gMDsgaSAtPSBzY2wpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbyh0aGlzLmNlbnRlclswXSAtIDIsIGkpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8odGhpcy5jZW50ZXJbMF0gKyAzLCBpKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXJlbnQuaW5wdXRDb250cm9sbGVyLm9wdGlvbnMuc2hvd051bWJlcnMuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMudGV4dEFsaWduID0gdGhpcy5nZXRNb2RUZXh0UG9zaXRpb24oLTEyLCA2LCBjb3VudCkgPCAwID8gXCJyaWdodFwiIDogXCJsZWZ0XCI7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5maWxsVGV4dChjb3VudCwgdGhpcy5jZW50ZXJbMF0gKyB0aGlzLmdldE1vZFRleHRQb3NpdGlvbigtNiwgNiwgY291bnQpLCBpLCAxMDApO1xyXG4gICAgICAgICAgICAgICAgY291bnQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gLVlcclxuICAgICAgICBjb3VudCA9IC0xO1xyXG4gICAgICAgIGZvciAoaSA9IHRoaXMuY2VudGVyWzFdICsgc2NsOyBpIDwgdGhpcy5zaXplWzFdOyBpICs9IHNjbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKHRoaXMuY2VudGVyWzBdIC0gMiwgaSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyh0aGlzLmNlbnRlclswXSArIDMsIGkpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pbnB1dENvbnRyb2xsZXIub3B0aW9ucy5zaG93TnVtYmVycy5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy50ZXh0QWxpZ24gPSB0aGlzLmdldE1vZFRleHRQb3NpdGlvbigtMTIsIDYsIGNvdW50KSA8IDAgPyBcInJpZ2h0XCIgOiBcImxlZnRcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmZpbGxUZXh0KGNvdW50LCB0aGlzLmNlbnRlclswXSArIHRoaXMuZ2V0TW9kVGV4dFBvc2l0aW9uKC02LCA2LCBjb3VudCksIGksIDEwMCk7XHJcbiAgICAgICAgICAgICAgICBjb3VudC0tO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICBkcmF3KCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gQ2xlYXJzIHRoZSBjYW52YXNcclxuICAgICAgICB0aGlzLmNhbnZhcy5jbGVhclJlY3QoMCwgMCwgdGhpcy5zaXplWzBdLCB0aGlzLnNpemVbMV0pO1xyXG5cclxuICAgICAgICAvLyBDb21wbGltZW50YXJ5IGZ1bmN0aW9uc1xyXG4gICAgICAgIC8vIERyYXdzIHRoZSBncmlkIGlmIGNoZWNrYm94IGlzIGNoZWNrZWRcclxuICAgICAgICBpZiAodGhpcy5wYXJlbnQuaW5wdXRDb250cm9sbGVyLm9wdGlvbnMuc2hvd0dyaWQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmdyaWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY2FydGVzaWFuUGxhbmUoKTtcclxuICAgICAgICB0aGlzLnBpdm90KCk7XHJcblxyXG4gICAgICAgIGxldCBpO1xyXG5cclxuICAgICAgICAvLyBERVNFTkhBIEZPUk1BIEJBU0UgLSAqKioqKiBOQU8gTU9ESUZJQ0FEQSAqKioqKlxyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGggPiAxKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZUpvaW4gPSBcImJldmVsXCI7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZVN0eWxlID0gXCIjYzJiYWM3XCI7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVXaWR0aCA9IDE7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8oXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlclswXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQudmVydGljZXNbMF0ueCAqIHRoaXMuc2NhbGUpLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jZW50ZXJbMV0gKyBNYXRoLnJvdW5kKHRoaXMucGFyZW50LnZlcnRpY2VzWzBdLnkgKiAtdGhpcy5zY2FsZSlcclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoaSA9IDE7IGkgPCB0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVRvKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2VudGVyWzBdICsgTWF0aC5yb3VuZCh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS54ICogdGhpcy5zY2FsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZW50ZXJbMV0gKyBNYXRoLnJvdW5kKHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnkgKiAtdGhpcy5zY2FsZSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBhcmVudC5pbnB1dENvbnRyb2xsZXIub3B0aW9ucy5jbG9zZVBhdGguY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xyXG5cclxuICAgICAgICAgICAgLy8gRHJhdyB0aGUgdW5tb2RpZmllZCB2ZXJ0aWNlc1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQudmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuYXJjKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2VudGVyWzBdICsgTWF0aC5yb3VuZCh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS54ICogdGhpcy5zY2FsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZW50ZXJbMV0gKyBNYXRoLnJvdW5kKHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnkgKiAtdGhpcy5zY2FsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgMiwgMCwgMiogTWF0aC5QSVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmZpbGxTdHlsZSA9IFwiI2ZmZlwiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVdpZHRoID0gMTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmZpbGwoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIC8vIERFU0VOSEEgRk9STUEgKioqKiogTU9ESUZJQ0FEQSAqKioqKlxyXG4gICAgICAgIGlmICh0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGggPiAxKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZUpvaW4gPSBcImJldmVsXCI7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZVN0eWxlID0gXCIjNTczZjg0XCI7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVXaWR0aCA9IDI7XHJcblxyXG4gICAgICAgICAgICAvLyBCZWdpbiB0aGUgbGluZVxyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5tb3ZlVG8oXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlclswXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQudmVydGljZXNbMF0ubW9kaWZpZWRYICogdGhpcy5zY2FsZSksXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlclsxXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQudmVydGljZXNbMF0ubW9kaWZpZWRZICogLXRoaXMuc2NhbGUpXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3IHRoZSBvdGhlciBsaW5lc1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAxOyBpIDwgdGhpcy5wYXJlbnQudmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVUbyhcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbnRlclswXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQudmVydGljZXNbaV0ubW9kaWZpZWRYICogdGhpcy5zY2FsZSksXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jZW50ZXJbMV0gKyBNYXRoLnJvdW5kKHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLm1vZGlmaWVkWSAqIC10aGlzLnNjYWxlKVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGFyZW50LmlucHV0Q29udHJvbGxlci5vcHRpb25zLmNsb3NlUGF0aC5jaGVja2VkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XHJcblxyXG4gICAgICAgICAgICAvLyBEcmF3IHRoZSBtb2RpZmllZCB2ZXJ0aWNlc1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5wYXJlbnQudmVydGljZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jYW52YXMuYXJjKFxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2VudGVyWzBdICsgTWF0aC5yb3VuZCh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS5tb2RpZmllZFggKiB0aGlzLnNjYWxlKSxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbnRlclsxXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQudmVydGljZXNbaV0ubW9kaWZpZWRZICogLXRoaXMuc2NhbGUpLFxyXG4gICAgICAgICAgICAgICAgICAgIDIsIDAsIDIqIE1hdGguUElcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5maWxsU3R5bGUgPSBcIiNmZmZcIjtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmxpbmVXaWR0aCA9IDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5maWxsKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2UoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICB9XHJcblxyXG4gICAgZHJhZyhldnQpIHtcclxuXHJcbiAgICAgICAgbGV0IF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgbGV0IGxhc3RQb2ludGVyUG9zaXRpb24gPSBbXHJcbiAgICAgICAgICAgIGV2dC5wYWdlWCxcclxuICAgICAgICAgICAgZXZ0LnBhZ2VZXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZHJhZ01vdmUoZXZ0KSB7XHJcblxyXG4gICAgICAgICAgICBfdGhpcy5kcmFnRGVsdGEgPSBbXHJcbiAgICAgICAgICAgICAgICBsYXN0UG9pbnRlclBvc2l0aW9uWzBdIC0gZXZ0LnBhZ2VYLFxyXG4gICAgICAgICAgICAgICAgbGFzdFBvaW50ZXJQb3NpdGlvblsxXSAtIGV2dC5wYWdlWVxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgbGFzdFBvaW50ZXJQb3NpdGlvbiA9IFtcclxuICAgICAgICAgICAgICAgIGV2dC5wYWdlWCxcclxuICAgICAgICAgICAgICAgIGV2dC5wYWdlWVxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgX3RoaXMuZGVmQ2VudGVyKCk7XHJcblxyXG4gICAgICAgICAgICBfdGhpcy5kcmF3KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzdG9wRHJhZygpIHtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZHJhZ01vdmUpO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNldXBcIiwgc3RvcERyYWcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW1vdmVcIiwgZHJhZ01vdmUpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCBzdG9wRHJhZyk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIHNldHMgdGhlIENhbnZhcyBET00gZWxlbWVudCBjdXJyZW50IHNpemUgZm9yIGRyYXdpbmcgY2FsY3NcclxuICAgIGRlZlNpemUoKSB7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gd2luZG93LmlubmVyV2lkdGggLSB0aGlzLm1hcmdpbnNbMF07XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMubWFyZ2luc1sxXTtcclxuICAgICAgICB0aGlzLmNhbnZhc0RPTS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCB3aWR0aCk7XHJcbiAgICAgICAgdGhpcy5jYW52YXNET00uc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsIGhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5zaXplID0gW3dpZHRoLCBoZWlnaHRdO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBkZWZDZW50ZXIoKSB7XHJcblxyXG4gICAgICAgIGxldCBjdXJyZW50Q2VudGVyID0gW1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlclswXSxcclxuICAgICAgICAgICAgdGhpcy5jZW50ZXJbMV1cclxuICAgICAgICBdXHJcblxyXG4gICAgICAgIHRoaXMuY2VudGVyID0gW1xyXG4gICAgICAgICAgICBNYXRoLmZsb29yKGN1cnJlbnRDZW50ZXJbMF0gLSB0aGlzLmRyYWdEZWx0YVswXSkgKyAwLjUsXHJcbiAgICAgICAgICAgIE1hdGguZmxvb3IoY3VycmVudENlbnRlclsxXSAtIHRoaXMuZHJhZ0RlbHRhWzFdKSArIDAuNVxyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSW5jcmVhc2VzL0RlY3JlYXNlcyB0aGUgc2NhbGluZyBmYWN0b3Igd2hlbiB0aGUgdXNlciBzY3JvbGxzIG92ZXIgdGhlIGNhbnZhc1xyXG4gICAgc2V0U2NhbGUoZXZ0KSB7XHJcbiAgICAgICAgbGV0IGRlbHRhID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKDEsIGV2dC53aGVlbERlbHRhKSk7XHJcbiAgICAgICAgdGhpcy5zY2FsZSA9IE1hdGgubWF4KDgsIE1hdGgubWluKDEwMCwgdGhpcy5zY2FsZSArIChkZWx0YSAqIDUpKSk7XHJcblxyXG4gICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgfVxyXG5cclxuICAgIGdyaWQoKSB7XHJcbiAgICAgICAgLy8gaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2hvdy1ncmlkXCIpLmNoZWNrZWQpIHtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlU3R5bGUgPSBcIiNmMGYwZjBcIjtcclxuICAgICAgICB0aGlzLmNhbnZhcy5saW5lV2lkdGggPSAxO1xyXG5cclxuICAgICAgICBsZXQgaTtcclxuICAgICAgICBsZXQgc2NsID0gTWF0aC5mbG9vcih0aGlzLnNjYWxlKTtcclxuXHJcbiAgICAgICAgLy8gLVhcclxuICAgICAgICBmb3IgKFxyXG4gICAgICAgICAgICBpID0gdGhpcy5jZW50ZXJbMF0gLSBzY2w7IGkgPiAwOyBpIC09IHNjbFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKGksIDApO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8oaSwgdGhpcy5zaXplWzFdKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gK1hcclxuICAgICAgICBmb3IgKGkgPSB0aGlzLmNlbnRlclswXSArIHNjbDsgaSA8IHRoaXMuc2l6ZVswXTsgaSArPSBzY2wpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbyhpLCAwKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVRvKGksIHRoaXMuc2l6ZVsxXSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vICtZXHJcbiAgICAgICAgZm9yIChpID0gdGhpcy5jZW50ZXJbMV0gLSBzY2w7IGkgPiAwOyBpIC09IHNjbCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5iZWdpblBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKDAsIGkpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8odGhpcy5zaXplWzBdLCBpKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gLVlcclxuICAgICAgICBmb3IgKGkgPSB0aGlzLmNlbnRlclsxXSArIHNjbDsgaSA8IHRoaXMuc2l6ZVsxXTsgaSArPSBzY2wpIHtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLm1vdmVUbygwLCBpKTtcclxuICAgICAgICAgICAgdGhpcy5jYW52YXMubGluZVRvKHRoaXMuc2l6ZVswXSwgaSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmNsb3NlUGF0aCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHJldHVybnMgdGhlIHJpZ2h0IHRleHQgcG9zaXRpb25cclxuICAgIGdldE1vZFRleHRQb3NpdGlvbihfbWluLCBfbWF4LCBfaW5kZXgpIHtcclxuICAgICAgICBpZiAodGhpcy5zY2FsZSA8IDIwICYmIF9pbmRleCAlIDIgPT0gMCkgeyAvLyBpZiBsZXNzIHRoYW4gMjBweCBhbmQgTk9UIE9ERFxyXG4gICAgICAgICAgICByZXR1cm4gX21pbjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gX21heDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcGl2b3QoKSB7XHJcblxyXG4gICAgICAgIGxldCBkcmF3aW5nQ2VudGVyID0gW1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlclswXSArIE1hdGgucm91bmQodGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXgueCAqIHRoaXMuc2NhbGUpLFxyXG4gICAgICAgICAgICB0aGlzLmNlbnRlclsxXSAtIE1hdGgucm91bmQodGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXgueSAqIHRoaXMuc2NhbGUpXHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgdGhpcy5jYW52YXMuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuYXJjKGRyYXdpbmdDZW50ZXJbMF0sIGRyYXdpbmdDZW50ZXJbMV0sIDQsIDAsIDIgKiBNYXRoLlBJKTtcclxuXHJcbiAgICAgICAgLy8gaG9yaXpvbnRhbCBsaW5lXHJcbiAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKGRyYXdpbmdDZW50ZXJbMF0gLSA2LCBkcmF3aW5nQ2VudGVyWzFdKTtcclxuICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8oZHJhd2luZ0NlbnRlclswXSArIDYsIGRyYXdpbmdDZW50ZXJbMV0pO1xyXG5cclxuICAgICAgICAvLyB2ZXJ0aWNhbCBsaW5lXHJcbiAgICAgICAgdGhpcy5jYW52YXMubW92ZVRvKGRyYXdpbmdDZW50ZXJbMF0sIGRyYXdpbmdDZW50ZXJbMV0gLSA2KTtcclxuICAgICAgICB0aGlzLmNhbnZhcy5saW5lVG8oZHJhd2luZ0NlbnRlclswXSwgZHJhd2luZ0NlbnRlclsxXSArIDYpO1xyXG5cclxuICAgICAgICB0aGlzLmNhbnZhcy5zdHJva2VTdHlsZSA9IFwiIzU3M2Y4NFwiO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLmxpbmVXaWR0aCA9IDE7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuc3Ryb2tlKCk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuY2xvc2VQYXRoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gc2V0cyB0aGUgcmVsYXRpdmUgY2VudGVyIGZyb20gd2hlcmUgdG8gZHJhd1xyXG4gICAgLy8gOjogdGhlIHBsYW5lJ3MgMCwwXHJcbiAgICByZXNldENlbnRlcigpIHtcclxuICAgICAgICB0aGlzLmNlbnRlciA9IFtcclxuICAgICAgICAgICAgTWF0aC5mbG9vcigodGhpcy5zaXplWzBdIC8gMikgLSB0aGlzLmRyYWdEZWx0YVswXSkgKyAwLjUsXHJcbiAgICAgICAgICAgIE1hdGguZmxvb3IoKHRoaXMuc2l6ZVsxXSAvIDIpIC0gdGhpcy5kcmFnRGVsdGFbMV0pICsgMC41XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgcmVzaXplKCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gTm90ZXMgdGhlIHByZXZpb3VzIHNpemUgYmVmb3JlIHJlc2l6aW5nLiBkb3VibGUgdmFycyB0byBwcmV2ZW50IHBvaW50aW5nXHJcbiAgICAgICAgbGV0IHByZXZTaXplWCA9IHRoaXMuc2l6ZVswXTtcclxuICAgICAgICBsZXQgcHJldlNpemVZID0gdGhpcy5zaXplWzFdO1xyXG5cclxuICAgICAgICAvLyBnZXRzIHRoZSBjdXJyZW50IGNlbnRlclxyXG4gICAgICAgIGxldCBjdXJyZW50Q2VudGVyID0gW1xyXG4gICAgICAgICAgICB0aGlzLmNlbnRlclswXSxcclxuICAgICAgICAgICAgdGhpcy5jZW50ZXJbMV1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICAvLyByZWRlZmluZXMgY2FudmFzIHNpemVcclxuICAgICAgICB0aGlzLmRlZlNpemUoKTtcclxuXHJcbiAgICAgICAgLy8gY2FsY3VsYXRlcyB0aGUgc2l6ZSBtb2RpZmljYXRpb24gb2YgdGhlIHdpbmRvd1xyXG4gICAgICAgIGxldCByZXNpemVQZXJjZW50YWdlWCA9IHRoaXMuc2l6ZVswXSAvIHByZXZTaXplWDtcclxuICAgICAgICBsZXQgcmVzaXplUGVyY2VudGFnZVkgPSB0aGlzLnNpemVbMV0gLyBwcmV2U2l6ZVk7XHJcblxyXG4gICAgICAgIC8vIHJlc2V0IHRoZSBjZW50ZXIgYWNjb3JkaW5nIHRvIHRoZSBwZXJjZW50YWdlIG9mIHRoZSB3aW5kb3cgcmVzaXplXHJcbiAgICAgICAgdGhpcy5kcmFnRGVsdGEgPSBbXHJcbiAgICAgICAgICAgIGN1cnJlbnRDZW50ZXJbMF0gLSAoY3VycmVudENlbnRlclswXSAqIHJlc2l6ZVBlcmNlbnRhZ2VYKSxcclxuICAgICAgICAgICAgY3VycmVudENlbnRlclsxXSAtIChjdXJyZW50Q2VudGVyWzFdICogcmVzaXplUGVyY2VudGFnZVkpXHJcbiAgICAgICAgXTtcclxuICAgICAgICB0aGlzLmRlZkNlbnRlcigpO1xyXG4gICAgICAgIHRoaXMuZHJhdygpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXQoKSB7XHJcbiAgICAgICAgdGhpcy5kZWZTaXplKCk7XHJcbiAgICAgICAgdGhpcy5yZXNldENlbnRlcigpO1xyXG5cclxuICAgICAgICAvLyBDQU5WQVMgTElTVEVORVJTXHJcblxyXG4gICAgICAgIC8vIE9USEVSIExJU1RFTkVSU1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMucmVzaXplLmJpbmQodGhpcykpXHJcblxyXG4gICAgICAgIC8vIGhvbGQgYW5kIGRyYWdcclxuICAgICAgICB0aGlzLmNhbnZhc0RPTS5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuZHJhZy5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gem9vbSBpbi9vdXRcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNld2hlZWxcIiwgdGhpcy5zZXRTY2FsZS5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Nb3VzZVNjcm9sbFwiLCB0aGlzLnNldFNjYWxlLmJpbmQodGhpcyksIGZhbHNlKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FudmFzO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9jYW52YXMuanMiLCJpbXBvcnQgVmVydGV4IGZyb20gJy4vdmVydGV4JztcclxuaW1wb3J0IE1hdHJpeE9wZXJhdGlvbnMgZnJvbSAnLi9tYXRyaXhlcy9tYXRyaXgtb3BlcmF0aW9ucyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuL21hdHJpeGVzL3V0aWxzJztcclxuXHJcbmNsYXNzIElucHV0Q29udHJvbGxlciB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKF9wYXJlbnQpIHtcclxuXHJcblx0XHR0aGlzLnBhcmVudCA9IF9wYXJlbnQ7XHJcblxyXG5cdFx0Ly8gSW5wdXQgZWxlbWVudHMgKHdoZXJlIHRoZSB1c2VyIGVudGVycyB0aGUgZGVzaXJlZCB2ZXJ0aWNlcylcclxuXHRcdHRoaXMuaW5wdXQgPSB7XHJcblx0XHRcdHg6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5wdXQteFwiKSxcclxuXHRcdFx0eTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbnB1dC15XCIpLFxyXG5cdFx0XHRidXR0b246IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5wdXQtYnV0dG9uXCIpXHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5waXZvdHNMaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwaXZvdC1zZWxlY3RcIik7XHJcblxyXG5cdFx0dGhpcy5vcHRpb25zID0ge1xyXG5cdFx0XHRjbG9zZVBhdGg6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3Blbi1jbG9zZS1wYXRoXCIpLFxyXG5cdFx0XHRzaG93R3JpZDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaG93LWdyaWRcIiksXHJcblx0XHRcdHNob3dOdW1iZXJzOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNob3ctbnVtYmVyc1wiKVxyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMub3JpZ2luQ29vcmRzID0ge1xyXG5cdFx0XHR4OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9yaWdpbi14XCIpLFxyXG5cdFx0XHR5OiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm9yaWdpbi15XCIpLFxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEZ1bmN0aW9ucyBCaW5kc1xyXG5cdFx0dGhpcy5hZGRWZXJ0ZXggPSB0aGlzLmFkZFZlcnRleC5iaW5kKHRoaXMpO1xyXG5cdFx0dGhpcy5zd2l0Y2hQaXZvdCA9IHRoaXMuc3dpdGNoUGl2b3QuYmluZCh0aGlzKTtcclxuXHJcblx0XHR0aGlzLmFkZExpc3RlbmVycygpO1xyXG5cdFx0dGhpcy5pbml0KCk7XHJcblx0fVxyXG5cclxuXHJcblx0YWRkUGl2b3QoX3Z0eCkge1xyXG5cdFx0Ly9cclxuXHRcdGxldCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG5cdFx0b3B0aW9uLnZhbHVlID0gX3Z0eC5pbmRleDtcclxuXHRcdG9wdGlvbi5pbm5lckhUTUwgPSBfdnR4LmRpc3BsYXlOYW1lO1xyXG5cdFx0b3B0aW9uLnZlcnRleCA9IF92dHg7XHJcblx0XHR0aGlzLnBpdm90c0xpc3QuYXBwZW5kQ2hpbGQob3B0aW9uKTtcclxuXHR9XHJcblxyXG5cclxuXHR1cGRhdGVQaXZvdHNJbmRleGVzKCkge1xyXG5cdFx0Ly9cclxuXHRcdGZvciAobGV0IHBpdm90IG9mIHRoaXMucGl2b3RzTGlzdC5vcHRpb25zKSB7XHJcblx0XHRcdHBpdm90LmlubmVySFRNTCA9IHBpdm90LnZlcnRleC5pbmRleDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cclxuXHRzZXRQaXZvdChfdnR4KSB7XHJcblx0XHQvL1xyXG5cdFx0dGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXggPSBfdnR4O1xyXG5cclxuXHRcdC8vdXBkYXRlcyB0aGUgT3JpZ2luIGNvb3JkaW5hdGVzXHJcblx0XHR0aGlzLm9yaWdpbkNvb3Jkcy54LnZhbHVlID0gdGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXgueC50b0ZpeGVkKDIpO1xyXG5cdFx0dGhpcy5vcmlnaW5Db29yZHMueS52YWx1ZSA9IHRoaXMucGFyZW50LnBpdm90VmVydGV4LnkudG9GaXhlZCgyKTtcclxuXHR9XHJcblxyXG5cdGRlZlBpdm90UG9zaXRpb24oKSB7XHJcblx0XHQvL1xyXG5cdFx0Ly8gYWJvcnQgaWYgdGhlIHNlbGVjdGVkIHZhbHVlIGlzIGVtcHR5IChpdCBtZWFucyB0aGUgbGlzdCBpcyBlbXB0eSlcclxuXHRcdGlmICh0aGlzLnBpdm90c0xpc3QudmFsdWUgPT0gXCJcIiB8fCAodGhpcy5waXZvdHNMaXN0LnZhbHVlICE9IFwiYWJzb2x1dGVcIiAmJiB0aGlzLnBpdm90c0xpc3QudmFsdWUgIT0gXCJtYXNzXCIpKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGxldCBpO1xyXG5cdFx0XHJcblxyXG5cdFx0aWYgKHRoaXMucGl2b3RzTGlzdC52YWx1ZSA9PSBcImFic29sdXRlXCIpIHtcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gUmVzZXRcclxuXHRcdFx0dGhpcy5wYXJlbnQuYWJzb2x1dGVDZW50ZXIueCA9IDA7XHJcblx0XHRcdHRoaXMucGFyZW50LmFic29sdXRlQ2VudGVyLnkgPSAwO1xyXG5cclxuXHRcdFx0bGV0IG1pblggPSB0aGlzLnBhcmVudC52ZXJ0aWNlc1swXS54O1xyXG5cdFx0XHRsZXQgbWF4WCA9IHRoaXMucGFyZW50LnZlcnRpY2VzWzBdLng7XHJcblx0XHRcdGxldCBtaW5ZID0gdGhpcy5wYXJlbnQudmVydGljZXNbMF0ueTtcclxuXHRcdFx0bGV0IG1heFkgPSB0aGlzLnBhcmVudC52ZXJ0aWNlc1swXS55O1xyXG5cclxuXHRcdFx0Zm9yIChpID0gMDsgaSA8IHRoaXMucGFyZW50LnZlcnRpY2VzLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnggPCBtaW5YKSB7XHJcblx0XHRcdFx0XHRtaW5YID0gdGhpcy5wYXJlbnQudmVydGljZXNbaV0ueDtcclxuXHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnggPiBtYXhYKSB7XHJcblx0XHRcdFx0XHRtYXhYID0gdGhpcy5wYXJlbnQudmVydGljZXNbaV0ueDtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGlmICh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS55IDwgbWluWSkge1xyXG5cdFx0XHRcdFx0bWluWSA9IHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS55ID4gbWF4WSkge1xyXG5cdFx0XHRcdFx0bWF4WSA9IHRoaXMucGFyZW50LnZlcnRpY2VzW2ldLnk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHJcblx0XHRcdHRoaXMucGFyZW50LmFic29sdXRlQ2VudGVyLnggPSAobWF4WCArIG1pblgpIC8gMjtcclxuXHRcdFx0dGhpcy5wYXJlbnQuYWJzb2x1dGVDZW50ZXIueSA9IChtYXhZICsgbWluWSkgLyAyO1xyXG5cclxuXHRcdFx0dGhpcy5zZXRQaXZvdCh0aGlzLnBhcmVudC5hYnNvbHV0ZUNlbnRlcik7XHJcblxyXG5cdFx0fSBlbHNlIGlmICh0aGlzLnBpdm90c0xpc3QudmFsdWUgPT0gXCJtYXNzXCIpIHtcclxuXHRcdFx0Ly9cclxuXHRcdFx0Ly8gUmVzZXRcclxuXHRcdFx0dGhpcy5wYXJlbnQubWFzc0NlbnRlci54ID0gMDtcclxuXHRcdFx0dGhpcy5wYXJlbnQubWFzc0NlbnRlci55ID0gMDtcclxuXHRcdFx0Ly8gc3VtcyBpdCBhbGwgYW5kIGRpdmlkZSBieSB0aGUgbnVtYmVyIG9mIHZlcnRpY2VzXHJcblx0XHRcdGZvciAoaSA9IDA7IGkgPCB0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHRoaXMucGFyZW50Lm1hc3NDZW50ZXIueCArPSAodGhpcy5wYXJlbnQudmVydGljZXNbaV0ueCkgLyB0aGlzLnBhcmVudC52ZXJ0aWNlcy5sZW5ndGg7XHJcblx0XHRcdFx0dGhpcy5wYXJlbnQubWFzc0NlbnRlci55ICs9ICh0aGlzLnBhcmVudC52ZXJ0aWNlc1tpXS55KSAvIHRoaXMucGFyZW50LnZlcnRpY2VzLmxlbmd0aDtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHRoaXMuc2V0UGl2b3QodGhpcy5wYXJlbnQubWFzc0NlbnRlcik7XHJcblxyXG5cdFx0fVxyXG5cdH1cclxuXHJcblxyXG5cdGFkZFZlcnRleChldnQpIHtcclxuXHRcdC8vXHJcblx0XHQvLyBWYWxpZGF0ZXMgbnVtYmVyc1xyXG5cdFx0dGhpcy5pbnB1dC54LnZhbHVlID0gVXRpbHMudmFsaWROdW1iZXIodGhpcy5pbnB1dC54LnZhbHVlKTtcclxuXHRcdHRoaXMuaW5wdXQueS52YWx1ZSA9IFV0aWxzLnZhbGlkTnVtYmVyKHRoaXMuaW5wdXQueS52YWx1ZSk7XHJcblxyXG5cdFx0Ly8gSWYga2V5ZG93biBhbmQgbm90IEVOVEVSIGtleSwgdGhlbiBhYm9ydFxyXG5cdFx0aWYgKGV2dC50eXBlID09IFwia2V5dXBcIiAmJiBldnQua2V5Q29kZSAhPSAxMykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgb25lIG9yIGJvdGggaW5wdXRzIGFyZSBlbXB0eSwgYWJvcnRcclxuXHRcdGlmICh0aGlzLmlucHV0LngudmFsdWUgPT0gXCJcIiB8fCB0aGlzLmlucHV0LnkudmFsdWUgPT0gXCJcIikge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgYW55IG9mIHRoZSBpbnB1dHMgYXJlIE5hTiwgdGhlbiBhYm9ydFxyXG5cdFx0aWYgKGlzTmFOKHRoaXMuaW5wdXQueC52YWx1ZSkgfHwgaXNOYU4odGhpcy5pbnB1dC55LnZhbHVlKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gaWYgRU5URVIgd2FzIHByZXNzZWQgYW5kIGV2ZXJ5dGhpbmcgaXMgT0ssIHRoZSBzZXQgZm9jdXMgdG8gdGhlIFggaW5wdXQgYWdhaW5cclxuXHRcdGlmIChldnQudHlwZSA9PSBcImtleXVwXCIpIHtcclxuXHRcdFx0dGhpcy5pbnB1dC54LmZvY3VzKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQWRkIG5ldyB2ZXJ0ZXggdG8gdGhlIEdyYXBoYXRyaXggZ2xvYmFsIHZlcnRpY2VzXHJcblx0XHRsZXQgdnR4ID0gbmV3IFZlcnRleCh0aGlzLnBhcmVudCwge1xyXG5cdFx0XHRpbmRleDogdGhpcy5wYXJlbnQudmVydGljZXMubGVuZ3RoICsgMSxcclxuXHRcdFx0ZGlzcGxheU5hbWU6IHRoaXMucGFyZW50LnZlcnRpY2VzLmxlbmd0aCArIDEsXHJcblx0XHRcdHg6IHRoaXMuaW5wdXQueC52YWx1ZSxcclxuXHRcdFx0eTogdGhpcy5pbnB1dC55LnZhbHVlXHJcblx0XHR9KTtcclxuXHJcblx0XHR0aGlzLnBhcmVudC52ZXJ0aWNlcy5wdXNoKHZ0eCk7XHJcblx0XHRcclxuXHRcdC8vIEFkZCB0aGUgbmV3IHZlcnRleCBpbmZvcm1hdGlvbiB0byB0aGUgcGl2b3RzIGxpc3RcclxuXHRcdHRoaXMuYWRkUGl2b3QodnR4KTtcclxuXHRcdFxyXG5cdFx0Ly8gY2xlYXIgdGhlIGlucHV0c1xyXG5cdFx0dGhpcy5pbnB1dC54LnZhbHVlID0gXCJcIjtcclxuXHRcdHRoaXMuaW5wdXQueS52YWx1ZSA9IFwiXCI7XHJcblxyXG5cdFx0Ly8gQXBwbHkgYWxsIHRyYW5zZm9ybWF0aW9ucyB0byB0aGUgdmVydGV4XHJcblx0XHR2dHgudXBkYXRlKCk7XHJcblxyXG5cdFx0Ly8gQXBwbHkgdGhlIGNlbnRlciBwaXZvdCBjYWxjdWxhdGlvbnNcclxuXHRcdHRoaXMuZGVmUGl2b3RQb3NpdGlvbigpO1xyXG5cdFx0XHJcblx0XHQvLyBkcmF3XHJcblx0XHR0aGlzLnBhcmVudC5jYW52YXMuZHJhdygpO1xyXG5cdH1cclxuXHJcblxyXG5cdHN3aXRjaFBpdm90KGV2dCkge1xyXG5cdFx0Ly9cclxuXHRcdC8vIGdldCB0aGUgcHJldmlvdXMgcGl2b3QgdG8gdXBkYXRlIGxhdGVyXHJcblx0XHQvLyBsZXQgcHJldmlvdXNQaXZvdCA9IHRoaXMucGFyZW50LnBpdm90VmVydGV4O1xyXG5cclxuXHRcdC8vIFN3aXRjaCB0byB0aGUgbmV3IHZlcnRleFxyXG5cdFx0dGhpcy5wYXJlbnQucGl2b3RWZXJ0ZXggPSBPYmplY3QuY3JlYXRlKGV2dC50YXJnZXQuc2VsZWN0ZWRPcHRpb25zWzBdLnZlcnRleCk7XHJcblxyXG5cdFx0dGhpcy5kZWZQaXZvdFBvc2l0aW9uKCk7XHJcblx0XHR0aGlzLnBhcmVudC5jYW52YXMuZHJhdygpO1xyXG5cdH1cclxuXHJcblxyXG5cdGFkZExpc3RlbmVycygpIHtcclxuXHRcdC8vXHJcblx0XHQvLyBJbnNlcnQgVmVydGV4IEJ1dHRvblxyXG5cdFx0dGhpcy5pbnB1dC5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYWRkVmVydGV4KTtcclxuXHJcblx0XHQvLyBJbnNlciBLZXlib2FyZCBFbnRlclxyXG5cdFx0dGhpcy5pbnB1dC54LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmFkZFZlcnRleCk7XHJcblx0XHR0aGlzLmlucHV0LnkuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuYWRkVmVydGV4KTtcclxuXHJcblx0XHQvLyBPUFRJT05TIChjbG9zZSBwYXRoICsgc2hvdyBncmlkKVxyXG5cdFx0dGhpcy5vcHRpb25zLmNsb3NlUGF0aC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5wYXJlbnQuY2FudmFzLmRyYXcpO1xyXG5cdFx0dGhpcy5vcHRpb25zLnNob3dHcmlkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLnBhcmVudC5jYW52YXMuZHJhdyk7XHJcblx0XHR0aGlzLm9wdGlvbnMuc2hvd051bWJlcnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMucGFyZW50LmNhbnZhcy5kcmF3KTtcclxuXHJcblx0XHQvLyBQaXZvdCBzZWxlY3Rpb25cclxuXHRcdHRoaXMucGl2b3RzTGlzdC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIHRoaXMuc3dpdGNoUGl2b3QpO1xyXG5cdH1cclxuXHJcblx0aW5pdCgpIHtcclxuXHRcdC8vXHJcblx0XHR0aGlzLnBhcmVudC5tYXNzQ2VudGVyID0gbmV3IFZlcnRleCh0aGlzLnBhcmVudCwge1xyXG5cdFx0XHRpbmRleDogXCJtYXNzXCIsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiBcIlwiLFxyXG5cdFx0XHR4OiAwLFxyXG5cdFx0XHR5OiAwXHJcblx0XHR9KTtcclxuXHRcdHRoaXMucGFyZW50Lm1hc3NDZW50ZXIuZGlzcGxheU5hbWUgPSBcIk1hc3MgY2VudGVyXCI7XHJcblx0XHR0aGlzLmFkZFBpdm90KHRoaXMucGFyZW50Lm1hc3NDZW50ZXIpO1xyXG5cdFx0dGhpcy5zZXRQaXZvdCh0aGlzLnBhcmVudC5tYXNzQ2VudGVyKTtcclxuXHRcdFxyXG5cdFx0dGhpcy5wYXJlbnQuYWJzb2x1dGVDZW50ZXIgPSBuZXcgVmVydGV4KHRoaXMucGFyZW50LCB7XHJcblx0XHRcdGluZGV4OiBcImFic29sdXRlXCIsXHJcblx0XHRcdGRpc3BsYXlOYW1lOiBcIlwiLFxyXG5cdFx0XHR4OiAwLFxyXG5cdFx0XHR5OiAwXHJcblx0XHR9KTtcclxuXHRcdHRoaXMucGFyZW50LmFic29sdXRlQ2VudGVyLmRpc3BsYXlOYW1lID0gXCJBYnNvbHV0ZSBjZW50ZXJcIjtcclxuXHRcdHRoaXMuYWRkUGl2b3QodGhpcy5wYXJlbnQuYWJzb2x1dGVDZW50ZXIpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSW5wdXRDb250cm9sbGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9pbnB1dC1jb250cm9sbGVyLmpzIiwiaW1wb3J0IFRyYW5zbGF0ZU1hdHJpeCBmcm9tICcuL21hdHJpeGVzL3RyYW5zbGF0ZSc7XHJcbmltcG9ydCBSb3RhdGVNYXRyaXggZnJvbSAnLi9tYXRyaXhlcy9yb3RhdGUnO1xyXG5pbXBvcnQgU2NhbGVNYXRyaXggZnJvbSAnLi9tYXRyaXhlcy9zY2FsZSc7XHJcbmltcG9ydCBTaGVhck1hdHJpeCBmcm9tICcuL21hdHJpeGVzL3NoZWFyJztcclxuaW1wb3J0IFJlZmxlY3RNYXRyaXggZnJvbSAnLi9tYXRyaXhlcy9yZWZsZWN0JztcclxuaW1wb3J0IE1hdHJpeE9wZXJhdGlvbnMgZnJvbSAnLi9tYXRyaXhlcy9tYXRyaXgtb3BlcmF0aW9ucyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuL21hdHJpeGVzL3V0aWxzJztcclxuXHJcbmNsYXNzIE1hdHJpeGVzQ29udHJvbGxlciB7XHJcblxyXG5cdGNvbnN0cnVjdG9yKF9wYXJlbnQpIHtcclxuXHJcblx0XHR0aGlzLnBhcmVudCA9IF9wYXJlbnQ7XHJcblxyXG5cdFx0Ly8gSW5wdXQgZWxlbWVudHMgKHdoZXJlIHRoZSB1c2VyIGVudGVycyB0aGUgZGVzaXJlZCB2ZXJ0aWNlcylcclxuXHRcdHRoaXMuYnV0dG9ucyA9IHtcclxuXHRcdFx0dHJhbnNsYXRlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRvLXRyYW5zbGF0ZVwiKSxcclxuXHRcdFx0cm90YXRlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRvLXJvdGF0ZVwiKSxcclxuXHRcdFx0c2NhbGU6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG8tc2NhbGVcIiksXHJcblx0XHRcdHJlZmxlY3Q6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG8tcmVmbGVjdFwiKSxcclxuXHRcdFx0c2hlYXI6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZG8tc2hlYXJcIilcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnRyYW5zZm9ybWF0aW9uTWF0cml4ID0gW1xyXG5cdFx0XHRbMSwgMCwgMF0sXHJcblx0XHRcdFswLCAxLCAwXSxcclxuXHRcdFx0WzAsIDAsIDFdXHJcblx0XHRdO1xyXG5cclxuXHRcdC8vIEZ1bmN0aW9ucyBCaW5kc1xyXG5cdFx0dGhpcy5hZGRNYXRyaXggPSB0aGlzLmFkZE1hdHJpeC5iaW5kKHRoaXMpO1xyXG5cclxuXHRcdHRoaXMuYWRkTGlzdGVuZXJzKCk7XHJcblx0fVxyXG5cclxuXHJcblx0YWRkTWF0cml4KGV2dCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgbGV0IGFjdGlvbiA9IGV2dC50YXJnZXQuZ2V0QXR0cmlidXRlKFwiaWRcIik7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoYWN0aW9uKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkby10cmFuc2xhdGVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm1hdHJpeGVzLnVuc2hpZnQobmV3IFRyYW5zbGF0ZU1hdHJpeCh0aGlzLnBhcmVudCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkby1yb3RhdGVcIjpcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50Lm1hdHJpeGVzLnVuc2hpZnQobmV3IFJvdGF0ZU1hdHJpeCh0aGlzLnBhcmVudCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkby1zY2FsZVwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubWF0cml4ZXMudW5zaGlmdChuZXcgU2NhbGVNYXRyaXgodGhpcy5wYXJlbnQpKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZG8tcmVmbGVjdFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubWF0cml4ZXMudW5zaGlmdChuZXcgUmVmbGVjdE1hdHJpeCh0aGlzLnBhcmVudCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJkby1zaGVhclwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQubWF0cml4ZXMudW5zaGlmdChuZXcgU2hlYXJNYXRyaXgodGhpcy5wYXJlbnQpKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblx0YWRkTGlzdGVuZXJzKCkge1xyXG5cdFx0Ly9cclxuXHRcdC8vIEJ1dHRvbnNcclxuXHRcdHRoaXMuYnV0dG9ucy50cmFuc2xhdGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYWRkTWF0cml4KTtcclxuXHRcdHRoaXMuYnV0dG9ucy5yb3RhdGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYWRkTWF0cml4KTtcclxuXHRcdHRoaXMuYnV0dG9ucy5zY2FsZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5hZGRNYXRyaXgpO1xyXG5cdFx0dGhpcy5idXR0b25zLnJlZmxlY3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuYWRkTWF0cml4KTtcclxuXHRcdHRoaXMuYnV0dG9ucy5zaGVhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5hZGRNYXRyaXgpO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWF0cml4ZXNDb250cm9sbGVyO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9tYXRyaXhlcy1jb250cm9sbGVyLmpzIiwiaW1wb3J0IEJhc2ljTWF0cml4IGZyb20gJy4vYmFzaWMtbWF0cml4LmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgTWF0cml4T3BlcmF0aW9ucyBmcm9tICcuL21hdHJpeC1vcGVyYXRpb25zJztcclxuXHJcbmNsYXNzIFRyYW5zbGF0ZU1hdHJpeCBleHRlbmRzIEJhc2ljTWF0cml4IHtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoX3BhcmVudCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgc3VwZXIoX3BhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMueCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnkgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIC8vIEJpbmRzXHJcbiAgICAgICAgdGhpcy51cGRhdGVNYXRyaXggPSB0aGlzLnVwZGF0ZU1hdHJpeC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlRE9NRWxlbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZURPTUVsZW1lbnQoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gY3JlYXRlcyBhIEJhc2ljIENvbnRhaW5lciBhbmQgcmV0dXJucyBpdFxyXG4gICAgICAgIGxldCBjb250YWluZXIgPSB0aGlzLmNyZWF0ZUJhc2ljRE9NRWxlbWVudCgpO1xyXG5cclxuICAgICAgICBjb250YWluZXIudGl0bGUuaW5uZXJIVE1MID0gXCJUcmFuc2xhdGVcIjtcclxuXHJcbiAgICAgICAgLy8gWCB2YWx1ZVxyXG4gICAgICAgIGxldCB4Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBjb250YWluZXIudmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHhDb250YWluZXIpO1xyXG5cclxuICAgICAgICBsZXQgeFRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlggXCIpO1xyXG4gICAgICAgIHhDb250YWluZXIuYXBwZW5kQ2hpbGQoeFRleHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMueCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICB0aGlzLnguc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XHJcbiAgICAgICAgdGhpcy54LnZhbHVlID0gMDtcclxuICAgICAgICB4Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMueCk7XHJcbiAgICAgICAgdGhpcy54LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLnVwZGF0ZU1hdHJpeCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gWSB2YWx1ZVxyXG4gICAgICAgIGxldCB5Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBjb250YWluZXIudmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHlDb250YWluZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB5VGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiWSBcIik7XHJcbiAgICAgICAgeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh5VGV4dCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy55ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMueS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcclxuICAgICAgICB0aGlzLnkudmFsdWUgPSAwO1xyXG4gICAgICAgIHlDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy55KTtcclxuICAgICAgICB0aGlzLnkuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXBkYXRlTWF0cml4KVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU1hdHJpeCgpIHtcclxuXHJcbiAgICAgICAgLy8gRmlyc3QsIHZhbGlkYXRlcyBpbnB1dCB2YWx1ZXNcclxuICAgICAgICB0aGlzLngudmFsdWUgPSBVdGlscy52YWxpZE51bWJlcih0aGlzLngudmFsdWUpO1xyXG4gICAgICAgIHRoaXMueS52YWx1ZSA9IFV0aWxzLnZhbGlkTnVtYmVyKHRoaXMueS52YWx1ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQXBwbHkgdmFsdWVzXHJcbiAgICAgICAgdGhpcy5tYXRyaXhTdHJ1Y3R1cmVbMF1bMl0gPSBwYXJzZUZsb2F0KHRoaXMueC52YWx1ZSB8fCAwKTtcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVsxXVsyXSA9IHBhcnNlRmxvYXQodGhpcy55LnZhbHVlIHx8IDApO1xyXG5cclxuICAgICAgICB0aGlzLnBhcmVudC5hcHBseVRyYW5zZm9ybXMoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgVHJhbnNsYXRlTWF0cml4O1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyAuL3NyYy9qcy9tYXRyaXhlcy90cmFuc2xhdGUuanMiLCJpbXBvcnQgQmFzaWNNYXRyaXggZnJvbSAnLi9iYXNpYy1tYXRyaXguanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCBNYXRyaXhPcGVyYXRpb25zIGZyb20gJy4vbWF0cml4LW9wZXJhdGlvbnMnO1xyXG5cclxuY2xhc3MgUm90YXRlTWF0cml4IGV4dGVuZHMgQmFzaWNNYXRyaXgge1xyXG4gICAgXHJcbiAgICBjb25zdHJ1Y3RvcihfcGFyZW50KSB7XHJcbiAgICAgICAgLy9cclxuICAgICAgICBzdXBlcihfcGFyZW50KTtcclxuXHJcbiAgICAgICAgdGhpcy5kZWdyZWVzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEJpbmRzXHJcbiAgICAgICAgdGhpcy51cGRhdGVNYXRyaXggPSB0aGlzLnVwZGF0ZU1hdHJpeC5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZURPTUVsZW1lbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVET01FbGVtZW50KCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGNyZWF0ZXMgYSBCYXNpYyBDb250YWluZXIgYW5kIHJldHVybnMgaXRcclxuICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jcmVhdGVCYXNpY0RPTUVsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLnRpdGxlLmlubmVySFRNTCA9IFwiUm90YXRlXCI7XHJcblxyXG4gICAgICAgIC8vIERlZ3JlZXMgdmFsdWVcclxuICAgICAgICBsZXQgZGVnQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBjb250YWluZXIudmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlZ0NvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIGxldCBkZWdUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJkZWcgXCIpO1xyXG4gICAgICAgIGRlZ0NvbnRhaW5lci5hcHBlbmRDaGlsZChkZWdUZXh0KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmRlZ3JlZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgdGhpcy5kZWdyZWVzLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xyXG4gICAgICAgIHRoaXMuZGVncmVlcy52YWx1ZSA9IDA7XHJcbiAgICAgICAgZGVnQ29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMuZGVncmVlcyk7XHJcbiAgICAgICAgdGhpcy5kZWdyZWVzLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLnVwZGF0ZU1hdHJpeCk7XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTWF0cml4KCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gRmlyc3QsIHZhbGlkYXRlcyBpbnB1dCB2YWx1ZXNcclxuICAgICAgICB0aGlzLmRlZ3JlZXMudmFsdWUgPSBVdGlscy52YWxpZE51bWJlcih0aGlzLmRlZ3JlZXMudmFsdWUpO1xyXG5cclxuICAgICAgICAvLyBBcHBseSB2YWx1ZXNcclxuICAgICAgICBsZXQgdmFsID0gcGFyc2VGbG9hdCh0aGlzLmRlZ3JlZXMudmFsdWUpIHx8IDA7XHJcbiAgICAgICAgdGhpcy5tYXRyaXhTdHJ1Y3R1cmVbMF1bMF0gPSBNYXRoLmNvcyhVdGlscy5kZWdUb1JhZCh2YWwpKTtcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVswXVsxXSA9IC1NYXRoLnNpbihVdGlscy5kZWdUb1JhZCh2YWwpKTtcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVsxXVswXSA9IE1hdGguc2luKFV0aWxzLmRlZ1RvUmFkKHZhbCkpO1xyXG4gICAgICAgIHRoaXMubWF0cml4U3RydWN0dXJlWzFdWzFdID0gTWF0aC5jb3MoVXRpbHMuZGVnVG9SYWQodmFsKSk7XHJcblxyXG4gICAgICAgIHRoaXMucGFyZW50LmFwcGx5VHJhbnNmb3JtcygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSb3RhdGVNYXRyaXg7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL21hdHJpeGVzL3JvdGF0ZS5qcyIsImltcG9ydCBCYXNpY01hdHJpeCBmcm9tICcuL2Jhc2ljLW1hdHJpeC5qcyc7XHJcbmltcG9ydCBVdGlscyBmcm9tICcuL3V0aWxzJztcclxuaW1wb3J0IE1hdHJpeE9wZXJhdGlvbnMgZnJvbSAnLi9tYXRyaXgtb3BlcmF0aW9ucyc7XHJcblxyXG5jbGFzcyBTY2FsZU1hdHJpeCBleHRlbmRzIEJhc2ljTWF0cml4IHtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoX3BhcmVudCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgc3VwZXIoX3BhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMueCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnkgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIC8vIEJpbmRzXHJcbiAgICAgICAgdGhpcy51cGRhdGVNYXRyaXggPSB0aGlzLnVwZGF0ZU1hdHJpeC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuY3JlYXRlRE9NRWxlbWVudCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZURPTUVsZW1lbnQoKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gY3JlYXRlcyBhIEJhc2ljIENvbnRhaW5lciBhbmQgcmV0dXJucyBpdFxyXG4gICAgICAgIGxldCBjb250YWluZXIgPSB0aGlzLmNyZWF0ZUJhc2ljRE9NRWxlbWVudCgpO1xyXG5cclxuICAgICAgICBjb250YWluZXIudGl0bGUuaW5uZXJIVE1MID0gXCJTY2FsZVwiO1xyXG5cclxuICAgICAgICAvLyBYIHZhbHVlXHJcbiAgICAgICAgbGV0IHhDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGNvbnRhaW5lci52YWx1ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoeENvbnRhaW5lcik7XHJcblxyXG4gICAgICAgIGxldCB4VGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiWCBcIik7XHJcbiAgICAgICAgeENvbnRhaW5lci5hcHBlbmRDaGlsZCh4VGV4dCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy54ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMueC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcclxuICAgICAgICB0aGlzLngudmFsdWUgPSAxO1xyXG4gICAgICAgIHhDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy54KTtcclxuICAgICAgICB0aGlzLnguYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXBkYXRlTWF0cml4KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBZIHZhbHVlXHJcbiAgICAgICAgbGV0IHlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGNvbnRhaW5lci52YWx1ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoeUNvbnRhaW5lcik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbGV0IHlUZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJZIFwiKTtcclxuICAgICAgICB5Q29udGFpbmVyLmFwcGVuZENoaWxkKHlUZXh0KTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XHJcbiAgICAgICAgdGhpcy55LnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJ0ZXh0XCIpO1xyXG4gICAgICAgIHRoaXMueS52YWx1ZSA9IDE7XHJcbiAgICAgICAgeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0aGlzLnkpO1xyXG4gICAgICAgIHRoaXMueS5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy51cGRhdGVNYXRyaXgpXHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTWF0cml4KCkge1xyXG5cclxuICAgICAgICAvLyBGaXJzdCwgdmFsaWRhdGVzIGlucHV0IHZhbHVlc1xyXG4gICAgICAgIHRoaXMueC52YWx1ZSA9IFV0aWxzLnZhbGlkTnVtYmVyKHRoaXMueC52YWx1ZSk7XHJcbiAgICAgICAgdGhpcy55LnZhbHVlID0gVXRpbHMudmFsaWROdW1iZXIodGhpcy55LnZhbHVlKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBcHBseSB2YWx1ZXNcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVswXVswXSA9IHBhcnNlRmxvYXQodGhpcy54LnZhbHVlIHx8IDApO1xyXG4gICAgICAgIHRoaXMubWF0cml4U3RydWN0dXJlWzFdWzFdID0gcGFyc2VGbG9hdCh0aGlzLnkudmFsdWUgfHwgMCk7XHJcblxyXG4gICAgICAgIHRoaXMucGFyZW50LmFwcGx5VHJhbnNmb3JtcygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTY2FsZU1hdHJpeDtcblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvanMvbWF0cml4ZXMvc2NhbGUuanMiLCJpbXBvcnQgQmFzaWNNYXRyaXggZnJvbSAnLi9iYXNpYy1tYXRyaXguanMnO1xyXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi91dGlscyc7XHJcbmltcG9ydCBNYXRyaXhPcGVyYXRpb25zIGZyb20gJy4vbWF0cml4LW9wZXJhdGlvbnMnO1xyXG5cclxuY2xhc3MgU2hlYXJNYXRyaXggZXh0ZW5kcyBCYXNpY01hdHJpeCB7XHJcbiAgICBcclxuICAgIGNvbnN0cnVjdG9yKF9wYXJlbnQpIHtcclxuICAgICAgICAvL1xyXG4gICAgICAgIHN1cGVyKF9wYXJlbnQpO1xyXG5cclxuICAgICAgICB0aGlzLnggPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy55ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICAvLyBCaW5kc1xyXG4gICAgICAgIHRoaXMudXBkYXRlTWF0cml4ID0gdGhpcy51cGRhdGVNYXRyaXguYmluZCh0aGlzKTtcclxuICAgICAgICBcclxuICAgICAgICB0aGlzLmNyZWF0ZURPTUVsZW1lbnQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjcmVhdGVET01FbGVtZW50KCkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGNyZWF0ZXMgYSBCYXNpYyBDb250YWluZXIgYW5kIHJldHVybnMgaXRcclxuICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jcmVhdGVCYXNpY0RPTUVsZW1lbnQoKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyLnRpdGxlLmlubmVySFRNTCA9IFwiU2hlYXJcIjtcclxuXHJcbiAgICAgICAgLy8gWCB2YWx1ZVxyXG4gICAgICAgIGxldCB4Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBjb250YWluZXIudmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHhDb250YWluZXIpO1xyXG5cclxuICAgICAgICBsZXQgeFRleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlggXCIpO1xyXG4gICAgICAgIHhDb250YWluZXIuYXBwZW5kQ2hpbGQoeFRleHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMueCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICB0aGlzLnguc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XHJcbiAgICAgICAgdGhpcy54LnZhbHVlID0gMDtcclxuICAgICAgICB4Q29udGFpbmVyLmFwcGVuZENoaWxkKHRoaXMueCk7XHJcbiAgICAgICAgdGhpcy54LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLnVwZGF0ZU1hdHJpeCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gWSB2YWx1ZVxyXG4gICAgICAgIGxldCB5Q29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgICAgICBjb250YWluZXIudmFsdWVzQ29udGFpbmVyLmFwcGVuZENoaWxkKHlDb250YWluZXIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGxldCB5VGV4dCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiWSBcIik7XHJcbiAgICAgICAgeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh5VGV4dCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgdGhpcy55ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xyXG4gICAgICAgIHRoaXMueS5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dFwiKTtcclxuICAgICAgICB0aGlzLnkudmFsdWUgPSAwO1xyXG4gICAgICAgIHlDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy55KTtcclxuICAgICAgICB0aGlzLnkuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXBkYXRlTWF0cml4KVxyXG4gICAgICAgIFxyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZU1hdHJpeCgpIHtcclxuXHJcbiAgICAgICAgLy8gRmlyc3QsIHZhbGlkYXRlcyBpbnB1dCB2YWx1ZXNcclxuICAgICAgICB0aGlzLngudmFsdWUgPSBVdGlscy52YWxpZE51bWJlcih0aGlzLngudmFsdWUpO1xyXG4gICAgICAgIHRoaXMueS52YWx1ZSA9IFV0aWxzLnZhbGlkTnVtYmVyKHRoaXMueS52YWx1ZSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQXBwbHkgdmFsdWVzXHJcbiAgICAgICAgdGhpcy5tYXRyaXhTdHJ1Y3R1cmVbMF1bMV0gPSBwYXJzZUZsb2F0KHRoaXMueC52YWx1ZSB8fCAwKTtcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVsxXVswXSA9IHBhcnNlRmxvYXQodGhpcy55LnZhbHVlIHx8IDApO1xyXG5cclxuICAgICAgICB0aGlzLnBhcmVudC5hcHBseVRyYW5zZm9ybXMoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgU2hlYXJNYXRyaXg7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL21hdHJpeGVzL3NoZWFyLmpzIiwiaW1wb3J0IEJhc2ljTWF0cml4IGZyb20gJy4vYmFzaWMtbWF0cml4LmpzJztcclxuaW1wb3J0IFV0aWxzIGZyb20gJy4vdXRpbHMnO1xyXG5pbXBvcnQgTWF0cml4T3BlcmF0aW9ucyBmcm9tICcuL21hdHJpeC1vcGVyYXRpb25zJztcclxuXHJcbmNsYXNzIFJvdGF0ZU1hdHJpeCBleHRlbmRzIEJhc2ljTWF0cml4IHtcclxuICAgIFxyXG4gICAgY29uc3RydWN0b3IoX3BhcmVudCkge1xyXG4gICAgICAgIC8vXHJcbiAgICAgICAgc3VwZXIoX3BhcmVudCk7XHJcblxyXG4gICAgICAgIHRoaXMuZGVncmVlcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBCaW5kc1xyXG4gICAgICAgIHRoaXMudXBkYXRlTWF0cml4ID0gdGhpcy51cGRhdGVNYXRyaXguYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVET01FbGVtZW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlRE9NRWxlbWVudCgpIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBjcmVhdGVzIGEgQmFzaWMgQ29udGFpbmVyIGFuZCByZXR1cm5zIGl0XHJcbiAgICAgICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY3JlYXRlQmFzaWNET01FbGVtZW50KCk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lci50aXRsZS5pbm5lckhUTUwgPSBcIlJlZmxlY3RcIjtcclxuXHJcbiAgICAgICAgLy8gRGVncmVlcyB2YWx1ZVxyXG4gICAgICAgIGxldCBkZWdDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG4gICAgICAgIGNvbnRhaW5lci52YWx1ZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoZGVnQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgbGV0IGRlZ1RleHQgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcImRlZyBcIik7XHJcbiAgICAgICAgZGVnQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlZ1RleHQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMuZGVncmVlcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcclxuICAgICAgICB0aGlzLmRlZ3JlZXMuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHRcIik7XHJcbiAgICAgICAgdGhpcy5kZWdyZWVzLnZhbHVlID0gMDtcclxuICAgICAgICBkZWdDb250YWluZXIuYXBwZW5kQ2hpbGQodGhpcy5kZWdyZWVzKTtcclxuICAgICAgICB0aGlzLmRlZ3JlZXMuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMudXBkYXRlTWF0cml4KTtcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVNYXRyaXgoKSB7XHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBGaXJzdCwgdmFsaWRhdGVzIGlucHV0IHZhbHVlc1xyXG4gICAgICAgIHRoaXMuZGVncmVlcy52YWx1ZSA9IFV0aWxzLnZhbGlkTnVtYmVyKHRoaXMuZGVncmVlcy52YWx1ZSk7XHJcblxyXG4gICAgICAgIC8vIEFwcGx5IHZhbHVlc1xyXG4gICAgICAgIGxldCB2YWwgPSBwYXJzZUZsb2F0KHRoaXMuZGVncmVlcy52YWx1ZSkgfHwgMDtcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVswXVswXSA9IE1hdGguY29zKFV0aWxzLmRlZ1RvUmFkKHZhbCkgKiAyKTtcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVswXVsxXSA9IE1hdGguc2luKFV0aWxzLmRlZ1RvUmFkKHZhbCkgKiAyKTtcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVsxXVswXSA9IE1hdGguc2luKFV0aWxzLmRlZ1RvUmFkKHZhbCkgKiAyKTtcclxuICAgICAgICB0aGlzLm1hdHJpeFN0cnVjdHVyZVsxXVsxXSA9IC1NYXRoLmNvcyhVdGlscy5kZWdUb1JhZCh2YWwpICogMik7XHJcblxyXG4gICAgICAgIHRoaXMucGFyZW50LmFwcGx5VHJhbnNmb3JtcygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBSb3RhdGVNYXRyaXg7XG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2pzL21hdHJpeGVzL3JlZmxlY3QuanMiXSwic291cmNlUm9vdCI6IiJ9